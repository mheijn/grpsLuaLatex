\documentclass[tikz]{standalone}
\usepackage{pgfplots}
\usepgfplotslibrary{groupplots}
\pgfplotsset{compat=1.17}

\def\plotdatapersons{grps.pers.plt}
\def\plotdataparents{grps.pare.plt}
\begin{document}
\pgfplotsset{
    colormap={custom}{
        rgb255(0)=(100,100,255); % Blue for 0
        rgb255(1)=(255,100,255)  % Red for 1
        rgb255(2)=(100,100,0)  % Red for 1
    }
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\typeout{different spouses}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{tikzpicture}
\pgfplotsset{
    colormap={custom}{
        rgb255(0cm)=(0,0,255); % Blue for 0
        rgb255(1cm)=(255,0,0)  % Red for 1
    }
}
\begin{axis}[
    xmin = 1550, xmax=2000,
    ymin= -20,   ymax = 20,
    restrict y to domain=-100:100,
    xlabel ={year of birth},
    xtick = {1500,1600,1700,1800,1900},
    xticklabel style={/pgf/number format/1000 sep={},},  % Remove the comma in numbers
    ylabel={age diffrence spouses (man - woman)},
    x filter/.expression={(\thisrow{spouse}==-1)? NaN : x}
%    x filter/.expression={(meta>0)? nan : x}
]
\addplot[
    only marks,
    color=green,
    mark=*,%halfcircle*,
    mark size=0.3pt,
    ]
table [
    meta=gender,
    y expr = (\thisrow{spouse}/ 365.2425),  %
    x expr = (\thisrow{born} / 365.2425),
    %restrict expr to domain={\thisrow{spouse}}{0:inf},
    restrict expr to domain={\thisrow{gender}}{0:0.5},
    ] {\plotdatapersons};
%
\end{axis}
\end{tikzpicture}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\typeout{born hist in time}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{tikzpicture}
  \begin{groupplot}[
    group style={
      group size=2 by 1, % 2 plots in one row
      horizontal sep=0.5cm, % Space between plots to create the "break"
    },
  ]
    %
    \nextgroupplot[
        ybar,
        xmin=-100, xmax=266,
        ymin=0, ymax=60,
        ylabel={Y-as},
        ]
    \addplot [
        hist={ data=x, bins= 12,},
        fill=green!70,  opacity=0.3,
        domain=-100:260,
        %x filter/.expression={ \thisrow{realpar} == -1 ? nan : \thisrow{realpar}},
        x filter/.expression={ x < 266 ? x: NaN},
    ] table [
    x = parents,
    ] {\plotdataparents};
    %
    \nextgroupplot[
        %axis line style={left=white, right=black, bottom=black, top=black},
        ybar,
        xmin=260,  xmax=10000,
        xtick = {2000,4000,6000,8000},
        xticklabels = {2000,4000,6000,8000},
        %xticklabel style={
            %/pgf/number format/1000 sep={},
            %/pgf/number  format/fixed,
            %},
        ymin=0, ymax=60,
        ytick=\empty,
        yticklabels=\empty,
        x filter/.expression={(x > 260)? x : nan},
        xlabel= {birth days after marriage}
        ]
    \addplot [
    hist={ data=x, bins= 100,},
    fill=green!70,  opacity=0.3,
    domain=260:1000,
    ] table [
    x  = parents,
    ] {\plotdataparents};

  \end{groupplot}
\end{tikzpicture}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\typeout{born hist in year}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{tikzpicture}
\begin{axis}[
    ybar,
    ylabel={number of birth},
%    x filter/.expression={0 <= \thisrow{realpar}  && \thisrow{realpar} <= 250)? x : nan},
%    x filter/.expression={( meta > 0 )? x : nan},
    xmin=1, xmax=365,
    ymin=0, ymax=55,
    xlabel={days in year}
]
\addplot[
    hist={
        data = x,
        bins = 52,
        data min = 1,
        data max = 365
        },
    fill=green!70, opacity=0.3,
    ]
table [
    x = inyear,
    ] {\plotdataparents};
%
\end{axis}
\end{tikzpicture}

\begin{tikzpicture}
\begin{axis}[
    ybar,
    ylabel={number of birth},
%    x filter/.expression={0 <= \thisrow{realpar}  && \thisrow{realpar} <= 250)? x : nan},
%    x filter/.expression={( meta > 0 )? x : nan},
    xmin=1, xmax=365,
    ymin=0, ymax=55,
    xlabel={days after Easter}
]
\addplot[
    hist={
        data = x,
        bins = 52,
        data min = 1,
        data max = 365
        },
    fill=green!70, opacity=0.3,
    ]
table [
    x = ineaster,
    ] {\plotdataparents};
%
\end{axis}
\end{tikzpicture}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\typeout{born hist early in year}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{tikzpicture}
\begin{axis}[
    ybar,
    ylabel={number of birth},
    xmin=1, xmax=365,
    %ymin=0, ymax=55,
    xlabel={days in year},
    xtick={15, 45.5, 76, 106.5, 137, 167.5, 198, 228.5, 259, 289.5, 320, 350.5}, % Position ticks at bin centers
    xticklabels={{jan\\apr}, {feb\\may}, {mar\\jun}, {apr\\jul}, {may\\aug}, {jun\\sep}, {jul\\oct}, {aug\\nov}, {sep\\dec}, {oct\\jan}, {nov\\feb}, {dec\\mar}}, % Custom labels for bins
    xticklabel style = {font=\tiny,align=center},
    ]
\addplot[
    hist={
        data = x,
        bins = 12,
        data min = 1,  data max = 365,
        data filter/.code={
        \edef\temp{\thisrow{parents}}
        \ifnum\temp<266
          % Keep values where filter_col > 5
          \else
          \pgfmathsetmacro\pgfmathresult{NaN} % Exclude this data point
        \fi}
        },
    fill=green!70, opacity=0.3,
    ]
table [
    x = inyear,
    ] {\plotdataparents};
%
\end{axis}
\end{tikzpicture}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\typeout{generation difference}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\definecolor{femalecolor}{rgb}{1, 0.4, 1}
\definecolor{malecolor}{rgb}{0.4, 0.4, 1}

\begin{tikzpicture}
\begin{axis}[
    xmin = 1550, xmax=2000,
    ymin=0,ymax=50,
    xlabel ={year of birth},
    xtick = {1500,1600,1700,1800,1900},
    xticklabel style={/pgf/number format/1000 sep={},},  % Remove the comma in numbers
    ylabel={generation difference parents}
]
%
\addplot[
    only marks,color=malecolor, mark=*, mark size=0.2pt,]
table [
    y expr = (\thisrow{father} / 365.2425),  %
    x expr = (\thisrow{born} / 365.2425),
    restrict expr to domain={\thisrow{father}}{0:inf},
    ] {\plotdatapersons};
%
\addplot[
    only marks, color=femalecolor, mark=*, mark size=0.2pt,]
table [
    y expr = (\thisrow{mother} / 365.2425),  %
    x expr = (\thisrow{born} / 365.2425),
    restrict expr to domain={\thisrow{mother}}{0:inf},
    ] {\plotdatapersons};
%
\end{axis}
\end{tikzpicture}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\typeout{generation difference, 2 generations}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{tikzpicture}
\begin{axis}[
    xmin = 1550, xmax=2000,
    ymin=0,ymax=100,
    xlabel ={year of birth},
    xtick = {1500,1600,1700,1800,1900},
    xticklabel style={/pgf/number format/1000 sep={},},  % Remove the comma in numbers
    ylabel={age difference after 2 generations}
]
%%
\addplot[
    only marks, color=green, mark=*, mark size=0.2pt,]
table [
    y expr = (\thisrow{fgrandm} / 365.2425),  %
    x expr = (\thisrow{born} / 365.2425),
    restrict expr to domain={\thisrow{fgrandm}}{0:inf},
    ] {\plotdatapersons};
\addplot[only marks, color=green, mark=*, mark size=0.2pt,]
table [
    y expr = (\thisrow{mgrandf} / 365.2425),  %
    x expr = (\thisrow{born} / 365.2425),
    restrict expr to domain={\thisrow{mgrandf}}{0:inf},
    ] {\plotdatapersons};
%%
\addplot[only marks, color=malecolor, mark=*, mark size=0.2pt,]
table [
    y expr = (\thisrow{fgrandf} / 365.2425),  %
    x expr = (\thisrow{born} / 365.2425),
    restrict expr to domain={\thisrow{fgrandf}}{0:inf},
    ] {\plotdatapersons};
%%
\addplot[only marks, color=femalecolor, mark=*, mark size=0.2pt,]
table [
    y expr = (\thisrow{mgrandm} / 365.2425),  %
    x expr = (\thisrow{born} / 365.2425),
    restrict expr to domain={\thisrow{mgrandm}}{0:inf},
    ] {\plotdatapersons};
%
\end{axis}
\end{tikzpicture}
\pgfplotsset{
    colormap={custom}{
        rgb255(0)=(100,100,255); % Blue for 0
        rgb255(1)=(255,100,255)  % Red for 1
    }
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\typeout{age}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{tikzpicture}
\begin{axis}[
    xmin = 1550, xmax=2000,
    xlabel ={year of birth},
    xtick = {1500,1600,1700,1800,1900},
    xticklabel style={/pgf/number format/1000 sep={},},  % Remove the comma in numbers
    filter discard warning=false, % Optional: suppress filter warnings
    x filter/.expression={(x >1500 && y>=0)? x : nan},
    %%
    ymin=0,ymax=100,
    ylabel={age in years}
]
\addplot[
    only marks,
    scatter,
    scatter src=explicit,  % Use meta column explicitly
    mark=*,%halfcircle*,
    mark size=1.0pt,
    ]
table [
    meta = gender, %
    y expr = (\thisrow{age} / 365.2425), %
    x expr = (\thisrow{born} / 365.2425),
    restrict expr to domain={\thisrow{born}}{0:inf},
    ] {\plotdatapersons};
%
\end{axis}
\end{tikzpicture}
%\end{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\typeout{born}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{tikzpicture}
\begin{axis}[
    xmin = 1, xmax=366,
    ymin=0,ymax=100,
    xlabel ={day of birth},
    restrict y to domain=-0.1:100,
    xticklabel style={/pgf/number format/1000 sep={},},  % Remove the comma in numbers
    y filter/.expression={(y < 120 && y>=0)? y : nan},
    x filter/.expression={\thisrow{real} > 0 ? x : NaN},
    %%
    ylabel={age in years}
]
\addplot[
    only marks,
    scatter,
    scatter src=explicit,  % Use meta column explicitly
    mark=*,%halfcircle*,
    mark size=1.0pt,
    ]
table [
    meta=gender,
    y expr = (\thisrow{age} / 365.2425),  %
    x expr = \thisrow{born} - 365.2425 * floor(\thisrow{born} / 365.2425),
    restrict expr to domain={\thisrow{born}}{0:inf},
    ] {\plotdatapersons};
%
\end{axis}
\end{tikzpicture}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\typeout{born in marriage}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{tikzpicture}
\begin{axis}[
    xmin = 1, xmax=366,
    ymin=0,ymax=20,
    xlabel ={day of birth},
    restrict y to domain=-0.01:100,
    xticklabel style={/pgf/number format/1000 sep={},},  % Remove the comma in numbers
    x filter/.expression={(x >0 && y>=0 && y<120)? x : nan},
    ylabel={born years in marriage}
]
\addplot[
    only marks,
    scatter,
    scatter src=explicit,  % Use meta column explicitly
    mark=*,%halfcircle*,
    mark size=1.0pt,
    ]
table [
    meta=gender,
    y expr =  \thisrow{parents} / 365.2425,  %
    x expr = \thisrow{born} - 365.2425 * floor(\thisrow{born} / 365.2425),
    restrict expr to domain={\thisrow{born}}{0:inf},
    ] {\plotdatapersons};
%
\end{axis}
\end{tikzpicture}


\end{document}

\end{document}
