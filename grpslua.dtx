% \iffalse meta-comment
%
% Copyright (C) 2024 by Marc Heijn <marc@heijn-buis.demon.nl>
% ---------------------------------------------------------------------------
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
%
% The Current Maintainer of this work is Marc Heijn.
%
% This work consists of the files ../grpslua.dtx and ../grpslua.ins
% and the derived filebase ../grpslua.sty.
%
% \fi
%
% \iffalse
%<*driver>
\ProvidesFile{grpslua.dtx}
%</driver>
%<package>\NeedsTeXFormat{LaTeX2e}[1999/12/01]
%<package>\ProvidesPackage{../grpslua}
%<*package>
    [2024/12/19 Version 0.1 Description of grpslua.sty package]
%</package>
%
%<*driver>
\documentclass{ltxdoc}
\usepackage{dtxdescribe}
\usepackage{grpslua}
\geometry{left=2in}
\EnableCrossrefs
\CodelineIndex
\RecordChanges
\leftmargin=2in
\begin{document}
  \DocInput{grpslua.dtx}
  \PrintChanges
  \PrintIndex
\end{document}
%</driver>
% \fi
%
% \CheckSum{1230}
%
% \CharacterTable
%  {Upper-case    \A\B\C\D\E\F\G\H\I\J\K\L\M\N\O\P\Q\R\S\T\U\V\W\X\Y\Z
%   Lower-case    \a\b\c\d\e\f\g\h\i\j\k\l\m\n\o\p\q\r\s\t\u\v\w\x\y\z
%   Digits        \0\1\2\3\4\5\6\7\8\9
%   Exclamation   \!     Double quote  \"     Hash (number) \#
%   Dollar        \$     Percent       \%     Ampersand     \&
%   Acute accent  \'     Left paren    \(     Right paren   \)
%   Asterisk      \*     Plus          \+     Comma         \,
%   Minus         \-     Point         \.     Solidus       \/
%   Colon         \:     Semicolon     \;     Less than     \<
%   Equals        \=     Greater than  \>     Question mark \?
%   Commercial at \@     Left bracket  \[     Backslash     \\
%   Right bracket \]     Circumflex    \^     Underscore    \_
%   Grave accent  \`     Left brace    \{     Vertical bar  \|
%   Right brace   \}     Tilde         \~}
%
%
% \changes{Version 0.1}{2024/12/19}{Converted to DTX file}
%
% \DoNotIndex{\newcommand,\newenvironment}
%
% \providecommand*{\url}{\texttt}
% \GetFileInfo{../grpslua.dtx}
% \title{The \textsf{../grpslua} package}
% \author{Marc Heijn \\ \url{marc@heijn-buis.demon.nl}}
% \date{\fileversion~from \filedate}
%
% \maketitle
%
% \tableofcontents
%
% \section{Introduction}
%
% Put text here.
%
% \section{Usage}
%
% Put text here.
% \iffalse
%
% \fi
% \StopEventually{}
%
% \section{Implementation}
%
% \iffalse
%<*package>
% \fi
%
%    \begin{macrocode}
\NeedsTeXFormat{LaTeX2e}[1999/12/01]
\ProvidesPackage{grpslua} [2024/10/05 v0.1 Coupling of Gramps to LuaLaTeX]
%    \end{macrocode}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Lua
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    \begin{macrocode}
\RequirePackage{luacode}
\RequirePackage{luapackageloader}
%    \end{macrocode}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% common
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    \begin{macrocode}
\RequirePackage{multicol}
\RequirePackage[top=1in, bottom=1.25in, left=1.0in, right=1.0in]{geometry}
\RequirePackage{babel}
\RequirePackage{ifthen}
\RequirePackage{mfirstuc}
\RequirePackage{xkeyval}
\RequirePackage{xstring}
%    \end{macrocode}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Indexing. We do not want this together with LTXDOC.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    \begin{macrocode}
\ifcsname DocInclude\endcsname\relax\else
\usepackage{imakeidx}
\makeindex[columns=2, title=Alphabetical Index, intoc]
\fi
%    \end{macrocode}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Fonts en pdf
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    \begin{macrocode}
\RequirePackage{fontawesome5}
\RequirePackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    citecolor=red,
    filecolor=magenta,
    urlcolor=cyan,
    pdftitle={},
    }
%    \end{macrocode}
%
% \begin{macro}{\sethypertarget}
%% \marg{link}\marg{txt}
%% When hypertarget is already set use hyperlink.
%    \begin{macrocode}
\newcommand\sethypertarget[2]{%
\ifcsname HT@#1\endcsname%
\hyperlink{#1}{#2}%
\else%
\hypertarget{#1}{\textcolor{blue!70!black}{#2}}%
\expandafter\def\csname HT@#1\endcsname{}% Create a definition
\fi%
}%
%    \end{macrocode}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Packages for images
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    \begin{macrocode}
\RequirePackage{tikz}
\RequirePackage{calc}
\RequirePackage{graphicx}
\RequirePackage{fancyref}
\RequirePackage[tikz]{ocgx2}
\RequirePackage[all]{genealogytree}
%    \end{macrocode}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  \subsection{Images}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    \begin{macrocode}
 \newenvironment{Figure}{\nopagebreak[4]}{\par}%
 \tikzset{%
	tagbox/.style = {red,thick,solid},%
	tagtext/.style = {black,thick,solid,rounded corners,fill=white},%
	tagnumber/.style={yellow, font=\bf, fill=blue}
}%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\grpsMedium}
%%
%% \marg{medium\_handle}
%%
%    \begin{macrocode}
\def\grpsMedium#1{%
\directlua{%
	%grps.test()
	grps.picture('\luaescapestring{#1}')
}}%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\grpsAllMedia}
%%
%% Print all images
%%
%    \begin{macrocode}
\def\grpsAllMedia{%
\directlua{%
	grps.allmedia( )
}}%
%    \end{macrocode}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  \subsection{People and Gramps}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%    \begin{macrocode}
 \newcommand\loadgramps{%
	\directlua{if not grps then grps = require("gramps") end }}%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\grampsdatabase}
%% \marg{database name}
%    \begin{macrocode}
\newcommand{\grampsdatabase}[1]{%
    \loadgramps%
    \directlua{grps.setdatabase('\luaescapestring{#1}')}
}%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\fullname}
%%
%% \marg{person\_handle or person\_id}
%% \cmd{\fullname}\{I0018\} = \fullname{I0018}
%    \begin{macrocode}
\newcommand\fullname[1]{%
  \loadgramps
	\directlua{tex.print(grps.fullname('\luaescapestring{#1}'))}%
	}%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\grpsPersdon}
%% \marg{person\_handle or person\_id}
%    \begin{macrocode}
\def\grpsPersdon#1{%
\directlua{%
	grps.person('\luaescapestring{#1}')
}}%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\grpsAllPeople}
%%%%%%%
%    \begin{macrocode}
\def\grpsAllPeople{%
\noindent
\directlua{%
%    \end{macrocode}
%	local i=1
%    \begin{macrocode}
	for h,p in pairs(grps.allperson())do
%		i=i+1
%        if i>20 then break end
%
        tex.print("\\makebox[0.1\\textwidth][l]{"..p.gramps_id .."}")
%    \end{macrocode}
%        tex.print("\\makebox[0.4\\textwidth][l]{"..h['handle'] .."}")
%    \begin{macrocode}
        tex.print("\\makebox[0.28\\textwidth][l]{"..p.given_name .."}")
        tex.print("\\makebox[0.21\\textwidth][l]{"..p.surname .."}")
        if p.birth and p.birth[3] then
			tex.print("\\makebox[0.1\\textwidth][l]{"..p.birth[3].."}")
		elseif p.baptism and p.baptism[3] then
			tex.print("\\makebox[0.1\\textwidth][l]{"..p.baptism[3].."}")
		else
			tex.print("\\makebox[0.1\\textwidth][l]{--}")
		end
		if p.death and p.death[3] then
			tex.print("\\makebox[0.1\\textwidth][l]{"..p.death[3].."}")
		elseif p.burial and p.burial[3] then
			tex.print("\\makebox[0.1\\textwidth][l]{"..p.burial[3].."}")
		else
			tex.print("\\makebox[0.1\\textwidth][l]{--}")
		end
        tex.print("\\\\")
    end
}}%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\grpsFirstPerson}
%%\marg{person\_handle or person\_id}
%% \cmd{\grpsFirstPerson}\{I0018\} =\\
%% \setkeys{grpskeys}{short}\grpsFirstPerson{I0018}
%    \begin{macrocode}
\newcommand{\grpsFirstPerson}[1]{%
  \loadgramps
  \directlua{%
	if grps.shortformat then
		grps.short_print_person('\luaescapestring{#1}',grps.gendepth)
	else
		grps.long_print_person('\luaescapestring{#1}',grps.gendepth)
	end
}%
}
%    \end{macrocode}
% \end{macro}
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% \subsection{Lists}
%    \begin{macrocode}
 %%
%    \end{macrocode}
%
% \begin{environment}{grampslisti}
%    \begin{macrocode}
\newenvironment{grampslisti}{%
\begin{list}{}%
{%
    \renewcommand{\makelabel}[1]{\bf\it\makebox{##1}}
    \setlength{\itemindent}{5ex}%
    \setlength{\leftmargin}{0pt}%
      \setlength{\labelwidth}{7ex}%
      \addtolength{\topsep}{-0.5\parskip}%
      %\listparindent \normalparindent
      \setlength{\parsep}{\parskip}%
    \setlength{\labelsep}{0pt}%
    \setlength{\itemsep}{0pt}%
    \setlength{\leftmargin}{2ex}%
    \setlength{\rightmargin}{0pt}%
    }%
}{\end{list}}
%    \end{macrocode}
% \end{environment}
%
%
% \begin{environment}{grampslistii}
%    \begin{macrocode}
\newenvironment{grampslistii}{%
\begin{list}{}%
{%
    \renewcommand{\makelabel}[1]{\bf\it\makebox{##1}}
    \setlength{\itemindent}{5ex}%
    \setlength{\leftmargin}{0pt}%
      \setlength{\labelwidth}{7ex}%
      \addtolength{\topsep}{-0.5\parskip}%
      %\listparindent \normalparindent
      \setlength{\parsep}{\parskip}%
    \setlength{\labelsep}{0pt}%
    \setlength{\itemsep}{0pt}%
    \setlength{\leftmargin}{5ex}%
    \setlength{\rightmargin}{0pt}%
    }%
    \small
}{\end{list}}
%    \end{macrocode}
% \end{environment}
%
%
% \begin{environment}{grampslisti}
%    \begin{macrocode}
\renewenvironment{grampslisti}%
{\begin{list}{}{%
  \renewcommand{\makelabel}[1]{\bf\makebox{##1}}%
  }}%
{\end{list}}
%    \end{macrocode}
% \end{environment}
%
%
% \begin{environment}{grampslistii}
%    \begin{macrocode}
\renewenvironment{grampslistii}%
{\begin{list}{}{%
%    \end{macrocode}
%  \renewcommand{\makelabel}[1]{\bf\makebox{\romannum{##1}}}%
%    \begin{macrocode}
  \renewcommand{\makelabel}[1]{\bf\makebox{\makeromannumber{##1}\relax}}%
  }\small}
{\end{list}}
%    \end{macrocode}
% \end{environment}
%
%
% \begin{environment}{grampslistiii}
%    \begin{macrocode}
\newenvironment{grampslistiii}
{\begin{list}{}{%
  \renewcommand{\makelabel}[1]{\makebox{\makealphanumber{##1}\relax}}%
  }\footnotesize}
{\end{list}}
%    \end{macrocode}
% \end{environment}
%
%
% \begin{environment}{grampslistiiii}
%    \begin{macrocode}
\newenvironment{grampslistiiii}{\begin{list}{}{%
  \renewcommand{\makelabel}[1]{\makebox{\makeromannumber{##1}\relax}}}\footnotesize}{\end{list}}
%    \end{macrocode}
% \end{environment}
%
%
% \begin{environment}{grampslistiiiii}
%    \begin{macrocode}
\newenvironment{grampslistiiiii}{\begin{list}{}{%
  \renewcommand{\makelabel}[1]{\bf\makebox{##1}}%
  }\small}{\end{list}}
%    \end{macrocode}
% \end{environment}
%
%
% \begin{environment}{grampslistiiiiii}
%    \begin{macrocode}
\newenvironment{grampslistiiiiii}{\begin{list}{}{%
  \renewcommand{\makelabel}[1]{\bf\makebox{##1}}%
  }\footnotesize}{\end{list}}
%    \end{macrocode}
% \end{environment}
%
%
% \begin{environment}{grampslistiiiiiii}
%    \begin{macrocode}
\newenvironment{grampslistiiiiiii}{\begin{list}{}{%
  \renewcommand{\makelabel}[1]{\bf\makebox{##1}}%
  }\footnotesize}{\end{list}}
%    \end{macrocode}
% \end{environment}
%
%
% \begin{environment}{grampslistiiiiiiii}
%    \begin{macrocode}
\newenvironment{grampslistiiiiiiii}{\begin{list}{}{%
  \renewcommand{\makelabel}[1]{\bf\makebox{##1}}%
  }\tiny}{\end{list}}
%    \end{macrocode}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%\subsection{Utils}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    \begin{macrocode}
 %%
%    \end{macrocode}
% \end{environment}
%
%
% \begin{macro}{\modulo}
%% \marg{value}{modulo}
%    \begin{macrocode}
\def\modulo#1#2{\number\numexpr\moduloop{#1}{#2}\relax}
%    \end{macrocode}
% \end{macro}
%
%    \begin{macrocode}
 \def\truncdiv#1#2{((#1-(#2-1)/2)/#2)}
 \def\moduloop#1#2{(#1-\truncdiv{#1}{#2}*#2)}
%    \end{macrocode}
%
% \begin{macro}{\makeromannumber}
%    \begin{macrocode}
\newcommand{\makeromannumber}[1]{\setcounter{result}{0}%
\addtocounter{result}{#1}%
\roman{result}\relax%
}
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\makealphanumber}
%    \begin{macrocode}
\newcommand{\makealphanumber}[1]{\setcounter{result}{0}%
\addtocounter{result}{#1}%
\alph{result}\relax%
}
%    \end{macrocode}
% \end{macro}
%
%% \subsection{Ifs}
%
%    \begin{macrocode}
\newif\if@shortperson
\@shortpersonfalse
\newif\if@parttree%
\@parttreefalse%
%    \end{macrocode}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  \paragraph{Column and list handling}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    \begin{macrocode}
\newif\if@listmode \@listmodefalse%
\newif\if@columnmode \@columnmodefalse%
%    \end{macrocode}
%
% \begin{macro}{\startmulticolumn}
%    \begin{macrocode}
\newcommand{\startmulticolumn}{%
    \if@columnmode\relax\else\begin{multicols}{\grpscolumns}\@columnmodetrue\fi%
}%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\startlist}
%    \begin{macrocode}
\newcommand{\startlist}{%
    \if@listmode\relax\else\begin{grampslisti}\@listmodetrue\fi%
}%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\stoplist}
%    \begin{macrocode}
\newcommand{\stoplist}{%
    \if@listmode\end{grampslisti}\@listmodefalse\fi%
}%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\stopmulticolumn}
%    \begin{macrocode}
\newcommand{\stopmulticolumn}{%
    \if@columnmode\end{multicols}\@columnmodefalse\fi%
}%
%    \end{macrocode}
%% \subsection{Counters}
%
%    \begin{macrocode}
\newcounter{Generation}
\newcounter{grpsNumber}
\newcounter{NewGeneration}
\newcounter{result}
%    \end{macrocode}
%% \subsection{Keys (grpskeys)}
%    \begin{macrocode}
 \def\stringtrue{true}
%    \end{macrocode}
%% \paragraph{long}
%    \begin{macrocode}
 \define@key{grpskeys}{long}[true]{\@shortpersonfalse\loadgramps%
    \directlua{grps.shortformat = false}}%
%    \end{macrocode}
%% \paragraph{short}
%    \begin{macrocode}
 \define@key{grpskeys}{short}[true]{\@shortpersontrue\loadgramps%
    \directlua{grps.shortformat = true}}%
%    \end{macrocode}
%% \paragraph{gen}
%    \begin{macrocode}
 \define@key{grpskeys}{gen}{\def\generations{#1}\loadgramps%
    \directlua{grps.generations = #1}}%
%    \end{macrocode}
%% \paragraph{depth}
%    \begin{macrocode}
 \define@key{grpskeys}{depth}{\loadgramps%
    \loadgramps\directlua{grps.gendepth = #1}}
%    \end{macrocode}
%% \paragraph{genpiece}
%    \begin{macrocode}
 \define@key{grpskeys}{genpiece}[4]{\def\generationpiece{#1}}%
%    \end{macrocode}
%% \paragraph{col}
%    \begin{macrocode}
 \define@key{grpskeys}{col}[2]{\def\grpscolumns{#1}}%
%    \end{macrocode}
% \paragraph{parttree}
%    \begin{macrocode}
 \define@key{grpskeys}{parttree}[true]{%
    \def\partialbool{#1}%
    \ifx\partialbool\stringtrue\@parttreetrue\else\@parttreefalse\fi%
    }%
%    \end{macrocode}
%% \subsection{Date}
%    \begin{macrocode}
 %%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\getshortdate}
%% \marg{yyyy-m-d}
%%\\ \cmd{\getshortdate}\{2024-11-1\}:
%%\\ default: \getshortdate{2024-11-1}
%%\\ dutch: \foreignlanguage{dutch}{\getshortdate{2024-11-1}}
%    \begin{macrocode}
\newcommand{\getshortdate}[1]{%
  \def\grpsDyear{}\def\grpsDmonth{}\def\grpsDday{}%
  \StrCut[1]{#1}{-}\grpsDyear\grpsDtemp%
  \StrCut[1]{\grpsDtemp}{-}\grpsDmonth\grpsDday%
  \iflanguage{dutch}{%
  \ifx\grpsDyear\empty{}\else%
  \ifx\grpsDmonth\empty{}\else%
  \ifx\grpsDday\empty{}\else%
  \grpsDday-\fi\grpsDmonth-\fi\grpsDyear\fi
  }{%
  \ifx\grpsDyear\empty{}\else%
  \ifx\grpsDmonth\empty{}\else\grpsDmonth-%
  \ifx\grpsDday\empty{}\else%
  \grpsDday-\fi\fi\grpsDyear\fi%
  }%
}
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\getlongdate}
%% \marg{yyyy-m-d}
%%\\ \cmd{\getlongdate}\{2024-11-1\}:
%%\\ default: \getlongdate{2024-11-1}
%%\\ dutch: \foreignlanguage{dutch}{\getlongdate{2024-11-1}}
%    \begin{macrocode}
\newcommand{\getlongdate}[1]{%
 \def\grpsDyear{}\def\grpsDmonth{}\def\grpsDday{}%
 \StrCut[1]{#1}{-}\grpsDyear\grpsDtemp%
 \StrCut[1]{\grpsDtemp}{-}\grpsDmonth\grpsDday%
 \iflanguage{dutch}{%
 \ifx\grpsDyear\empty{}\else%
 \ifx\grpsDmonth\empty{}\else%
 \ifx\grpsDday\empty{}\else%
 \grpsDday\,\fi\grpsTmonth{\grpsDmonth} \fi\grpsDyear\fi
 }{%
 \ifx\grpsDyear\empty{}\else%
 \ifx\grpsDmonth\empty{}\else\grpsTmonth{\grpsDmonth} %
 \ifx\grpsDday\empty{}\else%
 \grpsDday\ \fi\fi\grpsDyear\fi%
 }%
}
%    \end{macrocode}
% \end{macro}
%
%% \subsection{Event}
%    \begin{macrocode}
 %%
%    \end{macrocode}
%
% \begin{macro}{\grpsIresidence}
%% \grpsIresidence
%    \begin{macrocode}
\def\grpsIresidence{\small\faIcon{home}}%\ticon{home-outline}}
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\grpsIeducation}
%% \grpsIeducation
%    \begin{macrocode}
\def\grpsIeducation{\small\faIcon{graduation-cap}}
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\grpsIoccupation}
%% \grpsIoccupation
%    \begin{macrocode}
\def\grpsIoccupation{\faIcon{hammer}}
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\grpsEvent}
%%
%% \marg{1 type}
%% \marg{2 clader type}
%% \marg{3 modifier}
%% \marg{4 quality}
%% \marg{5 date1}
%% \marg{6 place1}\\
%% \marg{7 date2}
%% \marg{8 place2}
%% \marg{9 text}
%%\\
%% \cmd{grpsEvent}\{19\}\{0\}\{3\}\{0\}\{2024-11-22\}\{place\}\{\}\{\}\{text\}
%% \\short: \setkeys{grpskeys}{short} \grpsEvent{19}{0}{3}{0}{2024-11-22}{place}{}{}{text}
%% \\long: \setkeys{grpskeys}{long} \grpsEvent{19}{0}{3}{0}{2024-11-22}{place}{}{}{text}
%%
%    \begin{macrocode}
\newcommand{\grpsEvent}[9]{%
\if@shortperson%
\getshorteventtype{#1}%
\ifcase#3{}\or{$<$}\or{$>$}\or{$\sim$}\or{}\or{}\or{}\else{}\fi
\ifthenelse{#3 < 6}{%
\ifx&#5&\relax\else\,\getshortdate{#5}\fi%
\ifthenelse{#3 > 3}{\,-\,\ifx&#5&\relax\else\getshortdate{#7}\fi}{}%
\ifx&#6&\relax\else{:#6}\fi}%
{}%text only%
\else% Long text person
\getlongeventtype{#1} %
\ifcase#3{\grpsTop}\or{\grpsTvoor}\or{\grpsTna}\or{\grpsTrond}%
    \or{\grpsTvan}\or{\grpsTtussen}\or{}\else{}\fi%
\ifthenelse{#3 < 6}{%
\ifx&#5&{leeg}\else\getlongdate{#5}\fi%
\ifthenelse{#3 > 3}{ \grpsTtot\ifx&#7&\relax\else\getlongdate{#7}\fi}{}%
\ifx&#6&\relax\else\ \grpsTte\,#6\fi%
\typeout{#9}%
\ifx&#9&\relax\else\ (#9)\fi%
}%
{#9}%text only
\fi%
}
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\getshorteventtype}
%%% TYPE
%    \begin{macrocode}
\newcommand{\getshorteventtype}[1]{
\ifcase#1{CUSTOM}% = 0,
or{\gtrsymMarried}%    MARRIAGE = 1,
or{MARR\_SETTL}% = 2,
or{MARR\_LIC}% = 3,
or{MARR\_CONTR}% = 4,
or{MARR\_BANNS}% = 5,
or{\gtrsymEngaged}%    ENGAGEMENT = 6,
or{\gtrsymDivorced}%    DIVORCE = 7,
or{DIV\_FILING}% = 8,
or{ANNULMENT}% = 9,
%    \end{macrocode}
%\gtrsymPartnership%    MARR\_ALT = 10,
%    \begin{macrocode}
or{ADOPT}% = 11,
or{\gtrsymBorn}%    BIRTH = 12,
or{\gtrsymDied}%    DEATH = 13,
or{ADULT\_CHRISTEN}% = 14,
or{\gtrsymBaptized}%    BAPTISM = 15,
or{BAR\_MITZVAH}% = 16,
or{BAS\_MITZVAH}% = 17,
or{BLESS}% = 18,
or{\gtrsymBuried}%    BURIAL = 19,
or{CAUSE\_DEATH}% = 20,
or{CENSUS}% = 21,
or{CHRISTEN}% = 22,
or{CONFIRMATION}% = 23,
or{CREMATION}% = 24,
or{DEGREE}% = 25,
or{\grpsIeducation}%    EDUCATION = 26,
or{ELECTED}% = 27,
or{EMIGRATION}% = 28,
or{FIRST\_COMMUN}% = 29,
or{IMMIGRATION}% = 30,
or{GRADUATION}% = 31,
or{MED\_INFO}% = 32,
or{MILITARY\_SERV}% = 33,
or{NATURALIZATION}% = 34,
or{NOB\_TITLE}% = 35,
or{NUM\_MARRIAGES}% = 36,
or{\grpsIoccupation}%    OCCUPATION = 37,
or{ORDINATION}% = 38,
or{PROBATE}% = 39,
or{PROPERTY}% = 40,
or{RELIGION}% = 41,
or{\grpsIresidence}%    RESIDENCE = 42,
or{RETIREMENT}% = 43,
or{WILL}% = 44
\else{UNKNOWN}\fi%
}
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\getlongeventtype}
%    \begin{macrocode}
\newcommand{\getlongeventtype}[1]{
\ifcase#1{CUSTOM}% = 0,
\or{\grpsTtrouwde}%    MARRIAGE = 1,
\or{MARR\_SETTL}% = 2,
\or{MARR\_LIC}% = 3,
\or{MARR\_CONTR}% = 4,
\or{MARR\_BANNS}% = 5,
\or{\grpsTverloofde}% = 6,
\or{\grpsTscheidde}%    DIVORCE}% = 7,
\or{DIV\_FILING}% = 8,
\or{ANNULMENT}% = 9,
\or{MARR\_ALT}% = 10,
\or{ADOPT}% = 11,
\or{\grpsTgeboren}%    BIRTH}% = 12,
\or{\grpsToverleed}%    DEATH}% = 13,
\or{ADULT\_CHRISTEN}% = 14,
\or{\grpsTgedoopt}%    BAPTISM}% = 15,
\or{BAR\_MITZVAH}% = 16,
\or{BAS\_MITZVAH}% = 17,
\or{BLESS}% = 18,
\or{\grpsTbegraven}%    BURIAL}% = 19,
\or{CAUSE\_DEATH}% = 20,
\or{CENSUS}% = 21,
\or{CHRISTEN}% = 22,
\or{CONFIRMATION}% = 23,
\or{CREMATION}% = 24,
\or{DEGREE}% = 25,
\or{\grpsTopleiding}%    EDUCATION}% = 26,
\or{ELECTED}% = 27,
\or{EMIGRATION}% = 28,
\or{FIRST\_COMMUN}% = 29,
\or{IMMIGRATION}% = 30,
\or{GRADUATION}% = 31,
\or{MED\_INFO}% = 32,
\or{MILITARY\_SERV}% = 33,
\or{NATURALIZATION}% = 34,
\or{NOB\_TITLE}% = 35,
\or{NUM\_MARRIAGES}% = 36,
\or{\grpsTberoepis}%    OCCUPATION}% = 37,
\or{ORDINATION}% = 38,
\or{PROBATE}% = 39,
\or{PROPERTY}% = 40,
\or{RELIGION}% = 41,
\or{\grpsTwoonde}%    RESIDENCE}% = 42,
\or{RETIREMENT}% = 43,
\or{WILL}% = 44
\else{UNKNOWN}\fi
}
%    \end{macrocode}
% \end{macro}
%
% \subsection{Ancetsor} %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    \begin{macrocode}
 %%
%    \end{macrocode}
%
% \begin{macro}{\AncestorTree}
%% \marg{person\_handle or person\_id}
%% \marg{maximum gennerations}
%% \\ \cmd{\AncestorTree}\{I0018\}\{3\} =
%% \AncestorTree{I0018}{3}
%    \begin{macrocode}
\newcommand\AncestorTree[2]{
\typeout{Ancestortree of:  #1 #2 generations}%
\loadgramps%
\directlua{
    local id = "\luaescapestring{#1}"
    local max_gen = \luaescapestring{#2}
    filebase = 'data.'..id..'.kwartierstaat.'..max_gen
    local filename = kpse.find_file(filebase)
    if filename == nil then
        tex.print("\\typeout{create file "..filebase.."}")
        local file = io.open(filebase, "w")
        if file then
            file:write(grps.ancestor_tree_data(id,max_gen))
            file:close()
        else
            tex.print("\\typeout{Error: Could not open the file.}")
        end
    end
}%
\begin{tikzpicture}
\genealogytree[%
	template=database traditional,
	level size=1.2cm,
	node size=0.12\columnwidth,%2.2
	date format=yyyy,
	list separators={\par}{ }{}{},
]{input{data.#1.kwartierstaat.#2}}
\end{tikzpicture}
}
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\Kwartierstaat}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% \oarg{options}
%% \marg{person\_handle or person\_id}
%% \\ options: gen=2,depth=1,short/long
%% \\ \cmd{\Kwartierstaat}[short,gen=4,depth=2]\{I0018\}
%    \begin{macrocode}
\newcommand{\Kwartierstaat}[2][]{%
	\loadgramps%
	\typeout{Kwartierstaat van #2}%
	\setkeys{grpskeys}{gen=2,depth=1,short,col=2,#1}
	\directlua{grps.set('\luaescapestring{#2}',\luaescapestring{\generations})}%
	\setcounter{Generation}{1}%
	\setcounter{NewGeneration}{1}%
	\setcounter{grpsNumber}{1}%
%    \end{macrocode}
% Start the loop
%    \begin{macrocode}
    \@listmodefalse%
    \@columnmodefalse%
    \startmulticolumn%
    \edef\rest{10}% groter als 0
	\whiledo{ \( \numexpr\value{Generation} - 1 < \generations \) \and \( \rest > 0 \) }{%
		\ifthenelse{\value{NewGeneration} = \value{grpsNumber}}{%
			\stoplist
			\multiply\c@NewGeneration by 2%
			\typeout{Generation \arabic{Generation}  number: \arabic{grpsNumber} -- \arabic{NewGeneration}}%
			\subsection*{\grpsTvoorouder{\arabic{Generation}}}
			\addcontentsline{toc}{subsection}{\grpsTvoorouder{\arabic{Generation}}}
			\startlist
		 }{}%
		 \directlua{%
		 h,rest = grps.get(\arabic{grpsNumber})
		 tex.print("\\edef\\handle{"..h.."}")
		 tex.print("\\edef\\rest{"..rest.."}")
		 }%
		 %\edef\handle{\directlua{tex.print(grps.get(\arabic{grpsNumber}))}}%
		 \typeout{handle=\handle, rest=\rest}%
		 \ifx\handle\empty{}\else%
		\item[\arabic{grpsNumber}]
		\grpsFirstPerson{\handle}%
		\fi%
		\stepcounter{grpsNumber}%
		\ifthenelse{\value{NewGeneration} = \value{grpsNumber}}{\stepcounter{Generation}}{}%
	}%
	\stoplist%
	\stopmulticolumn%
	}
%    \end{macrocode}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% \subsection{Descendence}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    \begin{macrocode}
 %%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\Descendence}
%% \oarg{options}
%% \marg{person\_handle or person\_id}
%% \\ options: gen=2,depth=1,short/long, col=2
%% \\ \cmd{\Descendence}[short,gen=4,depth=2,col=2]\{I0018\}
%    \begin{macrocode}
\newcommand{\Descendence}[2][]{%
    \loadgramps%
    \typeout{Nageslacht van #2}%
    \setkeys{grpskeys}{gen=2,depth=1,col=2,short,#1}
    \directlua{%
      grps.set_descendence('\luaescapestring{#2}',\luaescapestring{\generations},true)}%
    \setcounter{Generation}{1}%
    \setcounter{NewGeneration}{1}%
    \setcounter{grpsNumber}{1}%
    \@listmodefalse%
    \@columnmodefalse%
%    \end{macrocode}
%   Start the loop
%    \begin{macrocode}
    \startmulticolumn%
    \whiledo{ \numexpr\value{Generation} - 1 < \generations }{%
        \typeout{printing \arabic{grpsNumber}}%
        \directlua{
                local ghi = grps.get_descendent(\arabic{grpsNumber})
                tex.print("\\setcounter{Generation}{"..ghi[1].."}")
                tex.print("\\gdef\\handle{"..ghi[2].."}")
                tex.print("\\gdef\\itemindex{"..ghi[3].."}")
                tex.print("\\gdef\\grampsid{"..ghi[4].."}")
            }%
        \ifthenelse{\numexpr\value{Generation} -1 < \generations}{%
            \ifthenelse{\value{NewGeneration} = \value{Generation}}{%
                \subsection*{Generatie \arabic{Generation}}
                \addcontentsline{toc}{subsection}{Generation \arabic{Generation}}
                \stepcounter{NewGeneration}}{}%
        \startlist
        \item[\itemindex] \grpsFirstPerson{\handle}%
        \stoplist
        }{}
        \stepcounter{grpsNumber}%
    }%
    \stoplist%
    \stopmulticolumn%
    }
%    \end{macrocode}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    \subsection{Descendence text per branche}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    \begin{macrocode}
 %%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\Descendenceb}
%% \oarg{options}
%% \marg{person\_handle or person\_id}
%% \\ options: gen=2,depth=1,short/long, col=2
%% \\ \cmd{\Descendenceb}[short,gen=4,depth=2,col=2,genpiece=3]\{I0018\}
%    \begin{macrocode}
\newcommand{\Descendenceb}[2][]{%
    \loadgramps%
    \typeout{Nageslacht van #2}%
    \setkeys{grpskeys}{gen=2,depth=1,col=2,genpiece=3,short,#1}
    \directlua{grps.set_descendence('\luaescapestring{#2}',\luaescapestring{\generations},false)}%
    \setcounter{Generation}{1}%
    \setcounter{NewGeneration}{1}%
    \setcounter{grpsNumber}{1}%
    \@listmodefalse%
    \@columnmodefalse%
    \startmulticolumn
%    \end{macrocode}
%   Start the loop
%    \begin{macrocode}
    \whiledo{ \numexpr\value{Generation} - 1 < \generations }{%
        \directlua{
                local ghi = grps.get_descendent(\arabic{grpsNumber})
                tex.print("\\setcounter{Generation}{"..ghi[1].."}")
                tex.print("\\gdef\\handle{"..ghi[2].."}")
                tex.print("\\gdef\\itemindex{"..ghi[3].."}")
                tex.print("\\gdef\\grampsid{"..ghi[4].."}")
            }%
        \ifthenelse{\numexpr\value{Generation} -1 < \generations}{%
            \edef\modGeneration{\modulo{\arabic{Generation}}{\generationpiece}}% Generations Modulo Piece
            \typeout{modgeneration = \modGeneration, \arabic{Generation}}%
            \ifthenelse{\modGeneration = 1}{%
                \stoplist%
                \stopmulticolumn%
                \begin{center}
                \pgfmathtruncatemacro{\result}{\generationpiece +1}%
                \DescendentTree[parttree=true]{\grampsid}{\result}%
                \end{center}
            }{\typeout{modGeneration != 1}}%
        \startmulticolumn
        \startlist
        \item[\itemindex] \grpsFirstPerson{\handle}%
        }{}
        \stepcounter{grpsNumber}%
    }%
    \stoplist%
    \stopmulticolumn%
    }
%    \end{macrocode}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%    \paragraph{Descendent Tree}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    \begin{macrocode}
 %%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\Descendenceall}
%% \oarg{options}
%% \marg{person\_handle or person\_id}
%% \\ options: gen=2,depth=1,short/long, col=2
%% \\ \cmd{\Descendenceall}[short,gen=4,depth=2,col=2,genpiece=3]\{I0018\}
%    \begin{macrocode}
\newcommand{\Descendenceall}[2][]{%
    \loadgramps%
    \typeout{Nageslacht van #2}%
    \setkeys{grpskeys}{gen=2,depth=1,short,genpiece=2,col=2,#1}
    \directlua{%
		grps.set_descendence('\luaescapestring{#2}',\luaescapestring{\generations})}%
    \setcounter{Generation}{1}%
    \setcounter{NewGeneration}{1}%
    \setcounter{grpsNumber}{1}%
    \startmulticolumn
%    \end{macrocode}
%   Start the loop
%    \begin{macrocode}
    \whiledo{ \numexpr\value{Generation} - 1 < \generations }{%
        \directlua{
                local ghi = grps.get_descendent(\arabic{grpsNumber})
                tex.print("\\setcounter{Generation}{"..ghi[1].."}")
                tex.print("\\gdef\\handle{"..ghi[2].."}")
                tex.print("\\gdef\\itemindex{"..ghi[3].."}")
                tex.print("\\gdef\\grampsid{"..ghi[4].."}")
            }%
        \typeout{gerneration=\arabic{Generation}, \itemindex - \grampsid (\handle)}
        \ifthenelse{\numexpr\value{Generation} -1 < \generations}{%
            \edef\modGeneration{\modulo{\arabic{Generation}}{\generationpiece}}% Generations Modulo Piece
            \typeout{modgeneration = \modGeneration, \arabic{Generation}}%
            \ifthenelse{\value{NewGeneration} = \value{Generation}}{% NEXT GENERATION
                \subsection*{Generatie \arabic{Generation}}
                \addcontentsline{toc}{subsection}{Generation \arabic{Generation}}
                \stepcounter{NewGeneration}}{}%
            \ifthenelse{\modGeneration = 1}{%
                \stoplist%
                \stopmulticolumn%
                \begin{center}
                \pgfmathtruncatemacro{\result}{\generationpiece +1}%
                \DescendentTree[parttree=true]{\grampsid}{\result}%
                \end{center}
            }{\typeout{modGeneration != 1}}%
        }{}%
        \startmulticolumn%
        \startlist%
        \item[\itemindex] %\arabic{grpsNumber}. \itemindex-\grampsid %, generation=\arabic{Generation}
        \grpsFirstPerson{\handle}%
        \stepcounter{grpsNumber}%
    }%
    \stoplist%
    \stopmulticolumn%
    }%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\DescendentTree}
%%%%%%%%%%%%%%%%%%%%%%%%%% \subsection{Descendent Tree} %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%    \begin{macrocode}
\newcommand\DescendentTree[3][]{
\loadgramps%
\typeout{#1,#2,#3}
\setkeys{grpskeys}{parttree=true,#1}
\directlua{
    local id = "\luaescapestring{#2}"
    local max_gen = \luaescapestring{#3}
    local command = "\\DescendentTree{"..id.."}{"..max_gen.."}"
    filebase = 'data.'..id..'.descendent.'..max_gen
 %%    io.write("\string\n In "..command.." gebruikt "..filebase)
    local filename = kpse.find_file(filebase)
 %%    if filename == nil then
        io.write("\string\n In "..command.." creating "..filebase)
        local file = io.open(filebase, "w")
        if file then
            file:write(grps.descendent_tree_data(id,max_gen))
            file:close()
            filename=filebase
        else
            io.write("\string\n In "..command.." ERROR "..filename.." not OPENED")
            tex.print("Error: Could not open the file.")
        end
%    \end{macrocode}
%    end
%    \begin{macrocode}
    io.write("\string\n In "..command.." using "..filename)
}
%    \end{macrocode}
% \end{macro}
%
%    \begin{macrocode}
\if@parttree
\typeout{parttree true}
\tikzset{%
    /gtr/haschildren/.style={name code  ={\hypertarget{CHILD\gtr@gkv@id}{}\hyperlink{STAM\gtr@gkv@id}{\gtrPrintName@full $\rightarrow$}}},
    /gtr/hasparents/.style={name code  ={\hypertarget{STAM\gtr@gkv@id}{}\hyperlink{CHILD\gtr@gkv@id}{$\leftarrow$\gtrPrintName@full}}},
    }%
\else
\typeout{parttree false}
\tikzset{%
    /gtr/haschildren/.style={name code  ={\gtrPrintName@full}},%
    /gtr/hasparents/.style={name code  ={\gtrPrintName@full}},%
    }%
\fi
\begin{tikzpicture}
\genealogytree[%
    template=database traditional,
    level size=0.18\columnwidth,
    level distance = 7mm,
    node size=6mm,%2.2
    child distance=-1.5mm,
    parent distance=-2.5mm,
    date format=yyyy,
    timeflow=right,
    list separators={\newline}{ }{}{},
    name font=\gtrifmale{\selectfont\color{blue!50!black}}{\selectfont\color{red!50!black}},
    name code  ={\hyperlink{\gtr@gkv@id}{\gtrPrintName@full}},
    childless/.style={
        family={
            edges={foreground={red!20!black,line width=0.1mm},xshift=-1mm},
            },
        },
]{input{data.#2.descendent.#3}}
\end{tikzpicture}
}
%    \end{macrocode}
%% \subsection{Languages}
%% \paragraph{English}
%%
%%
%    \begin{macrocode}
 \def\grpsThij{he }%
 \def\grpsTHij{He }%
 \def\grpsTzij{she }%
 \def\grpsTZij{She }%
 \def\grpsTis{is }%
 \def\grpsTmet{with }%
 \def\grpsTen{and }%
 \def\grpsTZoon{Son of }%
 \def\grpsTDochter{Daughter of }%
%    \end{macrocode}
%% used in events
%    \begin{macrocode}
 \def\grpsTop{at }
 \def\grpsTvoor{before }
 \def\grpsTna{after }
 \def\grpsTrond{about }
 \def\grpsTvan{from }
 \def\grpsTtussen{between }
 \def\grpsTtrouwde{married }
 \def\grpsTscheidde{divorced }
 \def\grpsTverloofde{engaged }
 \def\grpsTkoppelde{connected }
 \def\grpsTgeboren{is born }
 \def\grpsToverleed{died }
 \def\grpsTbegraven{is buried}
 \def\grpsTgedoopt{is baptiezed }
 \def\grpsTwoonde{lived }
 \def\grpsTte{in }
 \def\grpsTtot{til}
 \def\grpsTberoepis{occupation is }
 \def\grpsTopleiding{is educationed }
 \newcommand{\grpsTmonth}[1]{%
  \ifcase#1
    \or January\or February\or March\or April\or May\or June%
    \or July\or August\or September\or October\or November\or December%
  \else
    Invalid month number
  \fi}%
 \def\grpsTkwartierstaatvan#1{Ancestors of #1}%
 \def\grpsTdescendenceof#1{Descendence of #1}%
 \def\grpsTvoorouder#1{Generation #1}%
%    \end{macrocode}
%%
%% \paragraph{Dutch}
%%
%    \begin{macrocode}
 \iflanguage{dutch}{%
 \def\grpsThij{hij }%
 \def\grpsTHij{Hij }%
 \def\grpsTzij{zij }%
 \def\grpsTZij{Zij }%
 \def\grpsTmet{met }%
 \def\grpsTen{en }%
 \def\grpsTZoon{Zoon van }%
 \def\grpsTDochter{Dochter van }%
%    \end{macrocode}
%% used in events
%    \begin{macrocode}
 \def\grpsTop{op }
 \def\grpsTvoor{voor }
 \def\grpsTna{na }
 \def\grpsTrond{rond }
 \def\grpsTvan{van }
 \def\grpsTtot{tot }
 \def\grpsTtussen{tussen }
 \def\grpsTtrouwde{trouwde }
 \def\grpsTscheidde{scheidde }
 \def\grpsTkoppelde{koppelde }
 \def\grpsTverloofde{verloofde }
 \def\grpsTgeboren{is geboren }
 \def\grpsToverleed{is overleed }
 \def\grpsTbegraven{is begraven }
 \def\grpsTgedoopt{is gedoopt }
 \def\grpsTwoonde{woonde }
 \def\grpsTte{in }
 \def\grpsTberoepis{beroep is }
 \def\grpsTopleiding{is opgeleid }
 \renewcommand{\grpsTmonth}[1]{%
  \ifcase#1
    \or januarie\or februarie\or maart\or april\or mei\or juni%
    \or juli\or augustus\or september\or oktober\or november\or december%
  \else
    incorrect maand numbmer
  \fi}%
 \def\grpsTkwartierstaatvan#1{Kwartierstaat van #1}
 \def\grpsTdescendenceof#1{Afstammelingen van #1}%
 \renewcommand\grpsTvoorouder[1]{%
  \ifcase#1%
    \or Kwartierdrager%
        \or Ouders \or Grootouders \or Overgrootouders \or Betovergrootouders%
        \or Oudouders \or Oudgrootouders\or Oudovergrootouders \or Oudbetovergrootouders%
%    \end{macrocode}
%    \begin{macrocode}
        \or Stamouders \or Stamgrootouders \or Stamovergrootouders \or Stambetovergrootouders%
        \or Stamoudouders \or Stamoudgrootouders\or Stamoudovergrootouders \or Stamoudbetovergrootouders%%
%    \end{macrocode}
%    \begin{macrocode}
        \or Edelouders \or Edelgrootouders \or Edelovergrootouders \or Edelbetovergrootouders%
        \or Edeloudouders \or Edeloudgrootouders\or Edeloudovergrootouders \or Edeloudbetovergrootouders%%
%    \end{macrocode}
%    \begin{macrocode}
        \or Edelstamouders \or Edelstamgrootouders \or Edelstamovergrootouders \or Edelstambetovergrootouders%
        \or Edelstamoudouders \or Edelstamoudgrootouders\or Edelstamoudovergrootouders \or Edelstamoudbetovergrootouders%%
%    \end{macrocode}
%    \begin{macrocode}
        \or Voorouders \or Voorgrootouders \or Voorovergrootouders \or Voorbetovergrootouders%
        \or Vooroudouders \or Vooroudgrootouders\or Vooroudovergrootouders \or Vooroudbetovergrootouders%%
%    \end{macrocode}
%    \begin{macrocode}
        \or Voorstamouders \or Voorstamgrootouders \or Voorstamovergrootouders \or Voorstambetovergrootouders%
        \or Voorstamoudouders \or Voorstamoudgrootouders\or Voorstamoudovergrootouders \or Voorstamoudbetovergrootouders%%
%    \end{macrocode}
%    \begin{macrocode}
        \or Vooredelouders \or Vooredelgrootouders \or Vooredelovergrootouders \or Vooredelbetovergrootouders%
        \or Vooredeloudouders \or Vooredeloudgrootouders\or Vooredeloudovergrootouders \or Vooredeloudbetovergrootouders%%
%    \end{macrocode}
%    \begin{macrocode}
        \or Vooredelstamouders \or Vooredelstamgrootouders \or Vooredelstamovergrootouders \or Vooredelstambetovergrootouders%
        \or Vooredelstamoudouders \or Vooredelstamoudgrootouders\or Vooredelstamoudovergrootouders \or Vooredelstamoudbetovergrootouders%%
  \else%
    Generatie #1%
  \fi}%
 }{}%
%    \end{macrocode}

%
% \iffalse
%</package>
% \fi
%
% \printindex
%
% \iffalse
%<*database>
PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE person (handle VARCHAR(50) PRIMARY KEY NOT NULL, given_name TEXT, surname TEXT, blob_data BLOB, gramps_id TEXT, gender INTEGER, death_ref_index INTEGER, birth_ref_index INTEGER, change INTEGER, private INTEGER);
INSERT INTO person VALUES('fc22016ea38fb2815a62c132bd','Anna','Hansdotter',X'800328581a000000666332323031366561333866623238313561363263313332626471005805000000493030303071014b0028895d71025d71034e5804000000416e6e6171045d710528580a00000048616e73646f74746572710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656134643131363135353236383637393438633771104b01680786711174711228895d71135d7114581b00000066633232303136656137623362636432636563643565366332613471154b016807867116747117655d7118581b0000006663323230313665613834316634663966373735646163313861617119615d711a5d711b5d711c5d711d5d711e5d711f5d71205d71214a4e0a6b475d7122895d71237471242e','I0000',0,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016eabe2fbe08034b3cd1e3','Keith Lloyd','Smith',X'800328581b00000066633232303136656162653266626530383033346233636431653371005805000000493030303171014b0128895d71025d71034e580b0000004b65697468204c6c6f796471045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581b00000066633232303136656163373264373732323163616230613335613071104b016807867111747112615d71135d7114581b0000006663323230313665616432346661623236616138613230353466627115615d71165d71175d71185d71195d711a5d711b5d711c4a4e0a6b475d711d895d711e74711f2e','I0001',1,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016eadf4fd9bcbbc79d57bb','Hans Peter','Smith',X'800328581b00000066633232303136656164663466643962636262633739643537626271005805000000493030313071014b0128895d71025d71034e580a00000048616e7320506574657271045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581a000000666332323031366561653063333161333134366134373535323271104b01680786711174711228895d71135d7114581b00000066633232303136656166623230643861393639336533333631363271154b016807867116747117655d711828581b0000006663323230313665623061363033346537653662396561613639377119581b000000666332323031366562306234626630356361643730663333633564711a655d711b581b000000666332323031366561383431663466396637373564616331386161711c615d711d5d711e5d711f5d71205d71215d71225d71234a4e0a6b475d7124895d71257471262e','I0010',1,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016eb12343be3d7e6c766b8','Hanna','Smith',X'800328581b00000066633232303136656231323334336265336437653663373636623871005805000000493030313171014b0028895d71025d71034e580500000048616e6e6171045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581b00000066633232303136656231343336386166666630653730343639303571104b016807867111747112615d71135d7114581a00000066633232303136656231643264666564363030613334313662367115615d71165d71175d71185d71195d711a5d711b5d711c4a4e0a6b475d711d895d711e74711f2e','I0011',0,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016eb2747b583e5d6eeae4b','Herman Julius','Nielsen',X'800328581b00000066633232303136656232373437623538336535643665656165346271005805000000493030313271014b0128895d71025d71034e580d0000004865726d616e204a756c69757371045d71052858070000004e69656c73656e710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656232393665663064636630396135653435636471104b01680786711174711228895d71135d7114581b00000066633232303136656233313136353031333063373032663539383971154b016807867116747117655d7118581b0000006663323230313665623336356237633936633236346534376335357119615d711a5d711b5d711c5d711d5d711e5d711f5d71205d71214a4e0a6b475d7122895d71237471242e','I0012',1,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016eb3c270f63324453b94a','Evelyn','Michaels',X'800328581b00000066633232303136656233633237306636333332343435336239346171005805000000493030313371014b0028895d71025d71034e58060000004576656c796e71045d71052858080000004d69636861656c73710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581b00000066633232303136656233643533646433343039643233306264396571104b016807867111747112615d7113581b0000006663323230313665623432353435613536623965323564333837627114615d71155d71165d71175d71185d71195d711a5d711b5d711c4a4e0a6b475d711d895d711e74711f2e','I0013',0,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016eb47173b0d8b363bcef0','Marjorie Lee','Smith',X'800328581b00000066633232303136656234373137336230643862333633626365663071005805000000493030313471014b0028895d71025d71034e580c0000004d61726a6f726965204c656571045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581b00000066633232303136656234393265636663343761303636326132313971104b016807867111747112615d71135d7114581b0000006663323230313665623531376464656264653130376361313736377115615d71165d71175d71185d71195d711a5d711b5d711c4a4e0a6b475d711d895d711e74711f2e','I0014',0,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016eb5a78e1080ae55066be','Gus','Smith',X'800328581b00000066633232303136656235613738653130383061653535303636626571005805000000493030313571014b0128895d71025d71034e580300000047757371045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656235633639653565323261326436323261666371104b01680786711174711228895d71135d7114581b00000066633232303136656236343539346439623438356237653463393871154b016807867116747117655d7118581b0000006663323230313665623432353435613536623965323564333837627119615d711a581b000000666332323031366561383431663466396637373564616331386161711b615d711c5d711d5d711e5d711f5d71205d71215d71224a4e0a6b475d7123895d71247471252e','I0015',1,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016eb7b2599c12b5441cd63','Jennifer','Anderson',X'800328581b00000066633232303136656237623235393963313262353434316364363371005805000000493030313671014b0028895d71025d71034e58080000004a656e6e6966657271045d7105285808000000416e646572736f6e710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656237653335633239633639333139663761323571104b01680786711174711228895d71135d7114581b00000066633232303136656238383735393932393430396665323761333571154b016807867116747117655d7118581b0000006663323230313665623062346266303563616437306633336335647119615d711a5d711b5d711c5d711d5d711e5d711f5d71205d71214a4e0a6b475d7122895d71237471242e','I0016',0,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016eba53c3cfdc109ae819e','Lillie Harriet','Jones',X'800328581b00000066633232303136656261353363336366646331303961653831396571005805000000493030313771014b0028895d71025d71034e580e0000004c696c6c6965204861727269657471045d71052858050000004a6f6e6573710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656261373432653631396661303164303437356571104b01680786711174711228895d71135d7114581b00000066633232303136656262303231363730353666363661613237343271154b016807867116747117655d7118581b0000006663323230313665623061363033346537653662396561613639377119615d711a5d711b5d711c5d711d5d711e5d711f5d71205d71214a4e0a6b475d7122895d71237471242e','I0017',0,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ebbb7945e7e3d11f6405','John Hjalmar','Smith',X'800328581b00000066633232303136656262623739343565376533643131663634303571005805000000493030313871014b0128895d71025d71034e580c0000004a6f686e20486a616c6d617271045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581b00000066633232303136656262633334353737376138663036623032343171104b016807867111747112615d7113581b0000006663323230313665626337333633646462323662343139653233667114615d7115581b0000006663323230313665623531376464656264653130376361313736377116615d71175d71185d71195d711a5d711b5d711c5d711d4a4e0a6b475d711e895d711f7471202e','I0018',1,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ebcd3201c745cc0e4d38','Eric Lloyd','Smith',X'800328581b00000066633232303136656263643332303163373435636330653464333871005805000000493030313971014b0128895d71025d71034e580a00000045726963204c6c6f796471045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d2828895d710e5d710f581b00000066633232303136656263663161636164323130393164343436643571104b01680786711174711228895d71135d7114581b00000066633232303136656264383533643963353430656239656537393971154b016807867116747117655d7118581b0000006663323230313665626466353162633265316236356662613535647119615d711a581b000000666332323031366561643234666162323661613861323035346662711b615d711c5d711d5d711e5d711f5d71205d71215d71224a4e0a6b475d7123895d71247471252e','I0019',1,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ebe5706f95dcbae27ac9','Amber Marie','Smith',X'800328581b00000066633232303136656265353730366639356463626165323761633971005805000000493030303271014b0028895d71025d71034e580b000000416d626572204d6172696571045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d2828895d710e5d710f581b00000066633232303136656265373563373736653663346439306439373671104b01680786711174711228895d71135d7114581b00000066633232303136656265663439353266306134313965643066393771154b016807867116747117655d71185d7119581b000000666332323031366562663634376565346232366163653332386232711a615d711b5d711c5d711d5d711e5d711f5d71205d71214a4e0a6b475d7122895d71237471242e','I0002',0,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ec007f1e0854e005e632','Carl Emil','Smith',X'800328581b00000066633232303136656330303766316530383534653030356536333271005805000000493030323071014b0128895d71025d71034e58090000004361726c20456d696c71045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656330313237343964356131373165343237386371104b01680786711174711228895d71135d7114581b00000066633232303136656330613538613965303234343332303164313971154b016807867116747117655d71185d7119581b000000666332323031366561383431663466396637373564616331386161711a615d711b5d711c5d711d5d711e5d711f5d71205d71214a4e0a6b475d7122895d71237471242e','I0020',1,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ec2011ec6c0b8c9298ce','Hjalmar','Smith',X'800328581b00000066633232303136656332303131656336633062386339323938636571005805000000493030323171014b0128895d71025d71034e5807000000486a616c6d617271045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656332323162633933393362373234646161333171104b01680786711174711228895d71135d7114581b00000066633232303136656332633730633263316337326336653234653771154b016807867116747117655d71185d7119581b000000666332323031366561383431663466396637373564616331386161711a615d711b5d711c5d711d5d711e5d711f5d71205d71214a4e0a6b475d7122895d71237471242e','I0021',1,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ec475856fbdef5725b5a','Martin','Smith',X'800328581b00000066633232303136656334373538353666626465663537323562356171005805000000493030323271014b0128895d71025d71034e58060000004d617274696e71045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656334393132666437616230316330376363303771104b01680786711174711228895d71135d7114581b00000066633232303136656335323530383866633533333638316133323971154b01680786711674711728895d71185d7119581a0000006663323230313665633631313261306363633931643463313661711a4b01680786711b74711c655d711d581b000000666332323031366563366536376436303937356264643530663036711e615d711f581a00000066633232303136656231643264666564363030613334313662367120615d71215d71225d71235d71245d71255d71265d7127581b0000006663323230313665636338323532363162373136393632646131347128614a4e0a6b475d7129895d712a74712b2e','I0022',1,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ecd25562e2b678fc50ae','Astrid Shermanna Augusta','Smith',X'800328581b00000066633232303136656364323535363265326236373866633530616571005805000000493030323371014b0028895d71025d71034e581800000041737472696420536865726d616e6e61204175677573746171045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656364353137623931643863646232333865303771104b01680786711174711228895d71135d7114581b00000066633232303136656365313537656135343033323832623439363071154b016807867116747117655d7118581b0000006663323230313665623336356237633936633236346534376335357119615d711a581b000000666332323031366561383431663466396637373564616331386161711b615d711c5d711d5d711e5d711f5d71205d71215d71224a4e0a6b475d7123895d71247471252e','I0023',0,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ecf368d1eda1f36f9a62','Gustaf','Smith',X'800328581b00000066633232303136656366333638643165646131663336663961363271005805000000493030323471014b0128895d71025d71034e580600000047757374616671045d7105285805000000536d697468710658000000007107884b016807867108680774710961580300000053722e710a68074b02680786710b68074b004b0068076807680774710c5d710d4b014b005d710e2828895d710f5d7110581b00000066633232303136656366353536626536333432356539366136656271114b01680786711274711328895d71145d7115581a000000666332323031366563666438373935653930333961613539373271164b01680786711774711828895d71195d711a581b000000666332323031366564303537366334393835643465356661306638711b4b01680786711c74711d28895d711e5d711f581b00000066633232303136656430643331306138666335373536373536373471204b016807867121747122655d7123581b0000006663323230313665613834316634663966373735646163313861617124615d7125581b0000006663323230313665633665363764363039373562646435306630367126615d71275d71285d71295d712a5d712b5d712c5d712d4a4e0a6b475d712e895d712f7471302e','I0024',1,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ed1f4a92b4312f1be5d5','Marta','Ericsdotter',X'800328581b00000066633232303136656431663461393262343331326631626535643571005805000000493030323571014b0028895d71025d71034e58050000004d6172746171045d710528580b0000004572696373646f74746572710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581b00000066633232303136656432313463363131343731353062336432623571104b016807867111747112615d7113581b0000006663323230313665643239376531666334653561303162653037647114615d71155d71165d71175d71185d71195d711a5d711b5d711c4a4e0a6b475d711d895d711e74711f2e','I0025',0,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ed2f7cb24dd32d97f0ae','Kirsti Marie','Smith',X'800328581b00000066633232303136656432663763623234646433326439376630616571005805000000493030323671014b0028895d71025d71034e580c0000004b6972737469204d6172696571045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656433313334623235366163303835656134346171104b01680786711174711228895d71135d7114581b00000066633232303136656433393236363435303239383136633465313671154b016807867116747117655d7118581a00000066633232303136656434356434376631323338306533656639647119615d711a581b000000666332323031366561383431663466396637373564616331386161711b615d711c5d711d5d711e5d711f5d71205d71215d71224a4e0a6b475d7123895d71247471252e','I0026',0,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ed4bd9a684451f99a83','Ingeman','Smith',X'800328581a000000666332323031366564346264396136383434353166393961383371005805000000493030323771014b0128895d71025d71034e5807000000496e67656d616e71045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581b00000066633232303136656434643564616465373265383939616631323671104b016807867111747112615d7113581b0000006663323230313665643239376531666334653561303162653037647114615d71155d71165d71175d71185d71195d711a5d711b5d711c4a4e0a6b475d711d895d711e74711f2e','I0027',1,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ed5a63f2befbb815323','Anna','Streiffert',X'800328581a000000666332323031366564356136336632626566626238313533323371005805000000493030323871014b0028895d71025d71034e5804000000416e6e6171045d710528580a00000053747265696666657274710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656435643137346133613838343763383536323871104b01680786711174711228895d71135d7114581b00000066633232303136656436353461313934393964613865356362303671154b016807867116747117655d7118581b0000006663323230313665643734373930616130623031396666343065667119615d711a5d711b5d711c5d711d5d711e5d711f5d71205d71214a4e0a6b475d7122895d71237471242e','I0028',0,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ed7c20bce57cf0cad8cb','Craig Peter','Smith',X'800328581b00000066633232303136656437633230626365353763663063616438636271005805000000493030323971014b0128895d71025d71034e580b000000437261696720506574657271045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d2828895d710e5d710f581b00000066633232303136656438313538316638636634663463366138336571104b01680786711174711228895d71135d7114581b00000066633232303136656439313137323832303834353861633936343971154b016807867116747117655d71185d7119581b000000666332323031366561643234666162323661613861323035346662711a615d711b5d711c5d711d5d711e5d711f5d71205d71214a4e0a6b475d7122895d71237471242e','I0029',1,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016eda01f9a4762f8431155','Magnes','Smith',X'800328581b00000066633232303136656461303166396134373632663834333131353571005805000000493030303371014b0128895d71025d71034e58060000004d61676e657371045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656461323338343965613033363330653631653771104b01680786711174711228895d71135d7114581b00000066633232303136656461613562326435663564316233313834313071154b016807867116747117655d7118581b0000006663323230313665643734373930616130623031396666343065667119615d711a581b000000666332323031366563366536376436303937356264643530663036711b615d711c5d711d5d711e5d711f5d71205d71215d71224a4e0a6b475d7123895d71247471252e','I0003',1,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016edbb4a728d27cd328104','Janice Ann','Adams',X'800328581b00000066633232303136656462623461373238643237636433323831303471005805000000493030333071014b0028895d71025d71034e580a0000004a616e69636520416e6e71045d71052858050000004164616d73710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d2828895d710e5d710f581b00000066633232303136656462643530396263613566653234643964313071104b01680786711174711228895d71135d7114581b00000066633232303136656463353461316638333030636630646338383871154b01680786711674711728895d71185d7119581a0000006663323230313665646338343537393230653366643064633565711a4b01680786711b74711c655d711d581b000000666332323031366562663634376565346232366163653332386232711e615d711f5d71205d71215d71225d71235d71245d71255d71264a4e0a6b475d7127895d71287471292e','I0030',0,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016edd25f5eb2b18875bc6c','Marjorie','Ohman',X'800328581b00000066633232303136656464323566356562326231383837356263366371005805000000493030333171014b0028895d71025d71034e58080000004d61726a6f72696571045d71052858050000004f686d616e710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656464343339303134343638366534306634306471104b01680786711174711228895d71135d7114581b00000066633232303136656464633735386161393438663166373535613771154b016807867116747117655d7118581b0000006663323230313665623531376464656264653130376361313736377119615d711a5d711b5d711c5d711d5d711e5d711f5d71205d71214a4e0a6b475d7122895d71237471242e','I0031',0,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016edea52f5e3272f07fbe','Darcy','Horne',X'800328581a000000666332323031366564656135326635653332373266303766626571005805000000493030333271014b0028895d71025d71034e5805000000446172637971045d7105285805000000486f726e65710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581b00000066633232303136656465633534633065663963306534663739353971104b016807867111747112615d7113581b0000006663323230313665626466353162633265316236356662613535647114615d71155d71165d71175d71185d71195d711a5d711b5d711c4a4e0a6b475d711d895d711e74711f2e','I0032',0,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016edf937520cbb28933950','Lloyd','Smith',X'800328581b00000066633232303136656466393337353230636262323839333339353071005805000000493030333371014b0128895d71025d71034e58050000004c6c6f796471045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581b00000066633232303136656466623438343861643665333565366336663771104b016807867111747112615d7113581b0000006663323230313665616432346661623236616138613230353466627114615d7115581b0000006663323230313665623061363033346537653662396561613639377116615d71175d71185d71195d711a5d711b5d711c5d711d4a4e0a6b475d711e895d711f7471202e','I0033',1,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ee0d54481979483e86d4','Alice Paula','Perkins',X'800328581b00000066633232303136656530643534343831393739343833653836643471005805000000493030333471014b0028895d71025d71034e580b000000416c696365205061756c6171045d71052858070000005065726b696e73710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581b00000066633232303136656531333465643233333266326135633432636571104b016807867111747112615d7113581b0000006663323230313665626337333633646462323662343139653233667114615d71155d71165d71175d71185d71195d711a5d711b5d711c4a4e0a6b475d711d895d711e74711f2e','I0034',0,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ee29bc251158922ba46','Lars Peter','Smith',X'800328581a000000666332323031366565323962633235313135383932326261343671005805000000493030333571014b0128895d71025d71034e580a0000004c61727320506574657271045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d2828895d710e5d710f581b00000066633232303136656532633532366661616539396462643466386571104b01680786711174711228895d71135d7114581b00000066633232303136656533343134393734313562363533396437363871154b016807867116747117655d71185d7119581b000000666332323031366562646635316263326531623635666261353564711a615d711b5d711c5d711d5d711e5d711f5d71205d71214a4e0a6b475d7122895d71237471242e','I0035',1,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ee417f31085d072e518c','Elna','Jefferson',X'800328581b00000066633232303136656534313766333130383564303732653531386371005805000000493030333671014b0028895d71025d71034e5804000000456c6e6171045d71052858090000004a6566666572736f6e710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656534333634333965636635623738633437623571104b01680786711174711228895d71135d7114581b00000066633232303136656534623734643738393036366631306331653071154b01680786711674711728895d71185d7119581b000000666332323031366565353333626630323638336632643431616134711a4b01680786711b74711c655d711d581a0000006663323230313665623164326466656436303061333431366236711e615d711f5d71205d71215d71225d71235d71245d71255d71264a4e0a6b475d7127895d71287471292e','I0036',0,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ee61130abb5e4237173f','Edwin Michael','Smith',X'800328581b00000066633232303136656536313133306162623565343233373137336671005805000000493030333771014b0128895d7102581b0000006663323230313665653636346264393734383837663665326532357103615d71044e580d000000456477696e204d69636861656c71055d7106285805000000536d697468710758000000007108884b016808867109680874710a61680868084b02680886710b68084b004b0068086808680874710c5d710d4affffffff4b005d710e2828895d710f5d7110581b00000066633232303136656536383263616331383134316261353336663071114b01680886711274711328895d71145d711528895d71165d71174b0a680886711858020000003233711974711a61581b000000666332323031366565373432373634363563316330393233623337711b4b01680886711c74711d28895d711e5d711f581b00000066633232303136656537393562613630653135613132303635313771204b01680886712174712228895d71235d7124581b00000066633232303136656538313432303266303762386261636332313171254b016808867126747127655d7128581b0000006663323230313665626636343765653462323661636533323862327129615d712a581b000000666332323031366562633733363364646232366234313965323366712b615d712c5d712d5d712e5d712f5d71305d71315d71324a4e0a6b475d7133895d71347471352e','I0037',1,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ee9010d0a67d371e4051','Kerstina','Hansdotter',X'800328581b00000066633232303136656539303130643061363764333731653430353171005805000000493030333871014b0028895d71025d71034e58080000004b65727374696e6171045d710528580a00000048616e73646f74746572710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656539323164343631643831343364323962356671104b01680786711174711228895d71135d7114581b00000066633232303136656539613539393061643837303866363538383171154b016807867116747117655d7118581b0000006663323230313665633665363764363039373562646435306630367119615d711a5d711b5d711c5d711d5d711e5d711f5d71205d71214a4e0a6b475d7122895d71237471242e','I0038',0,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016eea87543b59f54061315','Martin','Smith',X'800328581b00000066633232303136656561383735343362353966353430363133313571005805000000493030333971014b0128895d71025d71034e58060000004d617274696e71045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581a000000666332323031366565613937393765646536663564663233373771104b01680786711174711228895d71135d7114581b00000066633232303136656562313335643363653666343233373861356371154b016807867116747117655d7118581a00000066633232303136656231643264666564363030613334313662367119615d711a581b000000666332323031366564323937653166633465356130316265303764711b615d711c5d711d5d711e5d711f5d71205d71215d71224a4e0a6b475d7123895d71247471252e','I0039',1,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016eec82207bb51350d9b61','Ingeman','Smith',X'800328581b00000066633232303136656563383232303762623531333530643962363171005805000000493030303471014b0128895d71025d71034e5807000000496e67656d616e71045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581b00000066633232303136656563633237303332363830623363396532346371104b016807867111747112615d71135d7114581a00000066633232303136656231643264666564363030613334313662367115615d71165d71175d71185d71195d711a5d711b5d711c4a4e0a6b475d711d895d711e74711f2e','I0004',1,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016eee0479a3aec78da1d9c','Marjorie Alice','Smith',X'800328581b00000066633232303136656565303437396133616563373864613164396371005805000000493030343071014b0028895d71025d71034e580e0000004d61726a6f72696520416c69636571045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581a000000666332323031366565653262316131623834353530626161363871104b016807867111747112615d71135d7114581b0000006663323230313665626337333633646462323662343139653233667115615d71165d71175d71185d71195d711a5d711b5d711c4a4e0a6b475d711d895d711e74711f2e','I0040',0,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016eef3235e57153b89cd14','Janis Elaine','Green',X'800328581b00000066633232303136656566333233356535373135336238396364313471005805000000493030343171014b0028895d71025d71034e580c0000004a616e697320456c61696e6571045d7105285805000000477265656e710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581b00000066633232303136656566353264636337633831383330613135323571104b016807867111747112615d7113581b0000006663323230313665616432346661623236616138613230353466627114615d71155d71165d71175d71185d71195d711a5d711b5d711c4a4e0a6b475d711d895d711e74711f2e','I0041',0,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016eeff59ee6ba02bb18dec','Mason Michael','Smith',X'800328581b00000066633232303136656566663539656536626130326262313864656371005805000000493030303571014b0128895d71025d71034e580d0000004d61736f6e204d69636861656c71045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d2828895d710e5d710f581a000000666332323031366566303065383132356436376633343037626271104b01680786711174711228895d71135d7114581b00000066633232303136656630393336303062343266623434336335316371154b016807867116747117655d71185d7119581b000000666332323031366562663634376565346232366163653332386232711a615d711b5d711c5d711d5d711e5d711f5d71205d71214a4e0a6b475d7122895d71237471242e','I0005',1,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ef19353ba284f3d07fa3','Edwin','Willard',X'800328581b00000066633232303136656631393335336261323834663364303766613371005805000000493030303671014b0128895d71025d71034e5805000000456477696e71045d710528580700000057696c6c617264710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581b00000066633232303136656631623562396661383964376235386532633371104b016807867111747112615d7113581a00000066633232303136656434356434376631323338306533656639647114615d71155d71165d71175d71185d71195d711a5d711b5d711c4a4e0a6b475d711d895d711e74711f2e','I0006',1,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ef253994ecfa22246d81','Ingar','Smith',X'800328581b00000066633232303136656632353339393465636661323232343664383171005805000000493030303771014b0028895d71025d71034e5805000000496e67617271045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581b00000066633232303136656632363565343461303166366432376535313971104b016807867111747112615d71135d7114581a00000066633232303136656231643264666564363030613334313662367115615d71165d71175d71185d71195d711a5d711b5d711c4a4e0a6b475d711d895d711e74711f2e','I0007',0,-1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ef376acf19f56ac53d12','Hjalmar','Smith',X'800328581b00000066633232303136656633373661636631396635366163353364313271005805000000493030303871014b0128895d71025d71034e5807000000486a616c6d617271045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4b014b005d710d2828895d710e5d710f581b00000066633232303136656633393332633866633261366139643563643571104b01680786711174711228895d71135d7114581b00000066633232303136656634313231616335363232323533363131393971154b01680786711674711728895d71185d7119581b000000666332323031366566343937353635313963303961626562663833711a4b01680786711b74711c28895d711d5d711e581b000000666332323031366566353232303262666362656464383430613432711f4b016807867120747121655d7122581b0000006663323230313665623531376464656264653130376361313736377123615d7124581b0000006663323230313665613834316634663966373735646163313861617125615d71265d71275d71285d71295d712a5d712b5d712c581b000000666332323031366566363135333939376336336331613432303561712d614a4e0a6b475d712e895d712f7471302e','I0008',1,1,0,1198197326,0);
INSERT INTO person VALUES('fc22016ef6a6a4eeea74d96947b','Emil','Smith',X'800328581b00000066633232303136656636613661346565656137346439363934376271005805000000493030303971014b0128895d71025d71034e5804000000456d696c71045d7105285805000000536d697468710658000000007107884b016807867108680774710961680768074b02680786710a68074b004b0068076807680774710b5d710c4affffffff4b005d710d28895d710e5d710f581b00000066633232303136656636643464663866376265633463326331616171104b016807867111747112615d71135d7114581b0000006663323230313665633665363764363039373562646435306630367115615d71165d71175d71185d71195d711a5d711b5d711c4a4e0a6b475d711d895d711e74711f2e','I0009',1,-1,0,1198197326,0);
CREATE TABLE family (handle VARCHAR(50) PRIMARY KEY NOT NULL, blob_data BLOB, gramps_id TEXT, father_handle VARCHAR(50), mother_handle VARCHAR(50), change INTEGER, private INTEGER);
INSERT INTO family VALUES('fc22016ead24fab26aa8a2054fb',X'800328581b0000006663323230313665616432346661623236616138613230353466627100580500000046303030387101581b0000006663323230313665646639333735323063626232383933333935307102581b00000066633232303136656566333233356535373135336238396364313471035d71042828895d71055d7106581b00000066633232303136656263643332303163373435636330653464333871074b02580000000071088671094b02680886710a74710b28895d710c5d710d581b000000666332323031366561626532666265303830333462336364316533710e4b01680886710f4b01680886711074711128895d71125d7113581b00000066633232303136656437633230626365353763663063616438636271144b0168088671154b016808867116747117654b0068088671185d711928895d711a5d711b581b000000666332323031366630376537393332643362383532646364623834711c4b08680886711d74711e615d711f5d71205d71215d71225d71234a4e0a6b475d7124897471252e','F0008','fc22016edf937520cbb28933950','fc22016eef3235e57153b89cd14',1198197326,0);
INSERT INTO family VALUES('fc22016ea841f4f9f775dac18aa',X'800328581b0000006663323230313665613834316634663966373735646163313861617100580500000046303030337101581b0000006663323230313665636633363864316564613166333666396136327102581a000000666332323031366561333866623238313561363263313332626471035d71042828895d71055d7106581b00000066633232303136656432663763623234646433326439376630616571074b01580000000071088671094b01680886710a74710b28895d710c5d710d581b000000666332323031366563643235353632653262363738666335306165710e4b01680886710f4b01680886711074711128895d71125d7113581b00000066633232303136656332303131656336633062386339323938636571144b0168088671154b01680886711674711728895d71185d7119581b000000666332323031366566333736616366313966353661633533643132711a4b01680886711b4b01680886711c74711d28895d711e5d711f581b00000066633232303136656235613738653130383061653535303636626571204b0168088671214b01680886712274712328895d71245d7125581b00000066633232303136656330303766316530383534653030356536333271264b0168088671274b01680886712874712928895d712a5d712b581b000000666332323031366561646634666439626362626337396435376262712c4b01680886712d4b01680886712e74712f654b0068088671305d713128895d71325d7133581b00000066633232303136663032313432353761653762336432323838383871344b086808867135747136615d71375d71385d71395d713a5d713b4a4e0a6b475d713c8974713d2e','F0003','fc22016ecf368d1eda1f36f9a62','fc22016ea38fb2815a62c132bd',1198197326,0);
INSERT INTO family VALUES('fc22016eb1d2dfed600a3416b6',X'800328581a00000066633232303136656231643264666564363030613334313662367100580500000046303030307101581b0000006663323230313665656138373534336235396635343036313331357102581b00000066633232303136656534313766333130383564303732653531386371035d71042828895d71055d7106581b00000066633232303136656231323334336265336437653663373636623871074b01580000000071088671094b01680886710a74710b28895d710c5d710d581b000000666332323031366566323533393934656366613232323436643831710e4b01680886710f4b01680886711074711128895d71125d7113581b00000066633232303136656563383232303762623531333530643962363171144b0168088671154b01680886711674711728895d71185d7119581b000000666332323031366563343735383536666264656635373235623561711a4b01680886711b4b01680886711c74711d654b00680886711e5d711f28895d71205d7121581b00000066633232303136656638663538373934376566633066353336383771224b086808867123747124615d71255d71265d71275d71285d71294a4e0a6b475d712a8974712b2e','F0000','fc22016eea87543b59f54061315','fc22016ee417f31085d072e518c',1198197326,0);
INSERT INTO family VALUES('fc22016eb517ddebde107ca1767',X'800328581b0000006663323230313665623531376464656264653130376361313736377100580500000046303030367101581b0000006663323230313665663337366163663139663536616335336431327102581b00000066633232303136656464323566356562326231383837356263366371035d71042828895d71055d7106581b00000066633232303136656262623739343565376533643131663634303571074b01580000000071088671094b01680886710a74710b28895d710c5d710d581b000000666332323031366562343731373362306438623336336263656630710e4b01680886710f4b016808867110747111654b0068088671125d711328895d71145d7115581b00000066633232303136663036323534333165613265663530346534346471164b086808867117747118615d71195d711a5d711b5d711c5d711d4a4e0a6b475d711e8974711f2e','F0006','fc22016ef376acf19f56ac53d12','fc22016edd25f5eb2b18875bc6c',1198197326,0);
INSERT INTO family VALUES('fc22016ebf647ee4b26ace328b2',X'800328581b0000006663323230313665626636343765653462323661636533323862327100580500000046303031337101581b0000006663323230313665653631313330616262356534323337313733667102581b00000066633232303136656462623461373238643237636433323831303471035d71042828895d71055d7106581b00000066633232303136656566663539656536626130326262313864656371074b01580000000071088671094b01680886710a74710b28895d710c5d710d581b000000666332323031366562653537303666393564636261653237616339710e4b01680886710f4b016808867110747111654b0068088671125d71132828895d71145d7115581b00000066633232303136656665633466366235383237626665366437393671164b08680886711774711828895d71195d711a581b000000666332323031366566663432666235376631643265326462643537711b4b08680886711c74711d655d711e5d711f5d71205d71215d71224a4e0a6b475d7123897471242e','F0013','fc22016ee61130abb5e4237173f','fc22016edbb4a728d27cd328104',1198197326,0);
INSERT INTO family VALUES('fc22016ec6e67d60975bdd50f06',X'800328581b0000006663323230313665633665363764363039373562646435306630367100580500000046303030327101581b0000006663323230313665633437353835366662646566353732356235617102581b00000066633232303136656539303130643061363764333731653430353171035d71042828895d71055d7106581b00000066633232303136656461303166396134373632663834333131353571074b01580000000071088671094b01680886710a74710b28895d710c5d710d581b000000666332323031366566366136613465656561373464393639343762710e4b01680886710f4b01680886711074711128895d71125d7113581b00000066633232303136656366333638643165646131663336663961363271144b0168088671154b016808867116747117654b0068088671185d711928895d711a5d711b581b000000666332323031366630306435383639643538373436656461336339711c4b08680886711d74711e615d711f5d71205d71215d71225d71234a4e0a6b475d7124897471252e','F0002','fc22016ec475856fbdef5725b5a','fc22016ee9010d0a67d371e4051',1198197326,0);
INSERT INTO family VALUES('fc22016eb0a6034e7e6b9eaa697',X'800328581b0000006663323230313665623061363033346537653662396561613639377100580500000046303030397101581b0000006663323230313665616466346664396263626263373964353762627102581b00000066633232303136656261353363336366646331303961653831396571035d710428895d71055d7106581b00000066633232303136656466393337353230636262323839333339353071074b01580000000071088671094b01680886710a74710b614b03680886710c5d710d5d710e5d710f5d71105d71115d71124a4e0a6b475d7113897471142e','F0009','fc22016eadf4fd9bcbbc79d57bb','fc22016eba53c3cfdc109ae819e',1198197326,0);
INSERT INTO family VALUES('fc22016ebdf51bc2e1b65fba55d',X'800328581b0000006663323230313665626466353162633265316236356662613535647100580500000046303031307101581b0000006663323230313665626364333230316337343563633065346433387102581a000000666332323031366564656135326635653332373266303766626571035d710428895d71055d7106581a000000666332323031366565323962633235313135383932326261343671074b02580000000071088671094b02680886710a74710b614b00680886710c5d710d28895d710e5d710f581b00000066633232303136656662623663323136623465366338363436393771104b086808867111747112615d71135d71145d71155d71165d71174a4e0a6b475d7118897471192e','F0010','fc22016ebcd3201c745cc0e4d38','fc22016edea52f5e3272f07fbe',1198197326,0);
INSERT INTO family VALUES('fc22016ebc7363ddb26b419e23f',X'800328581b0000006663323230313665626337333633646462323662343139653233667100580500000046303031327101581b0000006663323230313665626262373934356537653364313166363430357102581b00000066633232303136656530643534343831393739343833653836643471035d71042828895d71055d7106581b00000066633232303136656565303437396133616563373864613164396371074b01580000000071088671094b01680886710a74710b28895d710c5d710d581b000000666332323031366565363131333061626235653432333731373366710e4b01680886710f4b016808867110747111654b0068088671125d711328895d71145d7115581b00000066633232303136656664373336386531336365666562323636336471164b086808867117747118615d71195d711a5d711b5d711c5d711d4a4e0a6b475d711e8974711f2e','F0012','fc22016ebbb7945e7e3d11f6405','fc22016ee0d54481979483e86d4',1198197326,0);
INSERT INTO family VALUES('fc22016ed297e1fc4e5a01be07d',X'800328581b0000006663323230313665643239376531666334653561303162653037647100580500000046303030317101581a00000066633232303136656434626439613638343435316639396138337102581b00000066633232303136656431663461393262343331326631626535643571035d710428895d71055d7106581b00000066633232303136656561383735343362353966353430363133313571074b01580000000071088671094b01680886710a74710b614b00680886710c5d710d28895d710e5d710f581b00000066633232303136656661623233303832376532633364333937616171104b086808867111747112615d71135d71145d71155d71165d71174a4e0a6b475d7118897471192e','F0001','fc22016ed4bd9a684451f99a83','fc22016ed1f4a92b4312f1be5d5',1198197326,0);
INSERT INTO family VALUES('fc22016ed74790aa0b019ff40ef',X'800328581b0000006663323230313665643734373930616130623031396666343065667100580500000046303031317101581b0000006663323230313665646130316639613437363266383433313135357102581a000000666332323031366564356136336632626566626238313533323371035d71044b00580000000071058671065d710728895d71085d7109581b000000666332323031366566633935316363626664303333383837373933710a4b08680586710b74710c615d710d5d710e5d710f5d71105d71114a4e0a6b475d7112897471132e','F0011','fc22016eda01f9a4762f8431155','fc22016ed5a63f2befbb815323',1198197326,0);
INSERT INTO family VALUES('fc22016eb0b4bf05cad70f33c5d',X'800328581b0000006663323230313665623062346266303563616437306633336335647100580500000046303031347101581b0000006663323230313665616466346664396263626263373964353762627102581b00000066633232303136656237623235393963313262353434316364363371035d71044b03580000000071058671065d71075d71085d71095d710a5d710b5d710c4a4e0a6b475d710d8974710e2e','F0014','fc22016eadf4fd9bcbbc79d57bb','fc22016eb7b2599c12b5441cd63',1198197326,0);
INSERT INTO family VALUES('fc22016ed45d47f12380e3ef9d',X'800328581a00000066633232303136656434356434376631323338306533656639647100580500000046303030347101581b0000006663323230313665663139333533626132383466336430376661337102581b00000066633232303136656432663763623234646433326439376630616571035d71044b00580000000071058671065d710728895d71085d7109581a0000006663323230313666303434636630316639326662333965303865710a4b08680586710b74710c615d710d5d710e5d710f5d71105d71114a4e0a6b475d7112897471132e','F0004','fc22016ef19353ba284f3d07fa3','fc22016ed2f7cb24dd32d97f0ae',1198197326,0);
INSERT INTO family VALUES('fc22016eb365b7c96c264e47c55',X'800328581b0000006663323230313665623336356237633936633236346534376335357100580500000046303030357101581b0000006663323230313665623237343762353833653564366565616534627102581b00000066633232303136656364323535363265326236373866633530616571035d71044b00580000000071058671065d710728895d71085d7109581b000000666332323031366630353536643065376138643263346535366366710a4b08680586710b74710c615d710d5d710e5d710f5d71105d71114a4e0a6b475d7112897471132e','F0005','fc22016eb2747b583e5d6eeae4b','fc22016ecd25562e2b678fc50ae',1198197326,0);
INSERT INTO family VALUES('fc22016eb42545a56b9e25d387b',X'800328581b0000006663323230313665623432353435613536623965323564333837627100580500000046303030377101581b0000006663323230313665623561373865313038306165353530363662657102581b00000066633232303136656233633237306636333332343435336239346171035d71044b00580000000071058671065d710728895d71085d7109581b000000666332323031366630373433643462663764353737666539643261710a4b08680586710b74710c615d710d5d710e5d710f5d71105d71114a4e0a6b475d7112897471132e','F0007','fc22016eb5a78e1080ae55066be','fc22016eb3c270f63324453b94a',1198197326,0);
CREATE TABLE source (handle VARCHAR(50) PRIMARY KEY NOT NULL, blob_data BLOB, gramps_id TEXT, title TEXT, author TEXT, pubinfo TEXT, abbrev TEXT, change INTEGER, private INTEGER);
INSERT INTO source VALUES('fc22016ee63b72ef53577be23e',X'800328581a000000666332323031366565363362373265663533353737626532336571005805000000533030303171015811000000426972746820436572746966696361746571025800000000710368035d71045d710568034a4e0a6b475d71065d71075d7108897471092e','S0001','Birth Certificate','','','',1198197326,0);
INSERT INTO source VALUES('fc22016ee6c2b5012b56ffe9cc1',X'800328581b0000006663323230313665653663326235303132623536666665396363317100580500000053303030337101582100000042697274682c20446561746820616e64204d61727269616765205265636f72647371025800000000710368035d7104581b0000006663323230313666306134316131333965316665366365656536397105615d710668034a4e0a6b475d71075d7108285d7109581b000000666332323031366630393631613432643734616530333131623864710a581500000043412d3132332d4c4c2d3435365f4e756d2f626572710b4b06680386710c8974710d615d710e8974710f2e','S0003','Birth, Death and Marriage Records','','','',1198197326,0);
INSERT INTO source VALUES('fc22016efdb603da75e80258d54',X'800328581b000000666332323031366566646236303364613735653830323538643534710058050000005330303030710158130000004d61727269616765204365727469666963616571025800000000710368035d7104581b0000006663323230313666303937343933666135353361393731303165617105615d710668034a4e0a6b475d71075d7108285d7109581b000000666332323031366630393631613432643734616530333131623864710a580d000000776861742d3332312d65766572710b4b0b680386710c8974710d615d710e8974710f2e','S0000','Marriage Certificae','','','',1198197326,0);
INSERT INTO source VALUES('fc22016f09fbdcf1579f522fe0',X'800328581a00000066633232303136663039666264636631353739663532326665307100580500000053303030327101580d0000004269727468205265636f72647371025800000000710368035d71045d710568034a4e0a6b475d71065d71075d7108897471092e','S0002','Birth Records','','','',1198197326,0);
CREATE TABLE citation (handle VARCHAR(50) PRIMARY KEY NOT NULL, blob_data BLOB, gramps_id TEXT, page TEXT, confidence INTEGER, source_handle VARCHAR(50), change INTEGER, private INTEGER);
INSERT INTO citation VALUES('fc22016ee664bd974887f6e2e25',X'800328581b00000066633232303136656536363462643937343838376636653265323571005805000000433030303071014e580000000071024b02581a000000666332323031366565363362373265663533353737626532336571035d71045d71055d71064a3c0b46675d7107897471082e','C0000','',2,'fc22016ee63b72ef53577be23e',1732643644,0);
INSERT INTO citation VALUES('fc22016ee6e7e8222b34c9e8cd9',X'800328581b00000066633232303136656536653765383232326233346339653863643971005805000000433030303171014e580000000071024b02581b00000066633232303136656536633262353031326235366666653963633171035d71045d71055d71064a3c0b46675d7107897471082e','C0001','',2,'fc22016ee6c2b5012b56ffe9cc1',1732643644,0);
INSERT INTO citation VALUES('fc22016efdc43fec2c0d6a14120',X'800328581b00000066633232303136656664633433666563326330643661313431323071005805000000433030303271014e580000000071024b02581b00000066633232303136656664623630336461373565383032353864353471035d71045d71055d71064a3c0b46675d7107897471082e','C0002','',2,'fc22016efdb603da75e80258d54',1732643644,0);
CREATE TABLE event (handle VARCHAR(50) PRIMARY KEY NOT NULL, blob_data BLOB, gramps_id TEXT, description TEXT, place VARCHAR(50), change INTEGER, private INTEGER);
INSERT INTO event VALUES('fc22016ea4d11615526867948c7',X'800328581b00000066633232303136656134643131363135353236383637393438633771005805000000453030303071014b0c58000000007102867103284b004b004b00284b024b0a4d480789747104580a00000032204f4354203138363471054a63a724004b0074710658180000004269727468206f6620416e6e612048616e73646f747465727107581a000000666332323031366561373262336635303830656432626133646171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0000','Birth of Anna Hansdotter','fc22016ea72b3f5080ed2ba3da',1732643644,0);
INSERT INTO event VALUES('fc22016ea7b3bcd2cecd5e6c2a4',X'800328581b00000066633232303136656137623362636432636563643565366332613471005805000000453030303171014b0d58000000007102867103284b004b004b00284b1d4b094d990789747104580b000000323920534550203139343571054af01a25004b0074710658180000004465617468206f6620416e6e612048616e73646f747465727107581b00000066633232303136656138303535356139383038323965613862633471085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0001','Death of Anna Hansdotter','fc22016ea80555a980829ea8bc4',1732643644,0);
INSERT INTO event VALUES('fc22016eac72d77221cab0a35a0',X'800328581b00000066633232303136656163373264373732323163616230613335613071005805000000453030303271014b0c58000000007102867103284b004b004b00284b0b4b084dae0789747104580b000000313120415547203139363671054ab53825004b00747106581a0000004269727468206f66204b65697468204c6c6f796420536d6974687107581b00000066633232303136656163643137366261316532353663313663643171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0002','Birth of Keith Lloyd Smith','fc22016eacd176ba1e256c16cd1',1732643644,0);
INSERT INTO event VALUES('fc22016eae0c31a3146a475522',X'800328581a000000666332323031366561653063333161333134366134373535323271005805000000453030303371014b0c58000000007102867103284b004b004b00284b114b044d700789747104580b000000313720415052203139303471054accdf24004b0074710658190000004269727468206f662048616e7320506574657220536d6974687107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0003','Birth of Hans Peter Smith','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016eafb20d8a9693e336162',X'800328581b00000066633232303136656166623230643861393639336533333631363271005805000000453030303471014b0d58000000007102867103284b004b004b00284b1d4b014db90789747104580b0000003239204a414e203139373771054aa54725004b0074710658190000004465617468206f662048616e7320506574657220536d6974687107581b00000066633232303136656163643137366261316532353663313663643171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0004','Death of Hans Peter Smith','fc22016eacd176ba1e256c16cd1',1732643644,0);
INSERT INTO event VALUES('fc22016eb14368afff0e7046905',X'800328581b00000066633232303136656231343336386166666630653730343639303571005805000000453030303571014b0c58000000007102867103284b004b004b00284b1d4b014d1d0789747104580b0000003239204a414e203138323171054a136924004b0074710658140000004269727468206f662048616e6e6120536d6974687107581b00000066633232303136656231393564663963313363353638353666306171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0005','Birth of Hanna Smith','fc22016eb195df9c13c56856f0a',1732643644,0);
INSERT INTO event VALUES('fc22016eb296ef0dcf09a5e45cd',X'800328581b00000066633232303136656232393665663064636630396135653435636471005805000000453030303671014b0c58000000007102867103284b004b004b00284b1f4b084d610789747104580b000000333120415547203138383971054aeeca24004b00747106581e0000004269727468206f66204865726d616e204a756c697573204e69656c73656e7107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0006','Birth of Herman Julius Nielsen','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016eb311650130c702f5989',X'800328581b00000066633232303136656233313136353031333063373032663539383971005805000000453030303771014b0d58000000007102867103284b004b004b00284b004b004d99078974710458040000003139343571054ae11925004b00747106581e0000004465617468206f66204865726d616e204a756c697573204e69656c73656e710768025d71085d71095d710a5d710b4a3c0b46675d710c8974710d2e','E0007','Death of Herman Julius Nielsen','',1732643644,0);
INSERT INTO event VALUES('fc22016eb3d53dd3409d230bd9e',X'800328581b00000066633232303136656233643533646433343039643233306264396571005805000000453030303871014b0c58000000007102867103284b004b034b00284b004b004d6907897471045808000000414254203138393771054a66d524004b0074710658180000004269727468206f66204576656c796e204d69636861656c73710768025d71085d71095d710a5d710b4a3c0b46675d710c8974710d2e','E0008','Birth of Evelyn Michaels','',1732643644,0);
INSERT INTO event VALUES('fc22016eb492ecfc47a0662a219',X'800328581b00000066633232303136656234393265636663343761303636326132313971005805000000453030303971014b0c58000000007102867103284b004b004b00284b044b0b4d8e0789747104580a00000034204e4f56203139333471054a620b25004b00747106581b0000004269727468206f66204d61726a6f726965204c656520536d6974687107581b00000066633232303136656234643565343731346163336363636238303171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0009','Birth of Marjorie Lee Smith','fc22016eb4d5e4714ac3cccb801',1732643644,0);
INSERT INTO event VALUES('fc22016eb5c69e5e22a2d622afc',X'800328581b00000066633232303136656235633639653565323261326436323261666371005805000000453030313071014b0c58000000007102867103284b004b004b00284b0b4b094d690789747104580b000000313120534550203138393771054a63d624004b0074710658120000004269727468206f662047757320536d6974687107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0010','Birth of Gus Smith','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016eb64594d9b485b7e4c98',X'800328581b00000066633232303136656236343539346439623438356237653463393871005805000000453030313171014b0d58000000007102867103284b004b004b00284b154b0a4dab0789747104580b0000003231204f4354203139363371054ab43425004b0074710658120000004465617468206f662047757320536d6974687107581b00000066633232303136656163643137366261316532353663313663643171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0011','Death of Gus Smith','fc22016eacd176ba1e256c16cd1',1732643644,0);
INSERT INTO event VALUES('fc22016eb7e35c29c69319f7a25',X'800328581b00000066633232303136656237653335633239633639333139663761323571005805000000453030313271014b0c58000000007102867103284b004b004b00284b054b0b4d730789747104580a00000035204e4f56203139303771054adde424004b00747106581a0000004269727468206f66204a656e6e6966657220416e646572736f6e7107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0012','Birth of Jennifer Anderson','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016eb88759929409fe27a35',X'800328581b00000066633232303136656238383735393932393430396665323761333571005805000000453030313371014b0d58000000007102867103284b004b004b00284b1d4b054dc10789747104580b0000003239204d4159203139383571054a875325004b00747106581a0000004465617468206f66204a656e6e6966657220416e646572736f6e7107581b00000066633232303136656163643137366261316532353663313663643171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0013','Death of Jennifer Anderson','fc22016eacd176ba1e256c16cd1',1732643644,0);
INSERT INTO event VALUES('fc22016eba742e619fa01d0475e',X'800328581b00000066633232303136656261373432653631396661303164303437356571005805000000453030313471014b0c58000000007102867103284b004b004b00284b024b054d760789747104580a00000032204d4159203139313071054a6ae824004b00747106581d0000004269727468206f66204c696c6c69652048617272696574204a6f6e65737107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0014','Birth of Lillie Harriet Jones','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016ebb02167056f66aa2742',X'800328581b00000066633232303136656262303231363730353666363661613237343271005805000000453030313571014b0d58000000007102867103284b004b004b00284b1a4b064dc60789747104580b0000003236204a554e203139393071054ac55a25004b00747106581d0000004465617468206f66204c696c6c69652048617272696574204a6f6e6573710768025d71085d71095d710a5d710b4a3c0b46675d710c8974710d2e','E0015','Death of Lillie Harriet Jones','',1732643644,0);
INSERT INTO event VALUES('fc22016ebbc345777a8f06b0241',X'800328581b00000066633232303136656262633334353737376138663036623032343171005805000000453030313671014b0c58000000007102867103284b004b004b00284b1e4b014d8c0789747104580b0000003330204a414e203139333271054a710725004b00747106581b0000004269727468206f66204a6f686e20486a616c6d617220536d6974687107581b00000066633232303136656163643137366261316532353663313663643171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0016','Birth of John Hjalmar Smith','fc22016eacd176ba1e256c16cd1',1732643644,0);
INSERT INTO event VALUES('fc22016ebcf1acad21091d446d5',X'800328581b00000066633232303136656263663161636164323130393164343436643571005805000000453030313771014b0c58000000007102867103284b004b004b00284b1c4b084dab0789747104580b000000323820415547203139363371054a7e3425004b0074710658190000004269727468206f662045726963204c6c6f796420536d6974687107581b00000066633232303136656163643137366261316532353663313663643171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0017','Birth of Eric Lloyd Smith','fc22016eacd176ba1e256c16cd1',1732643644,0);
INSERT INTO event VALUES('fc22016ebd853d9c540eb9ee799',X'800328581b00000066633232303136656264383533643963353430656239656537393971005805000000453030313871014b0b580000000071028671034e680268025d71045d71055d71065d71074a3c0b46675d7108897471092e','E0018','','',1732643644,0);
INSERT INTO event VALUES('fc22016ebe75c776e6c4d90d976',X'800328581b00000066633232303136656265373563373736653663346439306439373671005805000000453030313971014b0c58000000007102867103284b004b004b00284b0c4b044dce0789747104580b000000313220415052203139393871054ae46525004b00747106581a0000004269727468206f6620416d626572204d6172696520536d6974687107581b00000066633232303136656265623236373432653538643832343839666271085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0019','Birth of Amber Marie Smith','fc22016ebeb26742e58d82489fb',1732643644,0);
INSERT INTO event VALUES('fc22016ebef4952f0a419ed0f97',X'800328581b00000066633232303136656265663439353266306134313965643066393771005805000000453030323071014b1658000000007102867103284b004b004b00284b1a4b044dce0789747104580b000000323620415052203139393871054af26525004b007471065820000000436872697374656e696e67206f6620416d626572204d6172696520536d6974687107581b00000066633232303136656266323666333736393034616437613537643271085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0020','Christening of Amber Marie Smith','fc22016ebf26f376904ad7a57d2',1732643644,0);
INSERT INTO event VALUES('fc22016ec012749d5a171e4278c',X'800328581b00000066633232303136656330313237343964356131373165343237386371005805000000453030323171014b0c58000000007102867103284b004b004b00284b144b0c4d6b0789747104580b000000323020444543203138393971054aa1d924004b0074710658180000004269727468206f66204361726c20456d696c20536d6974687107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0021','Birth of Carl Emil Smith','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016ec0a58a9e02443201d19',X'800328581b00000066633232303136656330613538613965303234343332303164313971005805000000453030323271014b0d58000000007102867103284b004b004b00284b1c4b014da70789747104580b0000003238204a414e203139353971054af52d25004b0074710658180000004465617468206f66204361726c20456d696c20536d6974687107581b00000066633232303136656234643565343731346163336363636238303171085d71095d710a5d710b5d710c28895d710d5d710e4b08680286710f580a000000426164206272656174687110747111614a3c0b46675d7112897471132e','E0022','Death of Carl Emil Smith','fc22016eb4d5e4714ac3cccb801',1732643644,0);
INSERT INTO event VALUES('fc22016ec221bc9393b724daa31',X'800328581b00000066633232303136656332323162633933393362373234646161333171005805000000453030323371014b0c58000000007102867103284b004b004b00284b1f4b014d650789747104580b0000003331204a414e203138393371054acfcf24004b0074710658160000004269727468206f6620486a616c6d617220536d6974687107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0023','Birth of Hjalmar Smith','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016ec2c70c2c1c72c6e24e7',X'800328581b00000066633232303136656332633730633263316337326336653234653771005805000000453030323471014b0d58000000007102867103284b004b004b00284b194b094d660789747104580b000000323520534550203138393471054a29d224004b0074710658160000004465617468206f6620486a616c6d617220536d6974687107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0024','Death of Hjalmar Smith','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016ec4912fd7ab01c07cc07',X'800328581b00000066633232303136656334393132666437616230316330376363303771005805000000453030323571014b0c58000000007102867103284b004b004b00284b134b0b4d260789747104580b0000003139204e4f56203138333071054a107724004b0074710658150000004269727468206f66204d617274696e20536d6974687107581b00000066633232303136656231393564663963313363353638353666306171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0025','Birth of Martin Smith','fc22016eb195df9c13c56856f0a',1732643644,0);
INSERT INTO event VALUES('fc22016ec525088fc533681a329',X'800328581b00000066633232303136656335323530383866633533333638316133323971005805000000453030323671014b0d58000000007102867103284b004b044b00284b004b004d6b07894b004b004d7107897471045811000000424554203138393920414e44203139303571054a40d824004b0074710658150000004465617468206f66204d617274696e20536d6974687107581b00000066633232303136656335623664393766656665396263376661643271085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0026','Death of Martin Smith','fc22016ec5b6d97fefe9bc7fad2',1732643644,0);
INSERT INTO event VALUES('fc22016ec6112a0ccc91d4c16a',X'800328581a000000666332323031366563363131326130636363393164346331366171005805000000453030323771014b0f58000000007102867103284b004b004b00284b174b0b4d260789747104580b0000003233204e4f56203138333071054a147724004b0074710658170000004261707469736d206f66204d617274696e20536d6974687107581b00000066633232303136656231393564663963313363353638353666306171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0027','Baptism of Martin Smith','fc22016eb195df9c13c56856f0a',1732643644,0);
INSERT INTO event VALUES('fc22016ecd517b91d8cdb238e07',X'800328581b00000066633232303136656364353137623931643863646232333865303771005805000000453030323871014b0c58000000007102867103284b004b004b00284b1f4b014d610789747104580b0000003331204a414e203138383971054a1aca24004b0074710658270000004269727468206f662041737472696420536865726d616e6e61204175677573746120536d6974687107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0028','Birth of Astrid Shermanna Augusta Smith','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016ece157ea5403282b4960',X'800328581b00000066633232303136656365313537656135343033323832623439363071005805000000453030323971014b0d58000000007102867103284b004b004b00284b154b0c4dab0789747104580b000000323120444543203139363371054af13425004b0074710658270000004465617468206f662041737472696420536865726d616e6e61204175677573746120536d6974687107581b00000066633232303136656163643137366261316532353663313663643171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0029','Death of Astrid Shermanna Augusta Smith','fc22016eacd176ba1e256c16cd1',1732643644,0);
INSERT INTO event VALUES('fc22016ecf556be63425e96a6eb',X'800328581b00000066633232303136656366353536626536333432356539366136656271005805000000453030333071014b0c58000000007102867103284b004b004b00284b1c4b0b4d460789747104580b0000003238204e4f56203138363271054ac1a424004b00747106581a0000004269727468206f662047757374616620536d6974682c2053722e7107581a000000666332323031366563663933306564383766353664656636396671085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0030','Birth of Gustaf Smith, Sr.','fc22016ecf930ed87f56def69f',1732643644,0);
INSERT INTO event VALUES('fc22016ecfd8795e9039aa5972',X'800328581a000000666332323031366563666438373935653930333961613539373271005805000000453030333171014b0d58000000007102867103284b004b014b00284b174b074d8a0789747104580f000000424546203233204a554c203139333071054a450525004b00747106581a0000004465617468206f662047757374616620536d6974682c2053722e7107581b00000066633232303136656138303535356139383038323965613862633471085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0031','Death of Gustaf Smith, Sr.','fc22016ea80555a980829ea8bc4',1732643644,0);
INSERT INTO event VALUES('fc22016ed0576c4985d4e5fa0f8',X'800328581b00000066633232303136656430353736633439383564346535666130663871005805000000453030333271014b005804000000496d6d697102867103284b004b004b00284b154b054d740789747104580b0000003231204d4159203139303871054aa3e524004b0074710658000000007107581b00000066633232303136656430393162313032666431656339316530333071085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0032','','fc22016ed091b102fd1ec91e030',1732643644,0);
INSERT INTO event VALUES('fc22016ed0d310a8fc575675674',X'800328581b00000066633232303136656430643331306138666335373536373536373471005805000000453030333371014b1658000000007102867103284b004b004b00284b074b0c4d460789747104580a0000003720444543203138363271054acaa424004b007471065820000000436872697374656e696e67206f662047757374616620536d6974682c2053722e7107581b00000066633232303136656231393564663963313363353638353666306171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0033','Christening of Gustaf Smith, Sr.','fc22016eb195df9c13c56856f0a',1732643644,0);
INSERT INTO event VALUES('fc22016ed214c61147150b3d2b5',X'800328581b00000066633232303136656432313463363131343731353062336432623571005805000000453030333471014b0c58000000007102867103284b004b034b00284b004b004def06897471045808000000414254203137373571054a562724004b00747106581a0000004269727468206f66204d61727461204572696373646f747465727107581b00000066633232303136656335623664393766656665396263376661643271085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0034','Birth of Marta Ericsdotter','fc22016ec5b6d97fefe9bc7fad2',1732643644,0);
INSERT INTO event VALUES('fc22016ed3134b256ac085ea44a',X'800328581b00000066633232303136656433313334623235366163303835656134346171005805000000453030333571014b0c58000000007102867103284b004b004b00284b0f4b0c4d5e0789747104580b000000313520444543203138383671054a10c724004b00747106581b0000004269727468206f66204b6972737469204d6172696520536d6974687107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0035','Birth of Kirsti Marie Smith','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016ed3926645029816c4e16',X'800328581b00000066633232303136656433393236363435303239383136633465313671005805000000453030333671014b0d58000000007102867103284b004b004b00284b124b074dae0789747104580b0000003138204a554c203139363671054a9d3825004b00747106581b0000004465617468206f66204b6972737469204d6172696520536d6974687107581b00000066633232303136656163643137366261316532353663313663643171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0036','Death of Kirsti Marie Smith','fc22016eacd176ba1e256c16cd1',1732643644,0);
INSERT INTO event VALUES('fc22016ed4d5dade72e899af126',X'800328581b00000066633232303136656434643564616465373265383939616631323671005805000000453030333771014b0c58000000007102867103284b004b034b00284b004b004dea06897471045808000000414254203137373071054a342024004b0074710658160000004269727468206f6620496e67656d616e20536d6974687107581b00000066633232303136656335623664393766656665396263376661643271085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0037','Birth of Ingeman Smith','fc22016ec5b6d97fefe9bc7fad2',1732643644,0);
INSERT INTO event VALUES('fc22016ed5d174a3a8847c85628',X'800328581b00000066633232303136656435643137346133613838343763383536323871005805000000453030333871014b0c58000000007102867103284b004b004b00284b174b094d440789747104580b000000323320534550203138363071054aa5a124004b0074710658180000004269727468206f6620416e6e6120537472656966666572747107581b00000066633232303136656436313764373536643666313361363733343471085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0038','Birth of Anna Streiffert','fc22016ed617d756d6f13a67344',1732643644,0);
INSERT INTO event VALUES('fc22016ed654a19499da8e5cb06',X'800328581b00000066633232303136656436353461313934393964613865356362303671005805000000453030333971014b0d58000000007102867103284b004b004b00284b024b024d870789747104580a0000003220464542203139323771054a520025004b0074710658180000004465617468206f6620416e6e6120537472656966666572747107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0039','Death of Anna Streiffert','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016ed81581f8cf4f4c6a83e',X'800328581b00000066633232303136656438313538316638636634663463366138336571005805000000453030343071014b0c58000000007102867103284b004b024b00284b004b004dae07897471045808000000414654203139363671054ad73725004b00747106581a0000004269727468206f6620437261696720506574657220536d6974687107581b00000066633232303136656163643137366261316532353663313663643171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0040','Birth of Craig Peter Smith','fc22016eacd176ba1e256c16cd1',1732643644,0);
INSERT INTO event VALUES('fc22016ed911728208458ac9649',X'800328581b00000066633232303136656439313137323832303834353861633936343971005805000000453030343171014b15580000000071028671034e581b00000043656e737573206f6620437261696720506574657220536d697468710468025d71055d7106581b0000006663323230313665643935373064396434326138656134353166347107615d71085d71094a3c0b46675d710a8974710b2e','E0041','Census of Craig Peter Smith','',1732643644,0);
INSERT INTO event VALUES('fc22016eda23849ea03630e61e7',X'800328581b00000066633232303136656461323338343965613033363330653631653771005805000000453030343271014b0c58000000007102867103284b004b004b00284b064b0a4d420789747104580a00000036204f4354203138353871054ad79e24004b0074710658150000004269727468206f66204d61676e657320536d6974687107581b00000066633232303136656461363431383562623534623535393062643571085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0042','Birth of Magnes Smith','fc22016eda64185bb54b5590bd5',1732643644,0);
INSERT INTO event VALUES('fc22016edaa5b2d5f5d1b318410',X'800328581b00000066633232303136656461613562326435663564316233313834313071005805000000453030343371014b0d58000000007102867103284b004b004b00284b144b024d760789747104580b000000323020464542203139313071054a23e824004b0074710658150000004465617468206f66204d61676e657320536d6974687107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0043','Death of Magnes Smith','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016edbd509bca5fe24d9d10',X'800328581b00000066633232303136656462643530396263613566653234643964313071005805000000453030343471014b0c58000000007102867103284b004b004b00284b1a4b084dad0789747104580b000000323620415547203139363571054a573725004b0074710658190000004269727468206f66204a616e69636520416e6e204164616d737107581b00000066633232303136656463313637633230653665626436613461313871085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0044','Birth of Janice Ann Adams','fc22016edc167c20e6ebd6a4a18',1732643644,0);
INSERT INTO event VALUES('fc22016edc54a1f8300cf0dc888',X'800328581b00000066633232303136656463353461316638333030636630646338383871005805000000453030343571014b25580000000071028671034e580e00000052657461696c204d616e61676572710468025d71055d71065d71075d71084a3c0b46675d71098974710a2e','E0045','Retail Manager','',1732643644,0);
INSERT INTO event VALUES('fc22016edc8457920e3fd0dc5e',X'800328581a000000666332323031366564633834353739323065336664306463356571005805000000453030343671014b1958000000007102867103284b004b004b00284b004b004dc4078974710458040000003139383871054a3a5725004b007471065813000000427573696e657373204d616e6167656d656e74710768025d71085d71095d710a5d710b4a3c0b46675d710c8974710d2e','E0046','Business Management','',1732643644,0);
INSERT INTO event VALUES('fc22016edd4390144686e40f40d',X'800328581b00000066633232303136656464343339303134343638366534306634306471005805000000453030343771014b0c58000000007102867103284b004b004b00284b034b064d6f0789747104580a00000033204a554e203139303371054a8dde24004b0074710658170000004269727468206f66204d61726a6f726965204f686d616e7107581b00000066633232303136656464383438373032663830303033316534383771085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0047','Birth of Marjorie Ohman','fc22016edd848702f800031e487',1732643644,0);
INSERT INTO event VALUES('fc22016eddc758aa948f1f755a7',X'800328581b00000066633232303136656464633735386161393438663166373535613771005805000000453030343871014b0d58000000007102867103284b004b004b00284b164b064dbc0789747104580b0000003232204a554e203139383071054a7d4c25004b0074710658170000004465617468206f66204d61726a6f726965204f686d616e7107581b00000066633232303136656234643565343731346163336363636238303171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0048','Death of Marjorie Ohman','fc22016eb4d5e4714ac3cccb801',1732643644,0);
INSERT INTO event VALUES('fc22016edec54c0ef9c0e4f7959',X'800328581b00000066633232303136656465633534633065663963306534663739353971005805000000453030343971014b0c58000000007102867103284b004b004b00284b024b074dae0789747104580a00000032204a554c203139363671054a8d3825004b0074710658140000004269727468206f6620446172637920486f726e657107581b00000066633232303136656466303238323466633965663034666536666271085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0049','Birth of Darcy Horne','fc22016edf02824fc9ef04fe6fb',1732643644,0);
INSERT INTO event VALUES('fc22016edfb4848ad6e35e6c6f7',X'800328581b00000066633232303136656466623438343861643665333565366336663771005805000000453030353071014b0c58000000007102867103284b004b004b00284b0d4b034d8f0789747104580b0000003133204d4152203139333571054ae30b25004b0074710658140000004269727468206f66204c6c6f796420536d6974687107581b00000066633232303136656163643137366261316532353663313663643171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0050','Birth of Lloyd Smith','fc22016eacd176ba1e256c16cd1',1732643644,0);
INSERT INTO event VALUES('fc22016ee134ed2332f2a5c42ce',X'800328581b00000066633232303136656531333465643233333266326135633432636571005805000000453030353171014b0c58000000007102867103284b004b004b00284b164b0b4d8d0789747104580b0000003232204e4f56203139333371054a070a25004b00747106581c0000004269727468206f6620416c696365205061756c61205065726b696e737107581b00000066633232303136656138303535356139383038323965613862633471085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0051','Birth of Alice Paula Perkins','fc22016ea80555a980829ea8bc4',1732643644,0);
INSERT INTO event VALUES('fc22016ee2c526faae99dbd4f8e',X'800328581b00000066633232303136656532633532366661616539396462643466386571005805000000453030353271014b0c58000000007102867103284b004b004b00284b104b094dc70789747104580b000000313620534550203139393171054a845c25004b0074710658190000004269727468206f66204c61727320506574657220536d6974687107581b00000066633232303136656533303238343561383362346535363265326471085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0052','Birth of Lars Peter Smith','fc22016ee302845a83b4e562e2d',1732643644,0);
INSERT INTO event VALUES('fc22016ee341497415b6539d768',X'800328581b00000066633232303136656533343134393734313562363533396437363871005805000000453030353371014b0b580000000071028671034e680268025d71045d71055d71065d71074a3c0b46675d7108897471092e','E0053','','',1732643644,0);
INSERT INTO event VALUES('fc22016ee436439ecf5b78c47b5',X'800328581b00000066633232303136656534333634333965636635623738633437623571005805000000453030353471014b0c58000000007102867103284b004b004b00284b0e4b094d080789747104580b000000313420534550203138303071054a014c24004b0074710658170000004269727468206f6620456c6e61204a6566666572736f6e7107581b00000066633232303136656231393564663963313363353638353666306171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0054','Birth of Elna Jefferson','fc22016eb195df9c13c56856f0a',1732643644,0);
INSERT INTO event VALUES('fc22016ee4b74d789066f10c1e0',X'800328581b00000066633232303136656534623734643738393036366631306331653071005805000000453030353571014b0d580000000071028671034e58170000004465617468206f6620456c6e61204a6566666572736f6e7104581b00000066633232303136656335623664393766656665396263376661643271055d71065d71075d71085d71094a3c0b46675d710a8974710b2e','E0055','Death of Elna Jefferson','fc22016ec5b6d97fefe9bc7fad2',1732643644,0);
INSERT INTO event VALUES('fc22016ee533bf02683f2d41aa4',X'800328581b00000066633232303136656535333362663032363833663264343161613471005805000000453030353671014b1658000000007102867103284b004b004b00284b104b094d080789747104580b000000313620534550203138303071054a034c24004b00747106581d000000436872697374656e696e67206f6620456c6e61204a6566666572736f6e7107581b00000066633232303136656231393564663963313363353638353666306171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0056','Christening of Elna Jefferson','fc22016eb195df9c13c56856f0a',1732643644,0);
INSERT INTO event VALUES('fc22016ee682cac18141ba536f0',X'800328581b00000066633232303136656536383263616331383134316261353336663071005805000000453030353771014b0c58000000007102867103284b004b004b00284b184b054da90789747104580b0000003234204d4159203139363171054a443125004b00747106581c0000004269727468206f6620456477696e204d69636861656c20536d6974687107581b00000066633232303136656537313334363335666261363733656164616671085d7109581b000000666332323031366565366537653832323262333463396538636439710a615d710b5d710c5d710d4a3c0b46675d710e8974710f2e','E0057','Birth of Edwin Michael Smith','fc22016ee7134635fba673eadaf',1732643644,0);
INSERT INTO event VALUES('fc22016ee74276465c1c0923b37',X'800328581b00000066633232303136656537343237363436356331633039323362333771005805000000453030353871014b25580000000071028671034e5811000000536f66747761726520456e67696e656572710468025d71055d7106581b0000006663323230313665653737343163626661663763303434313935347107615d71085d71094a3c0b46675d710a8974710b2e','E0058','Software Engineer','',1732643644,0);
INSERT INTO event VALUES('fc22016ee795ba60e15a1206517',X'800328581b00000066633232303136656537393562613630653135613132303635313771005805000000453030353971014b1a58000000007102867103284b004b044b00284b004b004dbb07894b004b004dc007897471045811000000424554203139373920414e44203139383471054a634a25004b007471065820000000456475636174696f6e206f6620456477696e204d69636861656c20536d6974687107581b00000066633232303136656537643232326231623162376132653562323071085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0059','Education of Edwin Michael Smith','fc22016ee7d222b1b1b7a2e5b20',1732643644,0);
INSERT INTO event VALUES('fc22016ee814202f07b8bacc211',X'800328581b00000066633232303136656538313432303266303762386261636332313171005805000000453030363071014b1958000000007102867103284b004b004b00284b004b004dc0078974710458040000003139383471054a855125004b007471065808000000422e532e452e452e710768025d71085d71095d710a5d710b4a3c0b46675d710c8974710d2e','E0060','B.S.E.E.','',1732643644,0);
INSERT INTO event VALUES('fc22016ee921d461d8143d29b5f',X'800328581b00000066633232303136656539323164343631643831343364323962356671005805000000453030363171014b0c58000000007102867103284b004b004b00284b1d4b0b4d280789747104580b0000003239204e4f56203138333271054af57924004b00747106581c0000004269727468206f66204b65727374696e612048616e73646f747465727107581b00000066633232303136656539363164613332383362316363656363336571085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0061','Birth of Kerstina Hansdotter','fc22016ee961da3283b1ccecc3e',1732643644,0);
INSERT INTO event VALUES('fc22016ee9a5990ad8708f65881',X'800328581b00000066633232303136656539613539393061643837303866363538383171005805000000453030363271014b0d58000000007102867103284b004b014b00284b004b004d7407897471045808000000424546203139303871054a16e524004b00747106581c0000004465617468206f66204b65727374696e612048616e73646f747465727107581b00000066633232303136656335623664393766656665396263376661643271085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0062','Death of Kerstina Hansdotter','fc22016ec5b6d97fefe9bc7fad2',1732643644,0);
INSERT INTO event VALUES('fc22016eea9797ede6f5df2377',X'800328581a000000666332323031366565613937393765646536663564663233373771005805000000453030363371014b0c58000000007102867103284b004b044b00284b004b004d0207894b004b004d0407897471045811000000424554203137393420414e44203137393671054a724224004b0074710658150000004269727468206f66204d617274696e20536d6974687107581b00000066633232303136656561653534336433336539363764343564313671085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0063','Birth of Martin Smith','fc22016eeae543d33e967d45d16',1732643644,0);
INSERT INTO event VALUES('fc22016eeb135d3ce6f42378a5c',X'800328581b00000066633232303136656562313335643363653666343233373861356371005805000000453030363471014b0d580000000071028671034e58150000004465617468206f66204d617274696e20536d6974687104581b00000066633232303136656335623664393766656665396263376661643271055d71065d71075d71085d71094a3c0b46675d710a8974710b2e','E0064','Death of Martin Smith','fc22016ec5b6d97fefe9bc7fad2',1732643644,0);
INSERT INTO event VALUES('fc22016eecc27032680b3c9e24c',X'800328581b00000066633232303136656563633237303332363830623363396532346371005805000000453030363571014b0c58000000007102867103284b004b004b00284b1d4b014d220789747104580b0000003239204a414e203138323671054a357024004b0074710658160000004269727468206f6620496e67656d616e20536d6974687107581b00000066633232303136656231393564663963313363353638353666306171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0065','Birth of Ingeman Smith','fc22016eb195df9c13c56856f0a',1732643644,0);
INSERT INTO event VALUES('fc22016eee2b1a1b84550baa68',X'800328581a000000666332323031366565653262316131623834353530626161363871005805000000453030363671014b0c58000000007102867103284b004b004b00284b054b024da80789747104580a0000003520464542203139363071054a6a2f25004b00747106581d0000004269727468206f66204d61726a6f72696520416c69636520536d6974687107581b00000066633232303136656537313334363335666261363733656164616671085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0066','Birth of Marjorie Alice Smith','fc22016ee7134635fba673eadaf',1732643644,0);
INSERT INTO event VALUES('fc22016eef52dcc7c81830a1525',X'800328581b00000066633232303136656566353264636337633831383330613135323571005805000000453030363771014b0c58000000007102867103284b004b004b00284b024b0c4d8f0789747104580a0000003220444543203139333571054aeb0c25004b00747106581b0000004269727468206f66204a616e697320456c61696e6520477265656e710768025d71085d71095d710a5d710b4a3c0b46675d710c8974710d2e','E0067','Birth of Janis Elaine Green','',1732643644,0);
INSERT INTO event VALUES('fc22016ef00e8125d67f3407bb',X'800328581a000000666332323031366566303065383132356436376633343037626271005805000000453030363871014b0c58000000007102867103284b004b004b00284b1a4b064dcc0789747104580b0000003236204a554e203139393671054a556325004b00747106581c0000004269727468206f66204d61736f6e204d69636861656c20536d6974687107581b00000066633232303136656265623236373432653538643832343839666271085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0068','Birth of Mason Michael Smith','fc22016ebeb26742e58d82489fb',1732643644,0);
INSERT INTO event VALUES('fc22016ef093600b42fb443c51c',X'800328581b00000066633232303136656630393336303062343266623434336335316371005805000000453030363971014b1658000000007102867103284b004b004b00284b0a4b074dcc0789747104580b0000003130204a554c203139393671054a636325004b007471065822000000436872697374656e696e67206f66204d61736f6e204d69636861656c20536d6974687107581b00000066633232303136656266323666333736393034616437613537643271085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0069','Christening of Mason Michael Smith','fc22016ebf26f376904ad7a57d2',1732643644,0);
INSERT INTO event VALUES('fc22016ef1b5b9fa89d7b58e2c3',X'800328581b00000066633232303136656631623562396661383964376235386532633371005805000000453030373071014b0c58000000007102867103284b004b034b00284b004b004d5e07897471045808000000414254203138383671054ab4c524004b0074710658160000004269727468206f6620456477696e2057696c6c617264710768025d71085d71095d710a5d710b4a3c0b46675d710c8974710d2e','E0070','Birth of Edwin Willard','',1732643644,0);
INSERT INTO event VALUES('fc22016ef265e44a01f6d27e519',X'800328581b00000066633232303136656632363565343461303166366432376535313971005805000000453030373171014b0c58000000007102867103284b004b024b00284b004b004d1f07897471045808000000414654203138323371054ad16b24004b0074710658140000004269727468206f6620496e67617220536d6974687107581b00000066633232303136656231393564663963313363353638353666306171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0071','Birth of Ingar Smith','fc22016eb195df9c13c56856f0a',1732643644,0);
INSERT INTO event VALUES('fc22016ef3932c8fc2a6a9d5cd5',X'800328581b00000066633232303136656633393332633866633261366139643563643571005805000000453030373271014b0c58000000007102867103284b004b004b00284b074b044d670789747104580a0000003720415052203138393571054aebd224004b0074710658160000004269727468206f6620486a616c6d617220536d6974687107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0072','Birth of Hjalmar Smith','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016ef4121ac562225361199',X'800328581b00000066633232303136656634313231616335363232323533363131393971005805000000453030373371014b0d58000000007102867103284b004b004b00284b1a4b064db70789747104580b0000003236204a554e203139373571054a5e4525004b0074710658160000004465617468206f6620486a616c6d617220536d6974687107581b00000066633232303136656234643565343731346163336363636238303171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0073','Death of Hjalmar Smith','fc22016eb4d5e4714ac3cccb801',1732643644,0);
INSERT INTO event VALUES('fc22016ef49756519c09abebf83',X'800328581b00000066633232303136656634393735363531396330396162656266383371005805000000453030373471014b0f58000000007102867103284b004b004b00284b034b064d670789747104580a00000033204a554e203138393571054a24d324004b0074710658180000004261707469736d206f6620486a616c6d617220536d6974687107581b00000066633232303136656634653633346133396230636133353562613271085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0074','Baptism of Hjalmar Smith','fc22016ef4e634a39b0ca355ba2',1732643644,0);
INSERT INTO event VALUES('fc22016ef52202bfcbedd840a42',X'800328581b00000066633232303136656635323230326266636265646438343061343271005805000000453030373571014b005804000000496d6d697102867103284b004b004b00284b0e4b0b4d780789747104580b0000003134204e4f56203139313271054a09ec24004b0074710658000000007107581b00000066633232303136656430393162313032666431656339316530333071085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0075','','fc22016ed091b102fd1ec91e030',1732643644,0);
INSERT INTO event VALUES('fc22016ef6d4df8f7bec4c2c1aa',X'800328581b00000066633232303136656636643464663866376265633463326331616171005805000000453030373671014b0c58000000007102867103284b004b004b00284b1b4b094d440789747104580b000000323720534550203138363071054aa9a124004b0074710658130000004269727468206f6620456d696c20536d6974687107581b00000066633232303136656461363431383562623534623535393062643571085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0076','Birth of Emil Smith','fc22016eda64185bb54b5590bd5',1732643644,0);
INSERT INTO event VALUES('fc22016ef8f587947efc0f53687',X'800328581b00000066633232303136656638663538373934376566633066353336383771005805000000453030373771014b0158000000007102867103284b004b034b00284b004b004d1807897471045808000000414254203138313671054ad46124004b00747106582b0000004d61727269616765206f66204d617274696e20536d69746820616e6420456c6e61204a6566666572736f6e7107581b00000066633232303136656231393564663963313363353638353666306171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0077','Marriage of Martin Smith and Elna Jefferson','fc22016eb195df9c13c56856f0a',1732643644,0);
INSERT INTO event VALUES('fc22016efab230827e2c3d397aa',X'800328581b00000066633232303136656661623233303832376532633364333937616171005805000000453030373871014b0158000000007102867103284b004b034b00284b004b004dfe06897471045808000000414254203137393071054abd3c24004b00747106582f0000004d61727269616765206f6620496e67656d616e20536d69746820616e64204d61727461204572696373646f747465727107581b00000066633232303136656335623664393766656665396263376661643271085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0078','Marriage of Ingeman Smith and Marta Ericsdotter','fc22016ec5b6d97fefe9bc7fad2',1732643644,0);
INSERT INTO event VALUES('fc22016efbb6c216b4e6c864697',X'800328581b00000066633232303136656662623663323136623465366338363436393771005805000000453030373971014b0158000000007102867103284b004b004b00284b0c4b074dc20789747104580b0000003132204a554c203139383671054a205525004b00747106582c0000004d61727269616765206f662045726963204c6c6f796420536d69746820616e6420446172637920486f726e657107581b00000066633232303136656662663734363838303831326330333135346271085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0079','Marriage of Eric Lloyd Smith and Darcy Horne','fc22016efbf746880812c03154b',1732643644,0);
INSERT INTO event VALUES('fc22016efc951ccbfd033887793',X'800328581b00000066633232303136656663393531636362666430333338383737393371005805000000453030383071014b0158000000007102867103284b004b004b00284b184b084d5c0789747104580b000000323420415547203138383471054ac5c324004b00747106582c0000004d61727269616765206f66204d61676e657320536d69746820616e6420416e6e6120537472656966666572747107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0080','Marriage of Magnes Smith and Anna Streiffert','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016efd7368e13cefeb2663d',X'800328581b00000066633232303136656664373336386531336365666562323636336471005805000000453030383171014b0158000000007102867103284b004b004b00284b044b064da20789747104580a00000034204a554e203139353471054a522725004b0074710658360000004d61727269616765206f66204a6f686e20486a616c6d617220536d69746820616e6420416c696365205061756c61205065726b696e737107581b00000066633232303136656138303535356139383038323965613862633471085d7109581b000000666332323031366566646334336665633263306436613134313230710a615d710b5d710c5d710d4a3c0b46675d710e8974710f2e','E0081','Marriage of John Hjalmar Smith and Alice Paula Perkins','fc22016ea80555a980829ea8bc4',1732643644,0);
INSERT INTO event VALUES('fc22016efec4f6b5827bfe6d796',X'800328581b00000066633232303136656665633466366235383237626665366437393671005805000000453030383271014b0158000000007102867103284b004b004b00284b1b4b054dcb0789747104580b0000003237204d4159203139393571054ac96125004b0074710658340000004d61727269616765206f6620456477696e204d69636861656c20536d69746820616e64204a616e69636520416e6e204164616d737107581b00000066633232303136656666303234373133376532613862313333396371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0082','Marriage of Edwin Michael Smith and Janice Ann Adams','fc22016eff0247137e2a8b1339c',1732643644,0);
INSERT INTO event VALUES('fc22016eff42fb57f1d2e2dbd57',X'800328581b00000066633232303136656666343266623537663164326532646264353771005805000000453030383371014b0658000000007102867103284b004b004b00284b054b0a4dca0789747104580a00000035204f4354203139393471054adf6025004b007471065836000000456e676167656d656e74206f6620456477696e204d69636861656c20536d69746820616e64204a616e69636520416e6e204164616d737107581b00000066633232303136656163643137366261316532353663313663643171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0083','Engagement of Edwin Michael Smith and Janice Ann Adams','fc22016eacd176ba1e256c16cd1',1732643644,0);
INSERT INTO event VALUES('fc22016f00d5869d58746eda3c9',X'800328581b00000066633232303136663030643538363964353837343665646133633971005805000000453030383471014b0158000000007102867103284b004b034b00284b004b004d4007897471045808000000414254203138353671054ae69a24004b0074710658300000004d61727269616765206f66204d617274696e20536d69746820616e64204b65727374696e612048616e73646f74746572710768025d71085d71095d710a5d710b4a3c0b46675d710c8974710d2e','E0084','Marriage of Martin Smith and Kerstina Hansdotter','',1732643644,0);
INSERT INTO event VALUES('fc22016f0214257ae7b3d228888',X'800328581b00000066633232303136663032313432353761653762336432323838383871005805000000453030383571014b0158000000007102867103284b004b004b00284b1b4b0b4d5d0789747104580b0000003237204e4f56203138383571054a91c524004b0074710658310000004d61727269616765206f662047757374616620536d6974682c2053722e20616e6420416e6e612048616e73646f747465727107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0085','Marriage of Gustaf Smith, Sr. and Anna Hansdotter','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016f044cf01f92fb39e08e',X'800328581a000000666332323031366630343463663031663932666233396530386571005805000000453030383671014b0158000000007102867103284b004b034b00284b004b004d7607897471045808000000414254203139313071054af1e724004b0074710658300000004d61727269616765206f6620456477696e2057696c6c61726420616e64204b6972737469204d6172696520536d697468710768025d71085d71095d710a5d710b4a3c0b46675d710c8974710d2e','E0086','Marriage of Edwin Willard and Kirsti Marie Smith','',1732643644,0);
INSERT INTO event VALUES('fc22016f0556d0e7a8d2c4e56cf',X'800328581b00000066633232303136663035353664306537613864326334653536636671005805000000453030383771014b0158000000007102867103284b004b004b00284b1e4b0b4d780789747104580b0000003330204e4f56203139313271054a19ec24004b0074710658440000004d61727269616765206f66204865726d616e204a756c697573204e69656c73656e20616e642041737472696420536865726d616e6e61204175677573746120536d6974687107581b00000066633232303136656166303332656235303662373731333936336371085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0087','Marriage of Herman Julius Nielsen and Astrid Shermanna Augusta Smith','fc22016eaf032eb506b7713963c',1732643644,0);
INSERT INTO event VALUES('fc22016f0625431ea2ef504e44d',X'800328581b00000066633232303136663036323534333165613265663530346534346471005805000000453030383871014b0158000000007102867103284b004b004b00284b1f4b0a4d870789747104580b0000003331204f4354203139323771054a610125004b00747106582c0000004d61727269616765206f6620486a616c6d617220536d69746820616e64204d61726a6f726965204f686d616e7107581b00000066633232303136656234643565343731346163336363636238303171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0088','Marriage of Hjalmar Smith and Marjorie Ohman','fc22016eb4d5e4714ac3cccb801',1732643644,0);
INSERT INTO event VALUES('fc22016f0743d4bf7d577fe9d2a',X'800328581b00000066633232303136663037343364346266376435373766653964326171005805000000453030383971014b0158000000007102867103284b004b034b00284b004b004d8007897471045808000000414254203139323071054a35f624004b0074710658290000004d61727269616765206f662047757320536d69746820616e64204576656c796e204d69636861656c73710768025d71085d71095d710a5d710b4a3c0b46675d710c8974710d2e','E0089','Marriage of Gus Smith and Evelyn Michaels','',1732643644,0);
INSERT INTO event VALUES('fc22016f07e7932d3b852dcdb84',X'800328581b00000066633232303136663037653739333264336238353264636462383471005805000000453030393071014b0158000000007102867103284b004b004b00284b0a4b084da60789747104580b000000313020415547203139353871054a4a2d25004b00747106582e0000004d61727269616765206f66204c6c6f796420536d69746820616e64204a616e697320456c61696e6520477265656e7107581b00000066633232303136656163643137366261316532353663313663643171085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','E0090','Marriage of Lloyd Smith and Janis Elaine Green','fc22016eacd176ba1e256c16cd1',1732643644,0);
CREATE TABLE media (handle VARCHAR(50) PRIMARY KEY NOT NULL, blob_data BLOB, gramps_id TEXT, path TEXT, mime TEXT, desc TEXT, checksum TEXT, change INTEGER, private INTEGER);
CREATE TABLE place (handle VARCHAR(50) PRIMARY KEY NOT NULL, enclosed_by VARCHAR(50), blob_data BLOB, gramps_id TEXT, title TEXT, long TEXT, lat TEXT, code TEXT, change INTEGER, private INTEGER);
INSERT INTO place VALUES('fc22016ea72b3f5080ed2ba3da','',X'800328581a0000006663323230313665613732623366353038306564326261336461710058050000005030303030710158200000004cc3b664657275702c204d616c6dc3b6687573204cc3a46e2c2053776564656e71025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0000','Lderup, Malmhus Ln, Sweden','','','',1732643644,0);
INSERT INTO place VALUES('fc22016ea80555a980829ea8bc4','',X'800328581b00000066633232303136656138303535356139383038323965613862633471005805000000503030303171015816000000537061726b732c20576173686f6520436f2e2c204e5671025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0001','Sparks, Washoe Co., NV','','','',1732643644,0);
INSERT INTO place VALUES('fc22016eacd176ba1e256c16cd1','',X'800328581b0000006663323230313665616364313736626131653235366331366364317100580500000050303030327101582400000053616e204672616e636973636f2c2053616e204672616e636973636f20436f2e2c20434171025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0002','San Francisco, San Francisco Co., CA','','','',1732643644,0);
INSERT INTO place VALUES('fc22016eaf032eb506b7713963c','',X'800328581b0000006663323230313665616630333265623530366237373133393633637100580500000050303030337101581900000052c3b86e6e652c20426f726e686f6c6d2c2044656e6d61726b71025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0003','Rnne, Bornholm, Denmark','','','',1732643644,0);
INSERT INTO place VALUES('fc22016eb195df9c13c56856f0a','',X'800328581b00000066633232303136656231393564663963313363353638353666306171005805000000503030303471015822000000476c61647361782c204b7269737469616e73746164204cc3a46e2c2053776564656e71025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0004','Gladsax, Kristianstad Ln, Sweden','','','',1732643644,0);
INSERT INTO place VALUES('fc22016eb4d5e4714ac3cccb801','',X'800328581b0000006663323230313665623464356534373134616333636363623830317100580500000050303030357101581400000052656e6f2c20576173686f6520436f2e2c204e5671025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0005','Reno, Washoe Co., NV','','','',1732643644,0);
INSERT INTO place VALUES('fc22016ebeb26742e58d82489fb','',X'800328581b00000066633232303136656265623236373432653538643832343839666271005805000000503030303671015818000000486179776172642c20416c616d65646120436f2e2c20434171025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0006','Hayward, Alameda Co., CA','','','',1732643644,0);
INSERT INTO place VALUES('fc22016ebf26f376904ad7a57d2','',X'800328581b0000006663323230313665626632366633373639303461643761353764327100580500000050303030377101582b000000436f6d6d756e6974792050726573627974657269616e204368757263682c2044616e76696c6c652c20434171025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0007','Community Presbyterian Church, Danville, CA','','','',1732643644,0);
INSERT INTO place VALUES('fc22016ec5b6d97fefe9bc7fad2','',X'800328581b0000006663323230313665633562366439376665666539626337666164327100580500000050303030387101580600000053776564656e71025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0008','Sweden','','','',1732643644,0);
INSERT INTO place VALUES('fc22016ecf930ed87f56def69f','',X'800328581a00000066633232303136656366393330656438376635366465663639667100580500000050303030397101582300000047726f73746f72702c204b7269737469616e73746164204cc3a46e2c2053776564656e71025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0009','Grostorp, Kristianstad Ln, Sweden','','','',1732643644,0);
INSERT INTO place VALUES('fc22016ed091b102fd1ec91e030','',X'800328581b00000066633232303136656430393162313032666431656339316530333071005805000000503030313071015813000000436f70656e686167656e2c2044656e6d61726b71025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0010','Copenhagen, Denmark','','','',1732643644,0);
INSERT INTO place VALUES('fc22016ed617d756d6f13a67344','',X'800328581b00000066633232303136656436313764373536643666313361363733343471005805000000503030313171015816000000486f79612f4a6f6e612f486f69612c2053776564656e71025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0011','Hoya/Jona/Hoia, Sweden','','','',1732643644,0);
INSERT INTO place VALUES('fc22016eda64185bb54b5590bd5','',X'800328581b0000006663323230313665646136343138356262353462353539306264357100580500000050303031327101582500000053696d72697368616d6e2c204b7269737469616e73746164204cc3a46e2c2053776564656e71025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0012','Simrishamn, Kristianstad Ln, Sweden','','','',1732643644,0);
INSERT INTO place VALUES('fc22016edc167c20e6ebd6a4a18','',X'800328581b000000666332323031366564633136376332306536656264366134613138710058050000005030303133710158180000004672656d6f6e742c20416c616d65646120436f2e2c20434171025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0013','Fremont, Alameda Co., CA','','','',1732643644,0);
INSERT INTO place VALUES('fc22016edd848702f800031e487','',X'800328581b0000006663323230313665646438343837303266383030303331653438377100580500000050303031347101581600000044656e7665722c2044656e76657220436f2e2c20434f71025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0014','Denver, Denver Co., CO','','','',1732643644,0);
INSERT INTO place VALUES('fc22016edf02824fc9ef04fe6fb','',X'800328581b0000006663323230313665646630323832346663396566303466653666627100580500000050303031357101581e00000053616372616d656e746f2c2053616372616d656e746f20436f2e2c20434171025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0015','Sacramento, Sacramento Co., CA','','','',1732643644,0);
INSERT INTO place VALUES('fc22016ee302845a83b4e562e2d','',X'800328581b0000006663323230313665653330323834356138336234653536326532647100580500000050303031367101581a00000053616e746120526f73612c20536f6e6f6d6120436f2e2c20434171025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0016','Santa Rosa, Sonoma Co., CA','','','',1732643644,0);
INSERT INTO place VALUES('fc22016ee7134635fba673eadaf','',X'800328581b0000006663323230313665653731333436333566626136373365616461667100580500000050303031377101581d00000053616e204a6f73652c2053616e746120436c61726120436f2e2c20434171025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0017','San Jose, Santa Clara Co., CA','','','',1732643644,0);
INSERT INTO place VALUES('fc22016ee7d222b1b1b7a2e5b20','',X'800328581b0000006663323230313665653764323232623162316237613265356232307100580500000050303031387101580b0000005543204265726b656c657971025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0018','UC Berkeley','','','',1732643644,0);
INSERT INTO place VALUES('fc22016ee961da3283b1ccecc3e','',X'800328581b00000066633232303136656539363164613332383362316363656363336571005805000000503030313971015823000000536d6573746f72702c204b7269737469616e73746164204cc3a46e2c2053776564656e71025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0019','Smestorp, Kristianstad Ln, Sweden','','','',1732643644,0);
INSERT INTO place VALUES('fc22016eeae543d33e967d45d16','',X'800328581b00000066633232303136656561653534336433336539363764343564313671005805000000503030323071015822000000546f6d6d6172702c204b7269737469616e73746164204cc3a46e2c2053776564656e71025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0020','Tommarp, Kristianstad Ln, Sweden','','','',1732643644,0);
INSERT INTO place VALUES('fc22016ef4e634a39b0ca355ba2','',X'800328581b0000006663323230313665663465363334613339623063613335356261327100580500000050303032317101581800000052c3b86e6e6520426f726e686f6c6d2c2044656e6d61726b71025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0021','Rnne Bornholm, Denmark','','','',1732643644,0);
INSERT INTO place VALUES('fc22016efbf746880812c03154b','',X'800328581b00000066633232303136656662663734363838303831326330333135346271005805000000503030323271015816000000576f6f646c616e642c20596f6c6f20436f2e2c20434171025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0022','Woodland, Yolo Co., CA','','','',1732643644,0);
INSERT INTO place VALUES('fc22016eff0247137e2a8b1339c','',X'800328581b0000006663323230313665666630323437313337653261386231333339637100580500000050303032337101581e00000053616e2052616d6f6e2c20436f6e746120436f73746120436f2e2c20434171025800000000710368035d710468024e68038771055d71064affffffff680386710768035d71085d71095d710a5d710b5d710c4a3c0b46675d710d8974710e2e','P0023','San Ramon, Conta Costa Co., CA','','','',1732643644,0);
CREATE TABLE repository (handle VARCHAR(50) PRIMARY KEY NOT NULL, blob_data BLOB, gramps_id TEXT, name TEXT, change INTEGER, private INTEGER);
INSERT INTO repository VALUES('fc22016f0961a42d74ae0311b8d',X'800328581b00000066633232303136663039363161343264373461653033313162386471005805000000523030303271014b015800000000710286710358170000004e657720596f726b205075626c6963204c69627261727971045d71055d710628895d71075d71084e28581400000035746820417665206174203432207374726565747109680258080000004e657720596f726b710a680258080000004e657720596f726b710b5803000000555341710c58050000003131313131710d680274710e74710f615d71104a3c0b46675d7111897471122e','R0002','New York Public Library',1732643644,0);
INSERT INTO repository VALUES('fc22016f0b84ae896becb7fbac1',X'800328581b00000066633232303136663062383461653839366265636237666261633171005805000000523030303371014b0158000000007102867103581300000041756e74204d6172746861277320417474696371045d7105581b0000006663323230313666306263343432633731663763643864356338337106615d710728895d71085d71094e28580b000000313233204d61696e205374710a68025809000000536f6d6576696c6c65710b680258020000005354710c5803000000555341710d6802680274710e74710f615d711028895821000000687474703a2f2f6c6962726172792e6772616d70732d70726f6a6563742e6f7267711168024b026802867112747113614a3c0b46675d7114897471152e','R0003','Aunt Martha''s Attic',1732643644,0);
CREATE TABLE note (handle VARCHAR(50) PRIMARY KEY NOT NULL, blob_data BLOB, gramps_id TEXT, format INTEGER, change INTEGER, private INTEGER);
INSERT INTO note VALUES('fc22016ed9570d9d42a8ea451f4',X'800328581b000000666332323031366564393537306439643432613865613435316634710058050000004e303030307101583e0000005769746e657373206e616d653a204a6f686e20446f650a5769746e65737320636f6d6d656e743a205468697320697320612073696d706c6520746573742e71025d71038671044b004b0a580000000071058671064a3c0b46675d7107897471082e','N0000',0,1732643644,0);
INSERT INTO note VALUES('fc22016ee7741cbfaf7c0441954',X'800328581b000000666332323031366565373734316362666166376330343431393534710058050000004e30303031710158150000005769746e657373206e616d653a204e6f204e616d6571025d71038671044b004b0a580000000071058671064a3c0b46675d7107897471082e','N0001',0,1732643644,0);
INSERT INTO note VALUES('fc22016ecc825261b716962da14',X'800328581b000000666332323031366563633832353236316237313639363264613134710058050000004e303030327101587500000042494f4752415048590a4d617274696e20776173206c6973746564206173206265696e672061204875736d616e2c20286f776e696e67206120686f757365206173206f70706f73656420746f2061206661726d2920696e2074686520686f757365207265636f726473206f6620476c61647361782e71025d71038671044b004b04580000000071058671064a3c0b46675d7107897471082e','N0002',0,1732643644,0);
INSERT INTO note VALUES('fc22016ef6153997c63c1a4205a',X'800328581b000000666332323031366566363135333939376336336331613432303561710058050000004e30303033710158e302000042494f4752415048590a0a486a616c6d6172207361696c65642066726f6d20436f70656e686167656e2c2044656e6d61726b206f6e20746865204f534341522049492c203134204e6f76656d6265722031393132206172726976696e6720696e204e657720596f726b203237204e6f76656d62657220313931322e2048652077617320736576656e7465656e207965617273206f6c642e204f6e2074686520736869702070617373656e676572206c6973742068697320747261646520776173206c6973746564206173206120426c61636b736d6974682e202048652063616d6520746f2052656e6f2c204e657661646120616e64206c6976656420776974682068697320736973746572204d6172696520666f7220612074696d65206265666f726520736574746c696e6720696e20537061726b732e20486520776f726b656420666f7220536f75746865726e2050616369666963205261696c726f616420617320612063617220696e73706563746f7220666f7220612074696d652c207468656e2077656e7420746f20776f726b20666f72205374616e64617264204f696c0a436f6d70616e792e20486520656e6c697374656420696e207468652061726d7920617420537061726b73203720446563656d626572203139313720616e6420736572766564206173206120436f72706f72616c20696e20746865204d65646963616c20436f727020756e74696c20686973206469736368617267652031322041756775737420313931392061742074686520507265736964696f20696e2053616e204672616e636973636f2c2043616c69666f726e69612e20426f746820686520616e64204d61726a6f726965206172652062757269656420696e20746865204d61736f6e6963204d656d6f7269616c2047617264656e73204d6175736f6c65756d20696e2052656e6f2c206865207468652033307468204a756e6520313937352c20616e6420736865207468652032357468206f66204a756e6520313938302e71025d71038671044b004b04580000000071058671064a3c0b46675d7107897471082e','N0003',0,1732643644,0);
INSERT INTO note VALUES('fc22016f097493fa553a97101ea',X'800328581b000000666332323031366630393734393366613535336139373130316561710058050000004e30303034710158290000004275742041756e74204d6172746861207374696c6c206b6565707320746865206f726967696e616c2171025d71038671044b004b0c580000000071058671064a3c0b46675d7107897471082e','N0004',0,1732643644,0);
INSERT INTO note VALUES('fc22016f0a41a139e1fe6ceee69',X'800328581b000000666332323031366630613431613133396531666536636565653639710058050000004e3030303571015835000000546865207265706f7369746f7279207265666572656e63652066726f6d2074686520736f7572636520697320696d706f7274616e7471025d71038671044b004b0c580000000071058671064a3c0b46675d7107897471082e','N0005',0,1732643644,0);
INSERT INTO note VALUES('fc22016f0bc442c71f7cd8d5c83',X'800328581b000000666332323031366630626334343263373166376364386435633833710058050000004e3030303671015815000000536f6d65206e6f7465206f6e20746865207265706f71025d71038671044b004b0f580000000071058671064a3c0b46675d7107897471082e','N0006',0,1732643644,0);
CREATE TABLE tag (handle VARCHAR(50) PRIMARY KEY NOT NULL, blob_data BLOB, name TEXT, color VARCHAR(13), priority INTEGER, change INTEGER);
CREATE TABLE reference (obj_handle VARCHAR(50), obj_class TEXT, ref_handle VARCHAR(50), ref_class TEXT);
INSERT INTO reference VALUES('fc22016ea38fb2815a62c132bd','Person','fc22016ea4d11615526867948c7','Event');
INSERT INTO reference VALUES('fc22016ea38fb2815a62c132bd','Person','fc22016ea841f4f9f775dac18aa','Family');
INSERT INTO reference VALUES('fc22016ea38fb2815a62c132bd','Person','fc22016ea7b3bcd2cecd5e6c2a4','Event');
INSERT INTO reference VALUES('fc22016eabe2fbe08034b3cd1e3','Person','fc22016eac72d77221cab0a35a0','Event');
INSERT INTO reference VALUES('fc22016eabe2fbe08034b3cd1e3','Person','fc22016ead24fab26aa8a2054fb','Family');
INSERT INTO reference VALUES('fc22016eadf4fd9bcbbc79d57bb','Person','fc22016eb0a6034e7e6b9eaa697','Family');
INSERT INTO reference VALUES('fc22016eadf4fd9bcbbc79d57bb','Person','fc22016eae0c31a3146a475522','Event');
INSERT INTO reference VALUES('fc22016eadf4fd9bcbbc79d57bb','Person','fc22016eafb20d8a9693e336162','Event');
INSERT INTO reference VALUES('fc22016eadf4fd9bcbbc79d57bb','Person','fc22016ea841f4f9f775dac18aa','Family');
INSERT INTO reference VALUES('fc22016eadf4fd9bcbbc79d57bb','Person','fc22016eb0b4bf05cad70f33c5d','Family');
INSERT INTO reference VALUES('fc22016eb12343be3d7e6c766b8','Person','fc22016eb14368afff0e7046905','Event');
INSERT INTO reference VALUES('fc22016eb12343be3d7e6c766b8','Person','fc22016eb1d2dfed600a3416b6','Family');
INSERT INTO reference VALUES('fc22016eb2747b583e5d6eeae4b','Person','fc22016eb311650130c702f5989','Event');
INSERT INTO reference VALUES('fc22016eb2747b583e5d6eeae4b','Person','fc22016eb365b7c96c264e47c55','Family');
INSERT INTO reference VALUES('fc22016eb2747b583e5d6eeae4b','Person','fc22016eb296ef0dcf09a5e45cd','Event');
INSERT INTO reference VALUES('fc22016eb3c270f63324453b94a','Person','fc22016eb42545a56b9e25d387b','Family');
INSERT INTO reference VALUES('fc22016eb3c270f63324453b94a','Person','fc22016eb3d53dd3409d230bd9e','Event');
INSERT INTO reference VALUES('fc22016eb47173b0d8b363bcef0','Person','fc22016eb492ecfc47a0662a219','Event');
INSERT INTO reference VALUES('fc22016eb47173b0d8b363bcef0','Person','fc22016eb517ddebde107ca1767','Family');
INSERT INTO reference VALUES('fc22016eb5a78e1080ae55066be','Person','fc22016eb42545a56b9e25d387b','Family');
INSERT INTO reference VALUES('fc22016eb5a78e1080ae55066be','Person','fc22016ea841f4f9f775dac18aa','Family');
INSERT INTO reference VALUES('fc22016eb5a78e1080ae55066be','Person','fc22016eb5c69e5e22a2d622afc','Event');
INSERT INTO reference VALUES('fc22016eb5a78e1080ae55066be','Person','fc22016eb64594d9b485b7e4c98','Event');
INSERT INTO reference VALUES('fc22016eb7b2599c12b5441cd63','Person','fc22016eb7e35c29c69319f7a25','Event');
INSERT INTO reference VALUES('fc22016eb7b2599c12b5441cd63','Person','fc22016eb88759929409fe27a35','Event');
INSERT INTO reference VALUES('fc22016eb7b2599c12b5441cd63','Person','fc22016eb0b4bf05cad70f33c5d','Family');
INSERT INTO reference VALUES('fc22016eba53c3cfdc109ae819e','Person','fc22016ebb02167056f66aa2742','Event');
INSERT INTO reference VALUES('fc22016eba53c3cfdc109ae819e','Person','fc22016eb0a6034e7e6b9eaa697','Family');
INSERT INTO reference VALUES('fc22016eba53c3cfdc109ae819e','Person','fc22016eba742e619fa01d0475e','Event');
INSERT INTO reference VALUES('fc22016ebbb7945e7e3d11f6405','Person','fc22016eb517ddebde107ca1767','Family');
INSERT INTO reference VALUES('fc22016ebbb7945e7e3d11f6405','Person','fc22016ebbc345777a8f06b0241','Event');
INSERT INTO reference VALUES('fc22016ebbb7945e7e3d11f6405','Person','fc22016ebc7363ddb26b419e23f','Family');
INSERT INTO reference VALUES('fc22016ebcd3201c745cc0e4d38','Person','fc22016ebd853d9c540eb9ee799','Event');
INSERT INTO reference VALUES('fc22016ebcd3201c745cc0e4d38','Person','fc22016ebcf1acad21091d446d5','Event');
INSERT INTO reference VALUES('fc22016ebcd3201c745cc0e4d38','Person','fc22016ebdf51bc2e1b65fba55d','Family');
INSERT INTO reference VALUES('fc22016ebcd3201c745cc0e4d38','Person','fc22016ead24fab26aa8a2054fb','Family');
INSERT INTO reference VALUES('fc22016ebe5706f95dcbae27ac9','Person','fc22016ebef4952f0a419ed0f97','Event');
INSERT INTO reference VALUES('fc22016ebe5706f95dcbae27ac9','Person','fc22016ebe75c776e6c4d90d976','Event');
INSERT INTO reference VALUES('fc22016ebe5706f95dcbae27ac9','Person','fc22016ebf647ee4b26ace328b2','Family');
INSERT INTO reference VALUES('fc22016ec007f1e0854e005e632','Person','fc22016ec012749d5a171e4278c','Event');
INSERT INTO reference VALUES('fc22016ec007f1e0854e005e632','Person','fc22016ea841f4f9f775dac18aa','Family');
INSERT INTO reference VALUES('fc22016ec007f1e0854e005e632','Person','fc22016ec0a58a9e02443201d19','Event');
INSERT INTO reference VALUES('fc22016ec2011ec6c0b8c9298ce','Person','fc22016ec2c70c2c1c72c6e24e7','Event');
INSERT INTO reference VALUES('fc22016ec2011ec6c0b8c9298ce','Person','fc22016ea841f4f9f775dac18aa','Family');
INSERT INTO reference VALUES('fc22016ec2011ec6c0b8c9298ce','Person','fc22016ec221bc9393b724daa31','Event');
INSERT INTO reference VALUES('fc22016ec475856fbdef5725b5a','Person','fc22016eb1d2dfed600a3416b6','Family');
INSERT INTO reference VALUES('fc22016ec475856fbdef5725b5a','Person','fc22016ec525088fc533681a329','Event');
INSERT INTO reference VALUES('fc22016ec475856fbdef5725b5a','Person','fc22016ec4912fd7ab01c07cc07','Event');
INSERT INTO reference VALUES('fc22016ec475856fbdef5725b5a','Person','fc22016ec6112a0ccc91d4c16a','Event');
INSERT INTO reference VALUES('fc22016ec475856fbdef5725b5a','Person','fc22016ec6e67d60975bdd50f06','Family');
INSERT INTO reference VALUES('fc22016ec475856fbdef5725b5a','Person','fc22016ecc825261b716962da14','Note');
INSERT INTO reference VALUES('fc22016ecd25562e2b678fc50ae','Person','fc22016ea841f4f9f775dac18aa','Family');
INSERT INTO reference VALUES('fc22016ecd25562e2b678fc50ae','Person','fc22016ecd517b91d8cdb238e07','Event');
INSERT INTO reference VALUES('fc22016ecd25562e2b678fc50ae','Person','fc22016eb365b7c96c264e47c55','Family');
INSERT INTO reference VALUES('fc22016ecd25562e2b678fc50ae','Person','fc22016ece157ea5403282b4960','Event');
INSERT INTO reference VALUES('fc22016ecf368d1eda1f36f9a62','Person','fc22016ed0d310a8fc575675674','Event');
INSERT INTO reference VALUES('fc22016ecf368d1eda1f36f9a62','Person','fc22016ecf556be63425e96a6eb','Event');
INSERT INTO reference VALUES('fc22016ecf368d1eda1f36f9a62','Person','fc22016ea841f4f9f775dac18aa','Family');
INSERT INTO reference VALUES('fc22016ecf368d1eda1f36f9a62','Person','fc22016ed0576c4985d4e5fa0f8','Event');
INSERT INTO reference VALUES('fc22016ecf368d1eda1f36f9a62','Person','fc22016ecfd8795e9039aa5972','Event');
INSERT INTO reference VALUES('fc22016ecf368d1eda1f36f9a62','Person','fc22016ec6e67d60975bdd50f06','Family');
INSERT INTO reference VALUES('fc22016ed1f4a92b4312f1be5d5','Person','fc22016ed214c61147150b3d2b5','Event');
INSERT INTO reference VALUES('fc22016ed1f4a92b4312f1be5d5','Person','fc22016ed297e1fc4e5a01be07d','Family');
INSERT INTO reference VALUES('fc22016ed2f7cb24dd32d97f0ae','Person','fc22016ed3134b256ac085ea44a','Event');
INSERT INTO reference VALUES('fc22016ed2f7cb24dd32d97f0ae','Person','fc22016ea841f4f9f775dac18aa','Family');
INSERT INTO reference VALUES('fc22016ed2f7cb24dd32d97f0ae','Person','fc22016ed3926645029816c4e16','Event');
INSERT INTO reference VALUES('fc22016ed2f7cb24dd32d97f0ae','Person','fc22016ed45d47f12380e3ef9d','Family');
INSERT INTO reference VALUES('fc22016ed4bd9a684451f99a83','Person','fc22016ed4d5dade72e899af126','Event');
INSERT INTO reference VALUES('fc22016ed4bd9a684451f99a83','Person','fc22016ed297e1fc4e5a01be07d','Family');
INSERT INTO reference VALUES('fc22016ed5a63f2befbb815323','Person','fc22016ed654a19499da8e5cb06','Event');
INSERT INTO reference VALUES('fc22016ed5a63f2befbb815323','Person','fc22016ed74790aa0b019ff40ef','Family');
INSERT INTO reference VALUES('fc22016ed5a63f2befbb815323','Person','fc22016ed5d174a3a8847c85628','Event');
INSERT INTO reference VALUES('fc22016ed7c20bce57cf0cad8cb','Person','fc22016ed911728208458ac9649','Event');
INSERT INTO reference VALUES('fc22016ed7c20bce57cf0cad8cb','Person','fc22016ed81581f8cf4f4c6a83e','Event');
INSERT INTO reference VALUES('fc22016ed7c20bce57cf0cad8cb','Person','fc22016ead24fab26aa8a2054fb','Family');
INSERT INTO reference VALUES('fc22016eda01f9a4762f8431155','Person','fc22016ec6e67d60975bdd50f06','Family');
INSERT INTO reference VALUES('fc22016eda01f9a4762f8431155','Person','fc22016eda23849ea03630e61e7','Event');
INSERT INTO reference VALUES('fc22016eda01f9a4762f8431155','Person','fc22016ed74790aa0b019ff40ef','Family');
INSERT INTO reference VALUES('fc22016eda01f9a4762f8431155','Person','fc22016edaa5b2d5f5d1b318410','Event');
INSERT INTO reference VALUES('fc22016edbb4a728d27cd328104','Person','fc22016edbd509bca5fe24d9d10','Event');
INSERT INTO reference VALUES('fc22016edbb4a728d27cd328104','Person','fc22016edc54a1f8300cf0dc888','Event');
INSERT INTO reference VALUES('fc22016edbb4a728d27cd328104','Person','fc22016ebf647ee4b26ace328b2','Family');
INSERT INTO reference VALUES('fc22016edbb4a728d27cd328104','Person','fc22016edc8457920e3fd0dc5e','Event');
INSERT INTO reference VALUES('fc22016edd25f5eb2b18875bc6c','Person','fc22016eddc758aa948f1f755a7','Event');
INSERT INTO reference VALUES('fc22016edd25f5eb2b18875bc6c','Person','fc22016edd4390144686e40f40d','Event');
INSERT INTO reference VALUES('fc22016edd25f5eb2b18875bc6c','Person','fc22016eb517ddebde107ca1767','Family');
INSERT INTO reference VALUES('fc22016edea52f5e3272f07fbe','Person','fc22016edec54c0ef9c0e4f7959','Event');
INSERT INTO reference VALUES('fc22016edea52f5e3272f07fbe','Person','fc22016ebdf51bc2e1b65fba55d','Family');
INSERT INTO reference VALUES('fc22016edf937520cbb28933950','Person','fc22016eb0a6034e7e6b9eaa697','Family');
INSERT INTO reference VALUES('fc22016edf937520cbb28933950','Person','fc22016edfb4848ad6e35e6c6f7','Event');
INSERT INTO reference VALUES('fc22016edf937520cbb28933950','Person','fc22016ead24fab26aa8a2054fb','Family');
INSERT INTO reference VALUES('fc22016ee0d54481979483e86d4','Person','fc22016ee134ed2332f2a5c42ce','Event');
INSERT INTO reference VALUES('fc22016ee0d54481979483e86d4','Person','fc22016ebc7363ddb26b419e23f','Family');
INSERT INTO reference VALUES('fc22016ee29bc251158922ba46','Person','fc22016ee2c526faae99dbd4f8e','Event');
INSERT INTO reference VALUES('fc22016ee29bc251158922ba46','Person','fc22016ebdf51bc2e1b65fba55d','Family');
INSERT INTO reference VALUES('fc22016ee29bc251158922ba46','Person','fc22016ee341497415b6539d768','Event');
INSERT INTO reference VALUES('fc22016ee417f31085d072e518c','Person','fc22016eb1d2dfed600a3416b6','Family');
INSERT INTO reference VALUES('fc22016ee417f31085d072e518c','Person','fc22016ee436439ecf5b78c47b5','Event');
INSERT INTO reference VALUES('fc22016ee417f31085d072e518c','Person','fc22016ee533bf02683f2d41aa4','Event');
INSERT INTO reference VALUES('fc22016ee417f31085d072e518c','Person','fc22016ee4b74d789066f10c1e0','Event');
INSERT INTO reference VALUES('fc22016ee61130abb5e4237173f','Person','fc22016ee664bd974887f6e2e25','Citation');
INSERT INTO reference VALUES('fc22016ee61130abb5e4237173f','Person','fc22016ee814202f07b8bacc211','Event');
INSERT INTO reference VALUES('fc22016ee61130abb5e4237173f','Person','fc22016ee74276465c1c0923b37','Event');
INSERT INTO reference VALUES('fc22016ee61130abb5e4237173f','Person','fc22016ebf647ee4b26ace328b2','Family');
INSERT INTO reference VALUES('fc22016ee61130abb5e4237173f','Person','fc22016ee795ba60e15a1206517','Event');
INSERT INTO reference VALUES('fc22016ee61130abb5e4237173f','Person','fc22016ee682cac18141ba536f0','Event');
INSERT INTO reference VALUES('fc22016ee61130abb5e4237173f','Person','fc22016ebc7363ddb26b419e23f','Family');
INSERT INTO reference VALUES('fc22016ee9010d0a67d371e4051','Person','fc22016ee921d461d8143d29b5f','Event');
INSERT INTO reference VALUES('fc22016ee9010d0a67d371e4051','Person','fc22016ec6e67d60975bdd50f06','Family');
INSERT INTO reference VALUES('fc22016ee9010d0a67d371e4051','Person','fc22016ee9a5990ad8708f65881','Event');
INSERT INTO reference VALUES('fc22016eea87543b59f54061315','Person','fc22016eb1d2dfed600a3416b6','Family');
INSERT INTO reference VALUES('fc22016eea87543b59f54061315','Person','fc22016eeb135d3ce6f42378a5c','Event');
INSERT INTO reference VALUES('fc22016eea87543b59f54061315','Person','fc22016eea9797ede6f5df2377','Event');
INSERT INTO reference VALUES('fc22016eea87543b59f54061315','Person','fc22016ed297e1fc4e5a01be07d','Family');
INSERT INTO reference VALUES('fc22016eec82207bb51350d9b61','Person','fc22016eb1d2dfed600a3416b6','Family');
INSERT INTO reference VALUES('fc22016eec82207bb51350d9b61','Person','fc22016eecc27032680b3c9e24c','Event');
INSERT INTO reference VALUES('fc22016eee0479a3aec78da1d9c','Person','fc22016eee2b1a1b84550baa68','Event');
INSERT INTO reference VALUES('fc22016eee0479a3aec78da1d9c','Person','fc22016ebc7363ddb26b419e23f','Family');
INSERT INTO reference VALUES('fc22016eef3235e57153b89cd14','Person','fc22016eef52dcc7c81830a1525','Event');
INSERT INTO reference VALUES('fc22016eef3235e57153b89cd14','Person','fc22016ead24fab26aa8a2054fb','Family');
INSERT INTO reference VALUES('fc22016eeff59ee6ba02bb18dec','Person','fc22016ef00e8125d67f3407bb','Event');
INSERT INTO reference VALUES('fc22016eeff59ee6ba02bb18dec','Person','fc22016ebf647ee4b26ace328b2','Family');
INSERT INTO reference VALUES('fc22016eeff59ee6ba02bb18dec','Person','fc22016ef093600b42fb443c51c','Event');
INSERT INTO reference VALUES('fc22016ef19353ba284f3d07fa3','Person','fc22016ef1b5b9fa89d7b58e2c3','Event');
INSERT INTO reference VALUES('fc22016ef19353ba284f3d07fa3','Person','fc22016ed45d47f12380e3ef9d','Family');
INSERT INTO reference VALUES('fc22016ef253994ecfa22246d81','Person','fc22016ef265e44a01f6d27e519','Event');
INSERT INTO reference VALUES('fc22016ef253994ecfa22246d81','Person','fc22016eb1d2dfed600a3416b6','Family');
INSERT INTO reference VALUES('fc22016ef376acf19f56ac53d12','Person','fc22016ef6153997c63c1a4205a','Note');
INSERT INTO reference VALUES('fc22016ef376acf19f56ac53d12','Person','fc22016ea841f4f9f775dac18aa','Family');
INSERT INTO reference VALUES('fc22016ef376acf19f56ac53d12','Person','fc22016ef4121ac562225361199','Event');
INSERT INTO reference VALUES('fc22016ef376acf19f56ac53d12','Person','fc22016eb517ddebde107ca1767','Family');
INSERT INTO reference VALUES('fc22016ef376acf19f56ac53d12','Person','fc22016ef49756519c09abebf83','Event');
INSERT INTO reference VALUES('fc22016ef376acf19f56ac53d12','Person','fc22016ef52202bfcbedd840a42','Event');
INSERT INTO reference VALUES('fc22016ef376acf19f56ac53d12','Person','fc22016ef3932c8fc2a6a9d5cd5','Event');
INSERT INTO reference VALUES('fc22016ef6a6a4eeea74d96947b','Person','fc22016ef6d4df8f7bec4c2c1aa','Event');
INSERT INTO reference VALUES('fc22016ef6a6a4eeea74d96947b','Person','fc22016ec6e67d60975bdd50f06','Family');
INSERT INTO reference VALUES('fc22016ead24fab26aa8a2054fb','Family','fc22016ebcd3201c745cc0e4d38','Person');
INSERT INTO reference VALUES('fc22016ead24fab26aa8a2054fb','Family','fc22016edf937520cbb28933950','Person');
INSERT INTO reference VALUES('fc22016ead24fab26aa8a2054fb','Family','fc22016eabe2fbe08034b3cd1e3','Person');
INSERT INTO reference VALUES('fc22016ead24fab26aa8a2054fb','Family','fc22016f07e7932d3b852dcdb84','Event');
INSERT INTO reference VALUES('fc22016ead24fab26aa8a2054fb','Family','fc22016eef3235e57153b89cd14','Person');
INSERT INTO reference VALUES('fc22016ead24fab26aa8a2054fb','Family','fc22016ed7c20bce57cf0cad8cb','Person');
INSERT INTO reference VALUES('fc22016ea841f4f9f775dac18aa','Family','fc22016eb5a78e1080ae55066be','Person');
INSERT INTO reference VALUES('fc22016ea841f4f9f775dac18aa','Family','fc22016ea38fb2815a62c132bd','Person');
INSERT INTO reference VALUES('fc22016ea841f4f9f775dac18aa','Family','fc22016ecd25562e2b678fc50ae','Person');
INSERT INTO reference VALUES('fc22016ea841f4f9f775dac18aa','Family','fc22016ed2f7cb24dd32d97f0ae','Person');
INSERT INTO reference VALUES('fc22016ea841f4f9f775dac18aa','Family','fc22016f0214257ae7b3d228888','Event');
INSERT INTO reference VALUES('fc22016ea841f4f9f775dac18aa','Family','fc22016ef376acf19f56ac53d12','Person');
INSERT INTO reference VALUES('fc22016ea841f4f9f775dac18aa','Family','fc22016ec007f1e0854e005e632','Person');
INSERT INTO reference VALUES('fc22016ea841f4f9f775dac18aa','Family','fc22016eadf4fd9bcbbc79d57bb','Person');
INSERT INTO reference VALUES('fc22016ea841f4f9f775dac18aa','Family','fc22016ecf368d1eda1f36f9a62','Person');
INSERT INTO reference VALUES('fc22016ea841f4f9f775dac18aa','Family','fc22016ec2011ec6c0b8c9298ce','Person');
INSERT INTO reference VALUES('fc22016eb1d2dfed600a3416b6','Family','fc22016eea87543b59f54061315','Person');
INSERT INTO reference VALUES('fc22016eb1d2dfed600a3416b6','Family','fc22016eb12343be3d7e6c766b8','Person');
INSERT INTO reference VALUES('fc22016eb1d2dfed600a3416b6','Family','fc22016ef8f587947efc0f53687','Event');
INSERT INTO reference VALUES('fc22016eb1d2dfed600a3416b6','Family','fc22016ec475856fbdef5725b5a','Person');
INSERT INTO reference VALUES('fc22016eb1d2dfed600a3416b6','Family','fc22016ee417f31085d072e518c','Person');
INSERT INTO reference VALUES('fc22016eb1d2dfed600a3416b6','Family','fc22016eec82207bb51350d9b61','Person');
INSERT INTO reference VALUES('fc22016eb1d2dfed600a3416b6','Family','fc22016ef253994ecfa22246d81','Person');
INSERT INTO reference VALUES('fc22016eb517ddebde107ca1767','Family','fc22016edd25f5eb2b18875bc6c','Person');
INSERT INTO reference VALUES('fc22016eb517ddebde107ca1767','Family','fc22016ebbb7945e7e3d11f6405','Person');
INSERT INTO reference VALUES('fc22016eb517ddebde107ca1767','Family','fc22016ef376acf19f56ac53d12','Person');
INSERT INTO reference VALUES('fc22016eb517ddebde107ca1767','Family','fc22016f0625431ea2ef504e44d','Event');
INSERT INTO reference VALUES('fc22016eb517ddebde107ca1767','Family','fc22016eb47173b0d8b363bcef0','Person');
INSERT INTO reference VALUES('fc22016ebf647ee4b26ace328b2','Family','fc22016edbb4a728d27cd328104','Person');
INSERT INTO reference VALUES('fc22016ebf647ee4b26ace328b2','Family','fc22016ebe5706f95dcbae27ac9','Person');
INSERT INTO reference VALUES('fc22016ebf647ee4b26ace328b2','Family','fc22016ee61130abb5e4237173f','Person');
INSERT INTO reference VALUES('fc22016ebf647ee4b26ace328b2','Family','fc22016efec4f6b5827bfe6d796','Event');
INSERT INTO reference VALUES('fc22016ebf647ee4b26ace328b2','Family','fc22016eeff59ee6ba02bb18dec','Person');
INSERT INTO reference VALUES('fc22016ebf647ee4b26ace328b2','Family','fc22016eff42fb57f1d2e2dbd57','Event');
INSERT INTO reference VALUES('fc22016ec6e67d60975bdd50f06','Family','fc22016ee9010d0a67d371e4051','Person');
INSERT INTO reference VALUES('fc22016ec6e67d60975bdd50f06','Family','fc22016ec475856fbdef5725b5a','Person');
INSERT INTO reference VALUES('fc22016ec6e67d60975bdd50f06','Family','fc22016f00d5869d58746eda3c9','Event');
INSERT INTO reference VALUES('fc22016ec6e67d60975bdd50f06','Family','fc22016ecf368d1eda1f36f9a62','Person');
INSERT INTO reference VALUES('fc22016ec6e67d60975bdd50f06','Family','fc22016eda01f9a4762f8431155','Person');
INSERT INTO reference VALUES('fc22016ec6e67d60975bdd50f06','Family','fc22016ef6a6a4eeea74d96947b','Person');
INSERT INTO reference VALUES('fc22016eb0a6034e7e6b9eaa697','Family','fc22016eadf4fd9bcbbc79d57bb','Person');
INSERT INTO reference VALUES('fc22016eb0a6034e7e6b9eaa697','Family','fc22016eba53c3cfdc109ae819e','Person');
INSERT INTO reference VALUES('fc22016eb0a6034e7e6b9eaa697','Family','fc22016edf937520cbb28933950','Person');
INSERT INTO reference VALUES('fc22016ebdf51bc2e1b65fba55d','Family','fc22016edea52f5e3272f07fbe','Person');
INSERT INTO reference VALUES('fc22016ebdf51bc2e1b65fba55d','Family','fc22016ebcd3201c745cc0e4d38','Person');
INSERT INTO reference VALUES('fc22016ebdf51bc2e1b65fba55d','Family','fc22016efbb6c216b4e6c864697','Event');
INSERT INTO reference VALUES('fc22016ebdf51bc2e1b65fba55d','Family','fc22016ee29bc251158922ba46','Person');
INSERT INTO reference VALUES('fc22016ebc7363ddb26b419e23f','Family','fc22016eee0479a3aec78da1d9c','Person');
INSERT INTO reference VALUES('fc22016ebc7363ddb26b419e23f','Family','fc22016ebbb7945e7e3d11f6405','Person');
INSERT INTO reference VALUES('fc22016ebc7363ddb26b419e23f','Family','fc22016ee61130abb5e4237173f','Person');
INSERT INTO reference VALUES('fc22016ebc7363ddb26b419e23f','Family','fc22016efd7368e13cefeb2663d','Event');
INSERT INTO reference VALUES('fc22016ebc7363ddb26b419e23f','Family','fc22016ee0d54481979483e86d4','Person');
INSERT INTO reference VALUES('fc22016ed297e1fc4e5a01be07d','Family','fc22016efab230827e2c3d397aa','Event');
INSERT INTO reference VALUES('fc22016ed297e1fc4e5a01be07d','Family','fc22016ed4bd9a684451f99a83','Person');
INSERT INTO reference VALUES('fc22016ed297e1fc4e5a01be07d','Family','fc22016ed1f4a92b4312f1be5d5','Person');
INSERT INTO reference VALUES('fc22016ed297e1fc4e5a01be07d','Family','fc22016eea87543b59f54061315','Person');
INSERT INTO reference VALUES('fc22016ed74790aa0b019ff40ef','Family','fc22016efc951ccbfd033887793','Event');
INSERT INTO reference VALUES('fc22016ed74790aa0b019ff40ef','Family','fc22016eda01f9a4762f8431155','Person');
INSERT INTO reference VALUES('fc22016ed74790aa0b019ff40ef','Family','fc22016ed5a63f2befbb815323','Person');
INSERT INTO reference VALUES('fc22016eb0b4bf05cad70f33c5d','Family','fc22016eadf4fd9bcbbc79d57bb','Person');
INSERT INTO reference VALUES('fc22016eb0b4bf05cad70f33c5d','Family','fc22016eb7b2599c12b5441cd63','Person');
INSERT INTO reference VALUES('fc22016ed45d47f12380e3ef9d','Family','fc22016f044cf01f92fb39e08e','Event');
INSERT INTO reference VALUES('fc22016ed45d47f12380e3ef9d','Family','fc22016ed2f7cb24dd32d97f0ae','Person');
INSERT INTO reference VALUES('fc22016ed45d47f12380e3ef9d','Family','fc22016ef19353ba284f3d07fa3','Person');
INSERT INTO reference VALUES('fc22016eb365b7c96c264e47c55','Family','fc22016ecd25562e2b678fc50ae','Person');
INSERT INTO reference VALUES('fc22016eb365b7c96c264e47c55','Family','fc22016eb2747b583e5d6eeae4b','Person');
INSERT INTO reference VALUES('fc22016eb365b7c96c264e47c55','Family','fc22016f0556d0e7a8d2c4e56cf','Event');
INSERT INTO reference VALUES('fc22016eb42545a56b9e25d387b','Family','fc22016eb3c270f63324453b94a','Person');
INSERT INTO reference VALUES('fc22016eb42545a56b9e25d387b','Family','fc22016eb5a78e1080ae55066be','Person');
INSERT INTO reference VALUES('fc22016eb42545a56b9e25d387b','Family','fc22016f0743d4bf7d577fe9d2a','Event');
INSERT INTO reference VALUES('fc22016ea4d11615526867948c7','Event','fc22016ea72b3f5080ed2ba3da','Place');
INSERT INTO reference VALUES('fc22016ea7b3bcd2cecd5e6c2a4','Event','fc22016ea80555a980829ea8bc4','Place');
INSERT INTO reference VALUES('fc22016eac72d77221cab0a35a0','Event','fc22016eacd176ba1e256c16cd1','Place');
INSERT INTO reference VALUES('fc22016eae0c31a3146a475522','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016eafb20d8a9693e336162','Event','fc22016eacd176ba1e256c16cd1','Place');
INSERT INTO reference VALUES('fc22016eb14368afff0e7046905','Event','fc22016eb195df9c13c56856f0a','Place');
INSERT INTO reference VALUES('fc22016eb296ef0dcf09a5e45cd','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016eb492ecfc47a0662a219','Event','fc22016eb4d5e4714ac3cccb801','Place');
INSERT INTO reference VALUES('fc22016eb5c69e5e22a2d622afc','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016eb64594d9b485b7e4c98','Event','fc22016eacd176ba1e256c16cd1','Place');
INSERT INTO reference VALUES('fc22016eb7e35c29c69319f7a25','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016eb88759929409fe27a35','Event','fc22016eacd176ba1e256c16cd1','Place');
INSERT INTO reference VALUES('fc22016eba742e619fa01d0475e','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016ebbc345777a8f06b0241','Event','fc22016eacd176ba1e256c16cd1','Place');
INSERT INTO reference VALUES('fc22016ebcf1acad21091d446d5','Event','fc22016eacd176ba1e256c16cd1','Place');
INSERT INTO reference VALUES('fc22016ebe75c776e6c4d90d976','Event','fc22016ebeb26742e58d82489fb','Place');
INSERT INTO reference VALUES('fc22016ebef4952f0a419ed0f97','Event','fc22016ebf26f376904ad7a57d2','Place');
INSERT INTO reference VALUES('fc22016ec012749d5a171e4278c','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016ec0a58a9e02443201d19','Event','fc22016eb4d5e4714ac3cccb801','Place');
INSERT INTO reference VALUES('fc22016ec221bc9393b724daa31','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016ec2c70c2c1c72c6e24e7','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016ec4912fd7ab01c07cc07','Event','fc22016eb195df9c13c56856f0a','Place');
INSERT INTO reference VALUES('fc22016ec525088fc533681a329','Event','fc22016ec5b6d97fefe9bc7fad2','Place');
INSERT INTO reference VALUES('fc22016ec6112a0ccc91d4c16a','Event','fc22016eb195df9c13c56856f0a','Place');
INSERT INTO reference VALUES('fc22016ecd517b91d8cdb238e07','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016ece157ea5403282b4960','Event','fc22016eacd176ba1e256c16cd1','Place');
INSERT INTO reference VALUES('fc22016ecf556be63425e96a6eb','Event','fc22016ecf930ed87f56def69f','Place');
INSERT INTO reference VALUES('fc22016ecfd8795e9039aa5972','Event','fc22016ea80555a980829ea8bc4','Place');
INSERT INTO reference VALUES('fc22016ed0576c4985d4e5fa0f8','Event','fc22016ed091b102fd1ec91e030','Place');
INSERT INTO reference VALUES('fc22016ed0d310a8fc575675674','Event','fc22016eb195df9c13c56856f0a','Place');
INSERT INTO reference VALUES('fc22016ed214c61147150b3d2b5','Event','fc22016ec5b6d97fefe9bc7fad2','Place');
INSERT INTO reference VALUES('fc22016ed3134b256ac085ea44a','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016ed3926645029816c4e16','Event','fc22016eacd176ba1e256c16cd1','Place');
INSERT INTO reference VALUES('fc22016ed4d5dade72e899af126','Event','fc22016ec5b6d97fefe9bc7fad2','Place');
INSERT INTO reference VALUES('fc22016ed5d174a3a8847c85628','Event','fc22016ed617d756d6f13a67344','Place');
INSERT INTO reference VALUES('fc22016ed654a19499da8e5cb06','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016ed81581f8cf4f4c6a83e','Event','fc22016eacd176ba1e256c16cd1','Place');
INSERT INTO reference VALUES('fc22016ed911728208458ac9649','Event','fc22016ed9570d9d42a8ea451f4','Note');
INSERT INTO reference VALUES('fc22016eda23849ea03630e61e7','Event','fc22016eda64185bb54b5590bd5','Place');
INSERT INTO reference VALUES('fc22016edaa5b2d5f5d1b318410','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016edbd509bca5fe24d9d10','Event','fc22016edc167c20e6ebd6a4a18','Place');
INSERT INTO reference VALUES('fc22016edd4390144686e40f40d','Event','fc22016edd848702f800031e487','Place');
INSERT INTO reference VALUES('fc22016eddc758aa948f1f755a7','Event','fc22016eb4d5e4714ac3cccb801','Place');
INSERT INTO reference VALUES('fc22016edec54c0ef9c0e4f7959','Event','fc22016edf02824fc9ef04fe6fb','Place');
INSERT INTO reference VALUES('fc22016edfb4848ad6e35e6c6f7','Event','fc22016eacd176ba1e256c16cd1','Place');
INSERT INTO reference VALUES('fc22016ee134ed2332f2a5c42ce','Event','fc22016ea80555a980829ea8bc4','Place');
INSERT INTO reference VALUES('fc22016ee2c526faae99dbd4f8e','Event','fc22016ee302845a83b4e562e2d','Place');
INSERT INTO reference VALUES('fc22016ee436439ecf5b78c47b5','Event','fc22016eb195df9c13c56856f0a','Place');
INSERT INTO reference VALUES('fc22016ee4b74d789066f10c1e0','Event','fc22016ec5b6d97fefe9bc7fad2','Place');
INSERT INTO reference VALUES('fc22016ee533bf02683f2d41aa4','Event','fc22016eb195df9c13c56856f0a','Place');
INSERT INTO reference VALUES('fc22016ee682cac18141ba536f0','Event','fc22016ee6e7e8222b34c9e8cd9','Citation');
INSERT INTO reference VALUES('fc22016ee682cac18141ba536f0','Event','fc22016ee7134635fba673eadaf','Place');
INSERT INTO reference VALUES('fc22016ee74276465c1c0923b37','Event','fc22016ee7741cbfaf7c0441954','Note');
INSERT INTO reference VALUES('fc22016ee795ba60e15a1206517','Event','fc22016ee7d222b1b1b7a2e5b20','Place');
INSERT INTO reference VALUES('fc22016ee921d461d8143d29b5f','Event','fc22016ee961da3283b1ccecc3e','Place');
INSERT INTO reference VALUES('fc22016ee9a5990ad8708f65881','Event','fc22016ec5b6d97fefe9bc7fad2','Place');
INSERT INTO reference VALUES('fc22016eea9797ede6f5df2377','Event','fc22016eeae543d33e967d45d16','Place');
INSERT INTO reference VALUES('fc22016eeb135d3ce6f42378a5c','Event','fc22016ec5b6d97fefe9bc7fad2','Place');
INSERT INTO reference VALUES('fc22016eecc27032680b3c9e24c','Event','fc22016eb195df9c13c56856f0a','Place');
INSERT INTO reference VALUES('fc22016eee2b1a1b84550baa68','Event','fc22016ee7134635fba673eadaf','Place');
INSERT INTO reference VALUES('fc22016ef00e8125d67f3407bb','Event','fc22016ebeb26742e58d82489fb','Place');
INSERT INTO reference VALUES('fc22016ef093600b42fb443c51c','Event','fc22016ebf26f376904ad7a57d2','Place');
INSERT INTO reference VALUES('fc22016ef265e44a01f6d27e519','Event','fc22016eb195df9c13c56856f0a','Place');
INSERT INTO reference VALUES('fc22016ef3932c8fc2a6a9d5cd5','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016ef4121ac562225361199','Event','fc22016eb4d5e4714ac3cccb801','Place');
INSERT INTO reference VALUES('fc22016ef49756519c09abebf83','Event','fc22016ef4e634a39b0ca355ba2','Place');
INSERT INTO reference VALUES('fc22016ef52202bfcbedd840a42','Event','fc22016ed091b102fd1ec91e030','Place');
INSERT INTO reference VALUES('fc22016ef6d4df8f7bec4c2c1aa','Event','fc22016eda64185bb54b5590bd5','Place');
INSERT INTO reference VALUES('fc22016ef8f587947efc0f53687','Event','fc22016eb195df9c13c56856f0a','Place');
INSERT INTO reference VALUES('fc22016efab230827e2c3d397aa','Event','fc22016ec5b6d97fefe9bc7fad2','Place');
INSERT INTO reference VALUES('fc22016efbb6c216b4e6c864697','Event','fc22016efbf746880812c03154b','Place');
INSERT INTO reference VALUES('fc22016efc951ccbfd033887793','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016efd7368e13cefeb2663d','Event','fc22016ea80555a980829ea8bc4','Place');
INSERT INTO reference VALUES('fc22016efd7368e13cefeb2663d','Event','fc22016efdc43fec2c0d6a14120','Citation');
INSERT INTO reference VALUES('fc22016efec4f6b5827bfe6d796','Event','fc22016eff0247137e2a8b1339c','Place');
INSERT INTO reference VALUES('fc22016eff42fb57f1d2e2dbd57','Event','fc22016eacd176ba1e256c16cd1','Place');
INSERT INTO reference VALUES('fc22016f0214257ae7b3d228888','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016f0556d0e7a8d2c4e56cf','Event','fc22016eaf032eb506b7713963c','Place');
INSERT INTO reference VALUES('fc22016f0625431ea2ef504e44d','Event','fc22016eb4d5e4714ac3cccb801','Place');
INSERT INTO reference VALUES('fc22016f07e7932d3b852dcdb84','Event','fc22016eacd176ba1e256c16cd1','Place');
INSERT INTO reference VALUES('fc22016ee6c2b5012b56ffe9cc1','Source','fc22016f0a41a139e1fe6ceee69','Note');
INSERT INTO reference VALUES('fc22016ee6c2b5012b56ffe9cc1','Source','fc22016f0961a42d74ae0311b8d','Repository');
INSERT INTO reference VALUES('fc22016efdb603da75e80258d54','Source','fc22016f097493fa553a97101ea','Note');
INSERT INTO reference VALUES('fc22016efdb603da75e80258d54','Source','fc22016f0961a42d74ae0311b8d','Repository');
INSERT INTO reference VALUES('fc22016ee664bd974887f6e2e25','Citation','fc22016ee63b72ef53577be23e','Source');
INSERT INTO reference VALUES('fc22016ee6e7e8222b34c9e8cd9','Citation','fc22016ee6c2b5012b56ffe9cc1','Source');
INSERT INTO reference VALUES('fc22016efdc43fec2c0d6a14120','Citation','fc22016efdb603da75e80258d54','Source');
INSERT INTO reference VALUES('fc22016f0b84ae896becb7fbac1','Repository','fc22016f0bc442c71f7cd8d5c83','Note');
CREATE TABLE name_group (name VARCHAR(50) PRIMARY KEY NOT NULL, grouping TEXT);
CREATE TABLE metadata (setting VARCHAR(50) PRIMARY KEY NOT NULL, value BLOB);
INSERT INTO metadata VALUES('version',X'80035802000000313871002e');
INSERT INTO metadata VALUES('name_formats',X'80035d71002e');
INSERT INTO metadata VALUES('researcher',X'8003636772616d70732e67656e2e6c69622e726573656172636865720a526573656172636865720a7100298171017d71022858060000007374726565747103580c0000004e6f742050726f7669646564710458080000006c6f63616c697479710558000000007106580400000063697479710768065806000000636f756e74797108680658050000007374617465710968065807000000636f756e747279710a68065806000000706f7374616c710b6806580500000070686f6e65710c680658040000006e616d65710d580f000000416c657820526f69746d616e2c2c2c710e580400000061646472710f68045805000000656d61696c7110680675622e');
INSERT INTO metadata VALUES('bookmarks',X'80035d71002e');
INSERT INTO metadata VALUES('family_bookmarks',X'80035d71002e');
INSERT INTO metadata VALUES('event_bookmarks',X'80035d71002e');
INSERT INTO metadata VALUES('place_bookmarks',X'80035d71002e');
INSERT INTO metadata VALUES('repo_bookmarks',X'80035d71002e');
INSERT INTO metadata VALUES('source_bookmarks',X'80035d71002e');
INSERT INTO metadata VALUES('citation_bookmarks',X'80035d71002e');
INSERT INTO metadata VALUES('media_bookmarks',X'80035d71002e');
INSERT INTO metadata VALUES('note_bookmarks',X'80035d71002e');
INSERT INTO metadata VALUES('event_names',X'8003636275696c74696e730a7365740a71005d710128580000000071025804000000496d6d697103658571045271052e');
INSERT INTO metadata VALUES('fattr_names',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('pattr_names',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('sattr_names',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('marker_names',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('child_refs',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('family_rels',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('event_roles',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('name_types',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('origin_types',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('repo_types',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('note_types',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('sm_types',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('url_types',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('mattr_names',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('eattr_names',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('place_types',X'8003636275696c74696e730a7365740a71005d71018571025271032e');
INSERT INTO metadata VALUES('cmap_index',X'80034b032e');
INSERT INTO metadata VALUES('smap_index',X'80034b002e');
INSERT INTO metadata VALUES('emap_index',X'80034b002e');
INSERT INTO metadata VALUES('pmap_index',X'80034b002e');
INSERT INTO metadata VALUES('fmap_index',X'80034b0f2e');
INSERT INTO metadata VALUES('lmap_index',X'80034b182e');
INSERT INTO metadata VALUES('omap_index',X'80034b002e');
INSERT INTO metadata VALUES('rmap_index',X'80034b002e');
INSERT INTO metadata VALUES('nmap_index',X'80034b082e');
CREATE TABLE gender_stats (given_name TEXT, female INTEGER, male INTEGER, unknown INTEGER);
INSERT INTO gender_stats VALUES('Anna',0,2,0);
INSERT INTO gender_stats VALUES('Keith',1,0,0);
INSERT INTO gender_stats VALUES('Hans',1,0,0);
INSERT INTO gender_stats VALUES('Hanna',0,1,0);
INSERT INTO gender_stats VALUES('Herman',1,0,0);
INSERT INTO gender_stats VALUES('Evelyn',0,1,0);
INSERT INTO gender_stats VALUES('Marjorie',0,3,0);
INSERT INTO gender_stats VALUES('Gus',1,0,0);
INSERT INTO gender_stats VALUES('Jennifer',0,1,0);
INSERT INTO gender_stats VALUES('Lillie',0,1,0);
INSERT INTO gender_stats VALUES('John',1,0,0);
INSERT INTO gender_stats VALUES('Eric',1,0,0);
INSERT INTO gender_stats VALUES('Amber',0,1,0);
INSERT INTO gender_stats VALUES('Carl',1,0,0);
INSERT INTO gender_stats VALUES('Hjalmar',2,0,0);
INSERT INTO gender_stats VALUES('Martin',2,0,0);
INSERT INTO gender_stats VALUES('Astrid',0,1,0);
INSERT INTO gender_stats VALUES('Gustaf',1,0,0);
INSERT INTO gender_stats VALUES('Marta',0,1,0);
INSERT INTO gender_stats VALUES('Kirsti',0,1,0);
INSERT INTO gender_stats VALUES('Ingeman',2,0,0);
INSERT INTO gender_stats VALUES('Craig',1,0,0);
INSERT INTO gender_stats VALUES('Magnes',1,0,0);
INSERT INTO gender_stats VALUES('Janice',0,1,0);
INSERT INTO gender_stats VALUES('Darcy',0,1,0);
INSERT INTO gender_stats VALUES('Lloyd',1,0,0);
INSERT INTO gender_stats VALUES('Alice',0,1,0);
INSERT INTO gender_stats VALUES('Lars',1,0,0);
INSERT INTO gender_stats VALUES('Elna',0,1,0);
INSERT INTO gender_stats VALUES('Edwin',2,0,0);
INSERT INTO gender_stats VALUES('Kerstina',0,1,0);
INSERT INTO gender_stats VALUES('Janis',0,1,0);
INSERT INTO gender_stats VALUES('Mason',1,0,0);
INSERT INTO gender_stats VALUES('Ingar',0,1,0);
INSERT INTO gender_stats VALUES('Emil',1,0,0);
CREATE INDEX person_gramps_id ON person(gramps_id);
CREATE INDEX person_surname ON person(surname);
CREATE INDEX person_given_name ON person(given_name);
CREATE INDEX source_title ON source(title);
CREATE INDEX source_gramps_id ON source(gramps_id);
CREATE INDEX citation_page ON citation(page);
CREATE INDEX citation_gramps_id ON citation(gramps_id);
CREATE INDEX media_desc ON media(desc);
CREATE INDEX media_gramps_id ON media(gramps_id);
CREATE INDEX place_title ON place(title);
CREATE INDEX place_enclosed_by ON place(enclosed_by);
CREATE INDEX place_gramps_id ON place(gramps_id);
CREATE INDEX tag_name ON tag(name);
CREATE INDEX reference_ref_handle ON reference(ref_handle);
CREATE INDEX family_gramps_id ON family(gramps_id);
CREATE INDEX event_gramps_id ON event(gramps_id);
CREATE INDEX repository_gramps_id ON repository(gramps_id);
CREATE INDEX note_gramps_id ON note(gramps_id);
CREATE INDEX reference_obj_handle ON reference(obj_handle);
COMMIT;
%</database>
%<*util>
if not table.deep_merge then function table.deep_merge(t1, t2)
    for k, v in pairs(t2) do
        if type(v) == "table" and type(t1[k]) == "table" then
            deep_merge(t1[k], v)
        else
            t1[k] = v
        end
    end
end end

if not table.copy then function table.copy(orig)
    local copy = {}
    for key, value in pairs(orig) do
        if type(value)=="table" then
            copy[key]= table.copy(value)
        else
            copy[key] = value
        end
    end
    return copy
end end

if not string.bytes then function string.bytes(str)
    local bytes = {}
    for i = 1, #str do
        bytes[i] = string.byte(str, i)
    end
    return bytes
end end

if not string.split then function string:split(delimiter)
    if not delimiter or delimiter == "" then
        return {self} -- If no delimiter is given, return the whole string
    end
    local result = {}

    for match in (self .. delimiter):gmatch("([^..delimiter..*])" .. delimiter) do
        table.insert(result, match)
    end
    return result
end end

local u={}

function u.dump(o,gen)
   if gen == nil then gen=0 end

   if type(o) == 'table' then
      local s = '{\n'
      for k,v in pairs(o) do
         if type(k) ~= 'number' then k = '"'..k..'"' end
         s =  s .. string.rep(".", gen*3)..'['..k..'] = '
         local sn = u.dump(v,gen+1) .. ',\n'
         s = s..sn
      end
      return string.sub(s,1,-2) ..'}'
   else
      return tostring(o)
   end
end

function u.dump_key(o,gen)
   if gen == nil then gen=0 end

   if type(o) == 'table' then
      local s = '{\n'
      for k,v in pairs(o) do
         if type(k) ~= 'number' then k = '"'..k..'"' end
         s =  s .. string.rep(".", gen*3)..'['..k..'] = '
         local sn = u.dump_key(v,gen+1) .. ',\n'
         s = s..sn
      end
      return string.sub(s,1,-2) ..'}'
   else
      return "--"
   end
end

function u.is_zero(s,a,b)
	if s==0 then return(a) else return(b) end end

function u.is_empty(s,a,b)
	if #s>0 then return(b) else return(a) end end

function u.comma_con(s1,s2)
   return s1..u.is_empty(s1,"",u.is_empty(s2,"",", "))..s2
end

function u.roman(num)
   res={'i','ii','iii','iv','v','vi','vii','viii','ix','x','xi','xii','xiii','xiv'}
   return res[num]
end

function u.Roman(num)
   res={'','I','II','III','IV','V','VI','VII','VIII','IX'}
   tens={'X','XX','XXX','XXXX',}
   s=res[(num % 10)+1]
   if num > 9 then
      s=tens[math.floor(num/10)]..s
    end
   return s
end


function u.alphanumber(n)
  local s=""
  if n>0 then
    local num1 = (n-1) % 26 +1
    local num2 = math.floor(n/26)
    s = string.char(96+num1)
    if num2>0 then s = string.char(96+num2)..s end
  end
  return s
end

if arg ~= nil and arg[0] == string.sub(debug.getinfo(1,'S').source,2) then
    -- pass
    print(u.days_from_year_0(0,0,0))
    print(u.days_from_year_0(1962,6,9))
    print(u.alphanumber(0))
    print(string.byte('a' ))
    print(u.alphanumber(1))
    print(u.alphanumber(27))
else
    return(u)
end
%</util>
%<*queries>
local pickle=require('gramps.pickle')
local util=require("gramps.util")
local q={}

local TheDataBase="sqlite.db"

----------------------------------- 
-- database setup
-----------------------------------
local driver = require('luasql.sqlite3')
local env = nil
local db = nil

function q.init(database)
    q.close()
    q.database = database or TheDataBase
    print(database)
    env = assert(driver.sqlite3(),"problem in sqlite3 copling")
    db = assert(env:connect(q.database),"No conection to "..q.database)
    print(type(db))
    local r= q.get_person_from_id("I0018")
    print(r[1].given_name)
    local r= q.get_person_from_id("I7141")
    if r[1] then print(r[1].given_name) end
end

function q:close()
    if db ~= nil then
        db:close()
        env:close()
    end
    db=nil
end

----------------------------------- 
--
----------------------------------- 

local index_person_handle_ref = {
    events=8,
    child_family=9,
    parent_family=10,
    media=11}

----------------------------------- 
--
----------------------------------- 

local function Where(column,handles)
    local where = ""

    if handles ~= nil then
        if #where>0 then where=where.." AND " end
        where = column.." IN ("
        if type(handles)=='table' then
        --print("query ",util.dump(handles))
            for n,i in ipairs(handles) do
                if n>1 then where=where.."," end
                where = where ..'"'..i..'"'
            end
        else
            where = where..'"'..handles..'"'
        end
        where=where..")"
    end
    if #where>0 then where = " WHERE "..where end
    return where
end

local function proces_query(query,blob)

    local data={}
    local chunk = 100
    --print(query)

    if db==nil then q.init() end
    
    for offset = 0,20099,chunk do
        local limit=" LIMIT "..tostring(chunk).." OFFSET "..tostring(offset)
        --print(query..limit)

        local results,err = db:execute(query..limit)
        if not results then
            print("Error:", err)
            return(data)
        end

        local blobs={}
        row = results:fetch({},"a")
        local tel=0
        while row do
            tel=tel+1
            -- save blob_data
            if blob then
            ----------
                row['blob_data']=pickle.depickle(row['blob_data'])
            ----------
                --print(row['blob_data'])
                --table.insert(blobs,row['blob_data'])
            else
                row['blob_data']=nil
            end
            table.insert(data, table.copy( row))
            --table.insert(data,  row)
            row = results:fetch(row,"a")
        end
        results:close()
--[[
        if blob then -- depicle blob_data
            for i,b in ipairs(blobdepicle(blobs))do
                --print(offset+i)
                --print(util.dump(b))

                data[offset+i]['blob_data']=b
            end
        end
]]--
        if tel<chunk then break end
    end -- of LIMIT a OFFSET b
    return(data)
end

q.ORDER_BY_NAME = true

local function Order(tab)
    local order=""
    if q.ORDER_BY_NAME then
        if tab=="person" then order=" ORDER BY person.surname ASC, person.given_name ASC" end
    end
    return order
end

function q.get_person_from_id(gramps_id,blob)
    if blob==nil then blob=true end
    return(proces_query("SELECT * FROM person"..Where("gramps_id",gramps_id)..Order("person"),blob))
end

function q.get_person_from_handle(handle,blob)
    if blob==nil then blob=true end
    return(proces_query("SELECT * FROM person"..Where("handle",handle),blob))
end

function q.get_events_from_handle(handle,blob)
    if blob==nil then blob=true end
    local q="SELECT event.*, reference.obj_handle AS obj_handle FROM event LEFT JOIN reference ON reference.ref_handle=event.handle"
    if handle then q=q.." WHERE reference.obj_handle='"..handle.."'" end
    return(proces_query(q,blob))
end

function q.get_person_handle_from_id(gramps_id)
    res=proces_query("SELECT handle FROM person WHERE gramps_id='"..gramps_id.."'")
    if res[1] then return res[1].handle else return nil end
end

function q.get_handle_from_id(gramps_id)
    local fc=string.sub(gramps_id,1,1)
    local table
    if fc=='I' then table='person'
    elseif fc=='C' then table='citation'
    elseif fc=='F' then table='family'
    elseif fc=='O' then table='media'
    elseif fc=='E' then table='event'
    elseif fc=='N' then table='note'
    elseif fc=='S' then table='source'
    elseif fc=='R' then table='repository'
    elseif fc=='P' then table='place'
    end
    res=proces_query("SELECT handle FROM "..table.." WHERE gramps_id='"..gramps_id.."'")
    return res[1].handle
end

function q.get_events_from_persons(blob)
    if blob==nil then blob=true end
    return(proces_query("SELECT event.*,reference.obj_handle AS person_handle FROM event LEFT JOIN reference ON reference.ref_handle=event.handle WHERE reference.obj_class='Person' AND reference.ref_class='Event'",blob))
end

function q.get_family_handle_from_id(gramps_id)
    res=proces_query("SELECT handle FROM family WHERE gramps_id='"..gramps_id.."'")
    return res[1].handle
end

function q.get_place_from_handle(handle)
    local res=proces_query("SELECT title, enclosed_by FROM place "..Where('handle',handle))
    return res
end

function q.get_family_from_handle(handle)
    local res=proces_query("SELECT * FROM family "..Where('handle',handle))
    local link
    if handle==nil then
        link =proces_query("SELECT * FROM reference WHERE obj_class='Family'")
    end
    return res ,link
end

function q.get_person_family(handle)
    local res=proces_query("SELECT family.* FROM family LEFT JOIN reference ON family.handle=reference.ref_handle "..
            "WHERE reference.obj_handle='"..handle.."' and reference.ref_class='Family'")
    return res
end

function q.get_persons_from_family(fhandle)
    local children={}
    local res=proces_query("SELECT person.handle FROM person LEFT JOIN reference ON person.handle=reference.obj_handle "..
            "WHERE reference.ref_handle = '"..fhandle.."' and reference.ref_class='Family'")

    for i,p in ipairs(res) do
        table.insert(children,p.handle)
    end
    return children
end

function q.get_media_handle_from_id(gramps_id)
    res=proces_query("SELECT handle FROM media WHERE gramps_id='"..gramps_id.."'")
    return res[1].handle
end

function q.get_media_from_handle(handle,blob)
    local res=proces_query("SELECT * FROM media "..Where('handle',handle),blob)
    return res
end

function q.get_person_from_media(handle,blob)
    if blob==nil then blob=true end
    return(proces_query("SELECT obj_handle FROM reference WHERE ref_handle='"..handle.."' AND obj_class = 'Person'"))
end

function q.get_metadata(setting)
    local res=proces_query("SELECT setting AS 'setting', value AS 'blob_data' FROM metadata "..Where('setting',setting),true)
    return res
end

if arg ~= nil and arg[0] == string.sub(debug.getinfo(1,'S').source,2) then
    --print(Where({'1','2','3'}))
    --print(Where(nil,{'1','2','3'}))
    
    print(q.get_handle_from_id('I0018'))

    --p=q.get_person_from_id('I2604')
    --f=q.get_person_family(p[1].handle)
    --if f then print("FATHER",f[1].father_handle) end

    p=q.get_person_from_id('I0018')
    f=q.get_person_family(p[1].handle)
    if f then print("FATHER",f[1].father_handle) end


    --f=q.get_parent_family('c5db97fcf0c2c7f7442c525591b')
    --if f then print("FATHER",f.father_handle) end

    if db ~= nill then q.close() end
else
    return(q)
end
%</queries>
%<*place>
query=require("gramps.queries")

local Place = {_TYPE='module', _NAME='gramps.place' ,_VERSION='0.9.10.2024'}

local place_meta = {}

local places = {}
local order = {}

function Place:new(handle)

    if places[handle] then
		return places[handle]
	else
		r = query.get_place_from_handle(handle)
		if r[1] then
			places[handle]=r[1]
			if r[1].enclosed_by ~= "" then
                Place:new(r[1].enclosed_by)
            end
			return r[1]
		else
			return(nil)
		end
	end
end

local function check_place(handle)
	p=Place(handle)
	--print("check_handle",p.handle)
	return p.handle
end

function Place:all()
	local r = query.get_place_from_handle(nil,false)
	for i,p in ipairs(r) do
		order[i]=p.handle
		places[p.handle] = p
	end
end

---------------UTIL----------------------
local function is_empty(s,a,b)
	if #s>0 then return(b) else return(a) end end
----------------NAME----------------------
function Place.fulname(handle)
	local p=Place(handle)
	local s=p.title
	if p.enclosed_by ~= ""  then
        local s = s..", "..Place.fulname(p.enclosed_by)
    end
    return s
end

function Place.name(handle)
	local p=Place(handle)
	if p==nil then return "" end
	return p.title
end

-------------------------------------
-- Set the metatable to the module
-------------------------------------
local function place_iterator(order, i)
	--print(order,key)
	i = i + 1
    if i <= #order then
		--print(i,order[i])
        return i, places[order[i]]
    end
end

setmetatable(Place, {
    __call = function(_,handle)
        --print(handle)
        return Place:new(handle)
    end,

	__index = function(_,handle)
		--print("index: ",handle,#personen,Pers(handle))
		--p=Pers(handle)
		--print(p,p.surname)
		return Place(handle)
	end,

	__newindex = function(_,handle,p)
		places[handle]=p
	end,

	__pairs = function(_)
		--print("iterator",t,personen,i)
        return place_iterator, order, 0  -- Return the custom iterator function, table, and initial index
	end
})

return Place
%</place>
%<*pickle>
require("gramps.util")
local dodebug = false
local MAX_SIZE = (2^63 - 1)

-- Pickle opcodes.  See pickletools.py for extensive docs.  The listing
-- here is in kind-of alphabetical order of 1-character pickle code.
-- pickletools groups them by purpose.

MARK           = string.byte('(')   -- push special markobject on stack
STOP           = string.byte('.')   -- every pickle ends with STOP
POP            = string.byte('0')   -- discard topmost stack item
POP_MARK       = string.byte('1')   -- discard stack top through topmost markobject
DUP            = string.byte('2')   -- duplicate top stack item
FLOAT          = string.byte('F')   -- push float object; decimal string argument
INT            = string.byte('I')   -- push integer or bool; decimal string argument
BININT         = string.byte('J')   -- push four-byte signed int
BININT1        = string.byte('K')   -- push 1-byte unsigned int
LONG           = string.byte('L')   -- push long; decimal string argument
BININT2        = string.byte('M')   -- push 2-byte unsigned int
NONE           = string.byte('N')   -- push None
PERSID         = string.byte('P')   -- push persistent object; id is taken from string arg
BINPERSID      = string.byte('Q')   --  "       "         "  ;  "  "   "     "  stack
REDUCE         = string.byte('R')   -- apply callable to argtuple, both on stack
STRING         = string.byte('S')   -- push string; NL-terminated string argument
BINSTRING      = string.byte('T')   -- push string; counted binary string argument
SHORT_BINSTRING= string.byte('U')   --  "     "   ;    "      "       "      " < 256 bytes
UNICODE        = string.byte('V')   -- push Unicode string; raw-unicode-escaped'd argument
BINUNICODE     = string.byte('X')   --   "     "       "  ; counted UTF-8 string argument
APPEND         = string.byte('a')   -- append stack top to list below it
BUILD          = string.byte('b')   -- call __setstate__ or __dict__.update()
GLOBAL         = string.byte('c')   -- push self.find_class(modname, name); 2 string args
DICT           = string.byte('d')   -- build a dict from stack items
EMPTY_DICT     = string.byte('}')   -- push empty dict
APPENDS        = string.byte('e')   -- extend list on stack by topmost stack slice
GET            = string.byte('g')   -- push item from memo on stack; index is string arg
BINGET         = string.byte('h')   --   "    "    "    "   "   "  ;   "    " 1-byte arg
INST           = string.byte('i')   -- build & push class instance
LONG_BINGET    = string.byte('j')   -- push item from memo on stack; index is 4-byte arg
LIST           = string.byte('l')   -- build list from topmost stack items
EMPTY_LIST     = string.byte(']')   -- push empty list
OBJ            = string.byte('o')   -- build & push class instance
PUT            = string.byte('p')   -- store stack top in memo; index is string arg
BINPUT         = string.byte('q')   --   "     "    "   "   " ;   "    " 1-byte arg
LONG_BINPUT    = string.byte('r')   --   "     "    "   "   " ;   "    " 4-byte arg
SETITEM        = string.byte('s')   -- add key+value pair to dict
TUPLE          = string.byte('t')   -- build tuple from topmost stack items
EMPTY_TUPLE    = string.byte(')')   -- push empty tuple
SETITEMS       = string.byte('u')   -- modify dict by adding topmost key+value pairs
BINFLOAT       = string.byte('G')   -- push float; arg is 8-byte float encoding

TRUE           = 'I01'  -- not an opcode; see INT docs in pickletools.py
FALSE          = 'I00'  -- not an opcode; see INT docs in pickletools.py

-- Protocol 2

PROTO          = 0x80  -- identify pickle protocol
NEWOBJ         = 0x81  -- build object by applying cls.__new__ to argtuple
EXT1           = 0x82  -- push object from extension registry; 1-byte index
EXT2           = 0x83  -- ditto, but 2-byte index
EXT4           = 0x84  -- ditto, but 4-byte index
TUPLE1         = 0x85  -- build 1-tuple from stack top
TUPLE2         = 0x86  -- build 2-tuple from two topmost stack items
TUPLE3         = 0x87  -- build 3-tuple from three topmost stack items
NEWTRUE        = 0x88  -- push True
NEWFALSE       = 0x89  -- push False
LONG1          = 0x8a  -- push long from < 256 bytes
LONG4          = 0x8b  -- push really big long

_tuplesize2code = {EMPTY_TUPLE, TUPLE1, TUPLE2, TUPLE3}

-- Protocol 3 (Python 3.x)

BINBYTES       = string.byte('B')   -- push bytes; counted binary string argument
SHORT_BINBYTES = string.byte('C')   --  "     "   ;    "      "       "      " < 256 bytes

-- Protocol 4

SHORT_BINUNICODE = 0x8c  -- push short string; UTF-8 length < 256 bytes
BINUNICODE8      = 0x8d  -- push very long string
BINBYTES8        = 0x8e  -- push very long bytes string
EMPTY_SET        = 0x8f  -- push empty set on the stack
ADDITEMS         = 0x90  -- modify set by adding topmost stack items
FROZENSET        = 0x91  -- build frozenset from topmost stack items
NEWOBJ_EX        = 0x92  -- like NEWOBJ but work with keyword only arguments
STACK_GLOBAL     = 0x93  -- same as GLOBAL but using names on the stacks
MEMOIZE          = 0x94  -- store top of the stack in memo
FRAME            = 0x95  -- indicate the beginning of a new frame

-- Protocol 5

BYTEARRAY8       = 0x96  -- push bytearray
NEXT_BUFFER      = 0x97  -- push next out-of-band buffer
READONLY_BUFFER  = 0x98  -- make top of stack readonly

HIGHEST_PROTOCOL = 5
DEFAULT_PROTOCOL = 5

-----------------------------------------------------------------------------------
--     STACK
-----------------------------------------------------------------------------------
-- Custom type function to check for our custom __type
local function custom_type(obj)
    local mt = getmetatable(obj)
    if mt and mt.__type then
        return mt.__type
    else
        return type(obj)  -- Fallback to default Lua types
    end
end

local Stack = {_TYPE='module', _NAME='stack', __type="stack"}
Stack.__index = Stack
function Stack:new()
    local stack={pile ={} }
    setmetatable(stack,Stack)
    return stack
end
-- Push an element onto the stack
function make_string(val)
    local s=""
    local t = custom_type(val)
    if t=="stack" then
        for i,v in ipairs(val.pile) do
            s=s..make_string(v)
        end
        s = "{"..s.."}, "
    elseif t=="table" then
        for i,v in ipairs(val) do
            s=s..make_string(v)
        end
        s = "{"..s.."}, "
    else
        s=tostring(val)..", "
    end
    return s
end

function Stack:push(value)
    --print("push", custom_type(value),make_string(value))
    if custom_type(value) == "stack" then
        table.insert(self.pile, value:copy())
    elseif custom_type(value) == "table" then
        table.insert(self.pile, table.copy(value))
    else
        table.insert(self.pile, value)
    end
end

-- Pop an element from the stack
function Stack:pop(stack)
    return table.remove(self.pile)
end

function Stack:copy()
    copy = Stack:new()
    for key, value in pairs(self.pile) do
        if type(value) == "table" then
            copy.pile[key] = value
        else
            copy.pile[key] = value
        end
    end
    return copy
end

function Stack:last()
    --print("last",make_string(self.pile))
    return self.pile[#self.pile]
end
function Stack:print()
    print("STACK",make_string(self.pile))
end
function Stack:get()
    return self.pile
end
-----------------------------------------------------------------------------------
--     FRAME
-----------------------------------------------------------------------------------
frame = {size = 0, current_frame = 0}

function frame:new(buf)
    self.size = #buf
    --print("frame",self.size,buf)
    if type(buf)=="string" then
        self.dat = {}
        for i = 1, #buf do
            self.dat[i] = string.byte(buf, i)
        end
    else
        self.dat = buf
    end
    self.current_frame = 1
    return self
end

function frame:read(n)
    local str={}

    for i = self.current_frame, self.current_frame+n-1 do
        assert(i <= self.size,"Read beyound data size in FRAME")
        if dodebug then print(string.format("n=%3d current:%3d of %3d getting %3d", n,i, self.size,self.dat[i])) end
        --assert(string.format("n=%3d current:%3d of %3d getting %3d", n,i, self.size,self.dat[i]))
        table.insert(str,self.dat[i])
    end
    self.current_frame = self.current_frame + n
    --assert(self.current_frame <115,"onder de 400")
    return str
end

function frame:readline(n)
    local data={}
    for i=self.current_frame, self.size do
        assert(i <= self.size,"Read beyound data size in FRAME")
        table.insert(data,self.data[i])
        self.current_frame = self.current_frame + 1
        if self.data[i] == string.byte("\n") then break end
    end
    return data
end

-----------------------------------------------------------------------------------
--     DEPICKLE
-----------------------------------------------------------------------------------
depickle = depickle or {}
function depickle.depickle(data)
    depickle.stack = Stack:new()
    depickle.metastack = Stack:new()
    depickle.append = function(v) depickle.stack:push(v) end
    depickle.memo = {}
    depickle.frame  = frame:new(data)
    --assert(false,string.format("data %d %s",#data,data))

    while true do
        key = frame:read(1)[1]
        if dodebug then print(string.format("key=%3d or %s",key,string.char(key))) end
        assert(depickle.dispatch[key],string.format("Dispatching error key=%3d or %s",key,string.char(key)))
        depickle.dispatch[key]()
        if key==STOP then
            return depickle._Stop
        end
    end
end

function depickle.pop_mark()
        local items = depickle.stack:get()
        depickle.stack = depickle.metastack:pop()
        depickle.append = function(v) depickle.stack:push(v) end
        return items
end

depickle.dispatch = {}

function depickle.load_proto()
        local proto = depickle.read(1)[1]
        assert( 0 <= proto and proto <= HIGHEST_PROTOCOL,
            string.format("unsupported pickle protocol: %d", proto))
        depickle.proto = proto
end
depickle.dispatch[PROTO] = depickle.load_proto

--[[
function depickle.load_frame()
        frame_size, = unpack('<Q', depickle.read(8))
        if frame_size > sys.maxsize:
            raise ValueError("frame size > sys.maxsize: %d" % frame_size)
        depickle._unframer.load_frame(frame_size)
end
depickle.dispatch[FRAME] = depickle.load_frame

function depickle.load_persid()
        try:
            pid = depickle.readline()[:-1].decode("ascii")
        except UnicodeDecodeError:
            raise UnpicklingError(
                "persistent IDs in protocol 0 must be ASCII strings")
        depickle.append(depickle.persistent_load(pid))
end
depickle.dispatch[PERSID[0] ] = depickle.load_persid
function depickle.load_binpersid()
        pid = depickle.stack.pop()
        depickle.append(depickle.persistent_load(pid))
end
depickle.dispatch[BINPERSID[0] ] = depickle.load_binpersid
]]--
function depickle.load_none()
        depickle.append(nil)
end
depickle.dispatch[NONE] = depickle.load_none

function depickle.load_false()
        depickle.append(false)
end
depickle.dispatch[NEWFALSE] = depickle.load_false

function depickle.load_true()
        depickle.append(true)
end
depickle.dispatch[NEWTRUE] = depickle.load_true

function depickle.load_int()
        data = string.char(table.unpack(depickle.readline()))
        if data == FALSE then
            val = false
        elseif data == TRUE then
            val = true
        else
            val = tonumber(data) or 0
        end
        depickle.append(val)
end
depickle.dispatch[INT] = depickle.load_int

function depickle.load_binint()
        depickle.append(string.unpack('<i', string.char(table.unpack(depickle.read(4)))))
end
depickle.dispatch[BININT] = depickle.load_binint

function depickle.load_binint1()
        depickle.append(depickle.read(1)[1])
end
depickle.dispatch[BININT1] = depickle.load_binint1

function depickle.load_binint2()
        depickle.append(string.unpack('<H',string.char(table.unpack(depickle.read(2)))))
end
depickle.dispatch[BININT2] = depickle.load_binint2
--[[
function depickle.load_long()
        val = depickle.readline()[:-1]
        if val and val[-1] == b'L'[0]:
            val = val[:-1]
        depickle.append(int(val, 0))
end
depickle.dispatch[LONG[0] ] = depickle.load_long

function depickle.load_long1()
        n = depickle.read(1)[0]
        data = depickle.read(n)
        depickle.append(decode_long(data))
end
depickle.dispatch[LONG1[0] ] = depickle.load_long1

function depickle.load_long4()
        n, = unpack('<i', depickle.read(4))
        if n < 0:
            # Corrupt or hostile pickle -- we never write one like this
            raise UnpicklingError("LONG pickle has negative byte count")
        data = depickle.read(n)
        depickle.append(decode_long(data))
end
depickle.dispatch[LONG4[0] ] = depickle.load_long4

function depickle.load_float()
        depickle.append(float(depickle.readline()[:-1]))
end
depickle.dispatch[FLOAT[0] ] = depickle.load_float

function depickle.load_binfloat()
        depickle.append(unpack('>d', depickle.read(8))[0])
end
depickle.dispatch[BINFLOAT[0] ] = depickle.load_binfloat

function depickle._decode_string(depickle, value):
        # Used to allow strings from Python 2 to be decoded either as
        # bytes or Unicode strings.  This should be used only with the
        # STRING, BINSTRING and SHORT_BINSTRING opcodes.
        if depickle.encoding == "bytes":
            return value
        else:
            return value.decode(depickle.encoding, depickle.errors)

function depickle.load_string()
        data = depickle.readline()[:-1]
        # Strip outermost quotes
        if len(data) >= 2 and data[0] == data[-1] and data[0] in b'"\'':
            data = data[1:-1]
        else:
            raise UnpicklingError("the STRING opcode argument must be quoted")
        depickle.append(depickle._decode_string(codecs.escape_decode(data)[0]))
end
depickle.dispatch[STRING[0] ] = depickle.load_string

function depickle.load_binstring()
        # Deprecated BINSTRING uses signed 32-bit length
        len, = unpack('<i', depickle.read(4))
        if len < 0:
            raise UnpicklingError("BINSTRING pickle has negative byte count")
        data = depickle.read(len)
        depickle.append(depickle._decode_string(data))
end
depickle.dispatch[BINSTRING[0] ] = depickle.load_binstring

function depickle.load_binbytes()
        len, = unpack('<I', depickle.read(4))
        if len > maxsize:
            raise UnpicklingError("BINBYTES exceeds system's maximum size "
                                  "of %d bytes" % maxsize)
        depickle.append(depickle.read(len))
end
depickle.dispatch[BINBYTES[0] ] = depickle.load_binbytes

function depickle.load_unicode()
        depickle.append(str(depickle.readline()[:-1], 'raw-unicode-escape'))
end
depickle.dispatch[UNICODE[0] ] = depickle.load_unicode
]]--
function depickle.load_binunicode()
        local len = string.unpack('<I', string.char(table.unpack(depickle.read(4))))
        assert( len <= MAX_SIZE , string.format("BINUNICODE exceeds system's maximum size of %f bytes", MAX_SIZE) )
        --depickle.append(str(depickle.read(len), 'utf-8', 'surrogatepass'))
        --local t = depickle.read(len)
        depickle.append(string.char(table.unpack(depickle.read(len))))
end
depickle.dispatch[BINUNICODE] = depickle.load_binunicode

--[[
function depickle.load_binunicode8()
        len, = unpack('<Q', depickle.read(8))
        if len > maxsize:
            raise UnpicklingError("BINUNICODE8 exceeds system's maximum size "
                                  "of %d bytes" % maxsize)
        depickle.append(str(depickle.read(len), 'utf-8', 'surrogatepass'))
end
depickle.dispatch[BINUNICODE8[0] ] = depickle.load_binunicode8

function depickle.load_binbytes8()
        len, = unpack('<Q', depickle.read(8))
        if len > maxsize:
            raise UnpicklingError("BINBYTES8 exceeds system's maximum size "
                                  "of %d bytes" % maxsize)
        depickle.append(depickle.read(len))
end
depickle.dispatch[BINBYTES8[0] ] = depickle.load_binbytes8

function depickle.load_bytearray8()
        len, = unpack('<Q', depickle.read(8))
        if len > maxsize:
            raise UnpicklingError("BYTEARRAY8 exceeds system's maximum size "
                                  "of %d bytes" % maxsize)
        b = bytearray(len)
        depickle.readinto(b)
        depickle.append(b)
end
depickle.dispatch[BYTEARRAY8[0] ] = depickle.load_bytearray8

function depickle.load_next_buffer()
        if depickle._buffers is None:
            raise UnpicklingError("pickle stream refers to out-of-band data "
                                  "but no *buffers* argument was given")
        try:
            buf = next(depickle._buffers)
        except StopIteration:
            raise UnpicklingError("not enough out-of-band buffers")
        depickle.append(buf)
end
depickle.dispatch[NEXT_BUFFER[0] ] = depickle.load_next_buffer

function depickle.load_readonly_buffer()
        buf = depickle.stack[-1]
        with memoryview(buf) as m:
            if not m.readonly:
                depickle.stack[-1] = depickle.m.toreadonly()
end
depickle.dispatch[READONLY_BUFFER[0] ] = depickle.load_readonly_buffer

function depickle.load_short_binstring()
        len = depickle.read(1)[0]
        data = depickle.read(len)
        depickle.append(depickle._decode_string(data))
end
depickle.dispatch[SHORT_BINSTRING[0] ] = depickle.load_short_binstring

function depickle.load_short_binbytes()
        len = depickle.read(1)[0]
        depickle.append(depickle.read(len))
end
depickle.dispatch[SHORT_BINBYTES[0] ] = depickle.load_short_binbytes

function depickle.load_short_binunicode()
        len = depickle.read(1)[0]
        depickle.append(str(depickle.read(len), 'utf-8', 'surrogatepass'))
end
depickle.dispatch[SHORT_BINUNICODE[0] ] = depickle.load_short_binunicode
--]]

function depickle.load_tuple()
        local items = depickle.pop_mark()
        depickle.append(items)
end
depickle.dispatch[TUPLE] = depickle.load_tuple


function depickle.load_empty_tuple()
        depickle.append({})
end
depickle.dispatch[EMPTY_TUPLE] = depickle.load_empty_tuple

function depickle.load_tuple1()
        depickle.stack:push({depickle.stack:pop()})
end
depickle.dispatch[TUPLE1] = depickle.load_tuple1

function depickle.load_tuple2()
        local pop1 = depickle.stack:pop()
        depickle.stack:push({depickle.stack:pop(), pop1})
end
depickle.dispatch[TUPLE2] = depickle.load_tuple2

function depickle.load_tuple3()
        local pop1 = depickle.stack:pop()
        local pop2 = depickle.stack:pop()
        depickle.stack:push({depickle.stack.pop(),pop2,pop1})
end
depickle.dispatch[TUPLE3] = depickle.load_tuple3

function depickle.load_empty_list()
        depickle.append({})
end
depickle.dispatch[EMPTY_LIST] = depickle.load_empty_list

function depickle.load_empty_dictionary()
        depickle.append({})
end
depickle.dispatch[EMPTY_DICT] = depickle.load_empty_dictionary
--[[
function depickle.load_empty_set()
        depickle.append(set())
end
depickle.dispatch[EMPTY_SET[0] ] = depickle.load_empty_set

function depickle.load_frozenset()
        items = depickle.pop_mark()
        depickle.append(frozenset(items))
end
depickle.dispatch[FROZENSET[0] ] = depickle.load_frozenset

function depickle.load_list()
        items = depickle.pop_mark()
        depickle.append(items)
end
depickle.dispatch[LIST[0] ] = depickle.load_list

function depickle.load_dict()
        items = depickle.pop_mark()
        d = {items[i]: items[i+1]
             for i in range(0, len(items), 2)}
        depickle.append(d)
end
depickle.dispatch[DICT[0] ] = depickle.load_dict

    -- INST and OBJ differ only in how they get a class object.  It's not
    -- only sensible to do the rest in a common routine, the two routines
    -- previously diverged and grew different bugs.
    -- klass is the class to instantiate, and k points to the topmost mark
    -- object, following which are the arguments for klass.__init__.
function depickle._instantiate(depickle, klass, args):
        if (args or not isinstance(klass, type) or
            hasattr(klass, "__getinitargs__")):
            try:
                value = klass(*args)
            except TypeError as err:
                raise TypeError("in constructor for %s: %s" %
                                (klass.__name__, str(err)), err.__traceback__)
        else:
            value = klass.__new__(klass)
        depickle.append(value)

function depickle.load_inst()
        module = depickle.readline()[:-1].decode("ascii")
        name = depickle.readline()[:-1].decode("ascii")
        klass = depickle.find_class(module, name)
        depickle._instantiate(klass, depickle.pop_mark())
end
depickle.dispatch[INST[0] ] = depickle.load_inst

function depickle.load_obj()
        # Stack is ... markobject classobject arg1 arg2 ...
        args = depickle.pop_mark()
        cls = args.pop(0)
        depickle._instantiate(cls, args)
end
depickle.dispatch[OBJ[0] ] = depickle.load_obj

function depickle.load_newobj()
        args = depickle.stack.pop()
        cls = depickle.stack.pop()
        obj = cls.__new__(cls, *args)
        depickle.append(obj)
end
depickle.dispatch[NEWOBJ[0] ] = depickle.load_newobj

function depickle.load_newobj_ex()
        kwargs = depickle.stack.pop()
        args = depickle.stack.pop()
        cls = depickle.stack.pop()
        obj = cls.__new__(cls, *args, **kwargs)
        depickle.append(obj)
end
depickle.dispatch[NEWOBJ_EX[0] ] = depickle.load_newobj_ex

function depickle.load_global()
        module = depickle.readline()[:-1].decode("utf-8")
        name = depickle.readline()[:-1].decode("utf-8")
        klass = depickle.find_class(module, name)
        depickle.append(klass)
end
depickle.dispatch[GLOBAL[0] ] = depickle.load_global

function depickle.load_stack_global()
        name = depickle.stack.pop()
        module = depickle.stack.pop()
        if type(name) is not str or type(module) is not str:
            raise UnpicklingError("STACK_GLOBAL requires str")
        depickle.append(depickle.find_class(module, name))
end
depickle.dispatch[STACK_GLOBAL[0] ] = depickle.load_stack_global

function depickle.load_ext1()
        code = depickle.read(1)[0]
        depickle.get_extension(code)
end
depickle.dispatch[EXT1[0] ] = depickle.load_ext1

function depickle.load_ext2()
        code, = unpack('<H', depickle.read(2))
        depickle.get_extension(code)
end
depickle.dispatch[EXT2[0] ] = depickle.load_ext2

function depickle.load_ext4()
        code, = unpack('<i', depickle.read(4))
        depickle.get_extension(code)
end
depickle.dispatch[EXT4[0] ] = depickle.load_ext4

function depickle.get_extension(depickle, code):
        obj = _extension_cache.get(code, _NoValue)
        if obj is not _NoValue:
            depickle.append(obj)
            return
        key = _inverted_registry.get(code)
        if not key:
            if code <= 0: # note that 0 is forbidden
                # Corrupt or hostile pickle.
                raise UnpicklingError("EXT specifies code <= 0")
            raise ValueError("unregistered extension code %d" % code)
        obj = depickle.find_class(*key)
        _extension_cache[code] = depickle.obj
        depickle.append(obj)

function depickle.find_class(depickle, module, name):
        # Subclasses may override this.
        sys.audit('pickle.find_class', module, name)
        if depickle.proto < 3 and depickle.fix_imports:
            if (module, name) in _compat_pickle.NAME_MAPPING:
                module, name = _compat_pickle.NAME_MAPPING[(module, name)]
            elif module in _compat_pickle.IMPORT_MAPPING:
                module = _compat_pickle.IMPORT_MAPPING[module]
        __import__(module, level=0)
        if depickle.proto >= 4 and '.' in name:
            dotted_path = name.split('.')
            try:
                return _getattribute(sys.modules[module], dotted_path)
            except AttributeError:
                raise AttributeError(
                    f"Can't resolve path {name!r} on module {module!r}")
        else:
            return getattr(sys.modules[module], name)

function depickle.load_reduce()
        stack = depickle.stack
        args = stack.pop()
        func = stack[-1]
        stack[-1] = depickle.func(*args)
end
depickle.dispatch[REDUCE[0] ] = depickle.load_reduce

function depickle.load_pop()
        if depickle.stack:
            del depickle.stack[-1]
        else:
            depickle.pop_mark()
end
depickle.dispatch[POP[0] ] = depickle.load_pop

function depickle.load_pop_mark()
        depickle.pop_mark()
end
depickle.dispatch[POP_MARK[0] ] = depickle.load_pop_mark

function depickle.load_dup()
        depickle.append(depickle.stack[-1])
end
depickle.dispatch[DUP[0] ] = depickle.load_dup

function depickle.load_get()
        i = int(depickle.readline()[:-1])
        try:
            depickle.append(depickle.memo[i])
        except KeyError:
            msg = f'Memo value not found at index {i}'
            raise UnpicklingError(msg) from None
end
depickle.dispatch[GET[0] ] = depickle.load_get
]]--

function depickle.load_binget()
        local i = depickle.read(1)[1]
        assert(depickle.memo[i+1] ~= nil,string.format("Memo value not found at index [%d]",i))
        depickle.append(depickle.memo[i+1]) --+1 frompython to lua
end
depickle.dispatch[BINGET] = depickle.load_binget

--[[
function depickle.load_long_binget()
        i, = unpack('<I', depickle.read(4))
        try:
            depickle.append(depickle.memo[i])
        except KeyError as exc:
            msg = f'Memo value not found at index {i}'
            raise UnpicklingError(msg) from None
end
depickle.dispatch[LONG_BINGET[0] ] = depickle.load_long_binget

]]--
function depickle.load_put()
        local i = int(depickle.readline())
        assert(i >= 0, "negative PUT argument")
        depickle.memo[i+1] = depickle.stack:last()
end
depickle.dispatch[PUT] = depickle.load_put

function depickle.load_binput()
        local i = depickle.read(1)[1]
        assert(i >= 0, "negative BINPUT argument")
        depickle.memo[i+1] = depickle.stack:last() -- +1 from python to Lua
end
depickle.dispatch[BINPUT] = depickle.load_binput

function depickle.load_long_binput()
        local i = string.unpack('<I', string.char(table.unpack(depickle.read(4))))
        assert(i < MAX_SIZE,"negative LONG_BINPUT argument")
        depickle.memo[i+1] = depickle.stack:last()
end
depickle.dispatch[LONG_BINPUT] = depickle.load_long_binput
--[[
function depickle.load_memoize()
        memo = depickle.memo
        memo[len(memo)] = depickle.stack[-1]
end
depickle.dispatch[MEMOIZE[0] ] = depickle.load_memoize
]]--
function depickle.load_append()
        local value  = depickle.stack:pop()
        local list  = depickle.stack:pop()
        table.insert(list,value)
        depickle.stack:push(list)
end
depickle.dispatch[APPEND] = depickle.load_append

function depickle.load_appends()
        local items = depickle.pop_mark()
        local list_obj = depickle.stack:pop()
        --try:
        --    extend = list_obj.extend
        --except AttributeError:
        --    pass
        --else:
        --    extend(items)
        --    return
        -- Even if the PEP 307 requires extend() and append() methods,
        -- fall back on append() if the object has no extend() method
        -- for backward compatibility.
        --append = list_obj.append

        for i,item  in ipairs(items) do
            table.insert(list_obj,item)
        end
        depickle.stack:push(list_obj)
end
depickle.dispatch[APPENDS] = depickle.load_appends
--[[
function depickle.load_setitem()
        stack = depickle.stack
        value = stack.pop()
        key = stack.pop()
        dict = stack[-1]
        dict[key] = depickle.value
end
depickle.dispatch[SETITEM[0] ] = depickle.load_setitem

function depickle.load_setitems()
        items = depickle.pop_mark()
        dict = depickle.stack[-1]
        for i in range(0, len(items), 2):
            dict[items[i] ] = depickle.items[i + 1]
end
depickle.dispatch[SETITEMS[0] ] = depickle.load_setitems

function depickle.load_additems()
        items = depickle.pop_mark()
        set_obj = depickle.stack[-1]
        if isinstance(set_obj, set):
            set_obj.update(items)
        else:
            add = set_obj.add
            for item in items:
                add(item)
end
depickle.dispatch[ADDITEMS[0] ] = depickle.load_additems

function depickle.load_build()
        stack = depickle.stack
        state = stack.pop()
        inst = stack[-1]
        setstate = getattr(inst, "__setstate__", _NoValue)
        if setstate is not _NoValue:
            setstate(state)
            return
        slotstate = None
        if isinstance(state, tuple) and len(state) == 2:
            state, slotstate = state
        if state:
            inst_dict = inst.__dict__
            intern = sys.intern
            for k, v in state.items():
                if type(k) is str:
                    inst_dict[intern(k)] = depickle.v
                else:
                    inst_dict[k] = depickle.v
        if slotstate:
            for k, v in slotstate.items():
                setattr(inst, k, v)
end
depickle.dispatch[BUILD[0] ] = depickle.load_build
]]--
function depickle.load_mark()
        depickle.metastack:push(depickle.stack)
        depickle.stack = Stack:new()
        depickle.append = function(v) depickle.stack:push(v) end
end
depickle.dispatch[MARK] = depickle.load_mark

function depickle.load_stop()
        depickle._Stop = depickle.stack:pop()
end
depickle.dispatch[STOP] = depickle.load_stop


function depickle.read(n)
        if depickle.frame then
            data = depickle.frame:read(n)
            if not data and n ~= 0 then
                depickle.frame = nil
                return depickle.file_read(n)
            end
            assert(#data == n, "pickle exhausted before end of frame")
            return data
        else
            return depickle.file_read(n)
        end
end

function depickle.readline()
        if depickle.frame then
            data = depickle.frame:readline(n)
            if not data then
                depickle.frame = nil
                return depickle.file_readline(n)
            end
            assert(data[#data] == string.byte("\n"), "pickle exhausted before end of frame")
            return string.sub(data, 1, -2)
        else
            return depickle.file_readline(n)
        end
end

function depickle.file_read(n) print("NOT INPLANTED") end
function depickle.file_readfile() print("NOT INPLANTED") end

function hex_to_bytes(hex)
    assert((#hex % 2) == 0, "Hex string must have an even number of characters")
    local byte_array = {}

    -- Iterate over the hex string in pairs of two characters
    for i = 1, #hex, 2 do
        local byte = hex:sub(i, i + 1)
        table.insert(byte_array, tonumber(byte, 16))
    end
    return byte_array
end

local function old_method(p)
    local json = require("gramps.json")
    local command = string.format('python3.6 /home/marc/texmf/tex/luatex/lib/gramps/depickle.py %s', p)
    local handle = io.popen(command)
    local result = handle:read("*all")
    handle:close()
    --print(result)
        --local ar=parse_tuple(result)
    return json.decode(result)
end

if arg ~= nil and arg[0] == string.sub(debug.getinfo(1,'S').source,2) then
    local util=require("texutil.util_base")

    s1=Stack:new()
    print(custom_type(s1))
    s2=Stack:new()
    s1:push("hallo")
    s2:push(2)
    s1:push(s2)
    --80 03 28 58 1B 00 00 00 6335646239376636
    local p1 ="800328581B00000063356462393766363933353531383261393364336266373631373271005805000000453239363371014B0C58000000007102867103284B004B004B00284B1D4B014DD2078974710468024A506B25004B007471056802581B00000063356462393765373539393138386338333435353165376437666671065D71075D71085D71095D710A4A8AE40A515D710B8974710C2E"
    local p2 = "800328581B00000063356462393830303364303237366666363462306263303363643971005805000000493036393571014B0128895D71025D71034E580600000057696C6C656D71045D71052858050000004865696A6E710658000000007107884B016807867108680774710961680768074B02680786710A68074B004B0068076807680774710B5D710C4AFFFFFFFF4B005D710D28895D710E5D710F581B00000063356462393830303364343463346131616566386366333263386671104B016807867111747112615D71135D7114581B0000006335646239376565303537346237656230323931633437363562647115615D71162828895D71175D71185D7119581B000000356364623937666637386365363962386264646330383665663039711A284B3D4B144B434B2274711B74711C28895D711D5D711E5D711F581B0000006466343736666264636533343464663665323436346335633466317120284B0B4B304B2F4B4C74712174712228895D71235D71245D7125581B0000006466343736666264636330323235316639363135616166363338377126284B054B3E4B224B5E74712774712828895D71295D712A5D712B581B000000646634373666626463316231633638366338316131313938353966712C284B174B0D4B284B2B74712D74712E28895D712F5D71305D7131581B0000006466343736666264636432343636323061353036663335656339347132284B334B034B504B3B74713374713428895D71355D71365D7137581B0000006466343736666264636234353939303539633733626363383261617138284B174B004B2E4B1674713974713A28895D713B5D713C5D713D581B000000646634373666626463626331616431346338356662306538663965713E284B014B154B234B3274713F74714028895D71415D71425D7143581B0000006466343736666264633461323239353035646662643738313731317144284B0D4B4B4B174B5A74714574714628895D71475D71485D7149581B000000646634373666626463313637646432636362643230343533373631714A284B294B324B2E4B3C74714B74714C28895D714D5D714E5D714F581B0000006466343736666264633061323664383938363662666631373439647150284B2A4B424B314B4D74715174715228895D71535D71545D7155581B0000006466343736666264636164313666343461656132396438363638377156284B164B4C4B1E4B5B74715774715828895D71595D715A5D715B581B000000646634373666626463346333666666326262376636363134373735715C284B0B4B0D4B294B4B74715D74715E655D715F5D716028895D71615D71624B00580300000052494E716386716458030000003639357165747166615D71675D71685D71695D716A4A84E97B5B5D716B895D716C74716D2E"
    local p3 = "800328581B00000063356462393830303364343463346131616566386366333263386671005805000000453437343171014B0C58000000007102867103284B004B004B00284B144B044DCE078974710468024AEC6525004B007471056802581A000000633564623938303033643864303531646533333934653931613171065D71075D71085D71095D710A4A8EE40A515D710B8974710C2E"
    t=depickle.depickle(hex_to_bytes(p2))
    print(util.dump(t))

    --print()
    --print(util.dump(old_method(p2)))


else
    return depickle
end
%</pickle>
%<*person>
local event=require("gramps.events")
local query=require("gramps.queries")
local family=require("gramps.family")
local util=require("gramps.util")

local Pers = {_TYPE='module', _NAME='grps_persoon' ,_VERSION='0.2.10.2024'}
local pers_meta = {}


local personen = {}
local order = {}
local id_handle = {}

--function Pers(req) Pers:new(req) end
local function check_handle(req)
	local handle
	if type(req)=="string" then
		if #req >6 then
			handle=req
		else
			handle  = id_handle[req] or query.get_person_handle_from_id(req)
		end
	elseif type(req)=="table" then
		handle = {}
		for i,h in ipairs(req) do
			if #req >6 then
				table.insert(handle,h)
			else
				table.insert(handle, id_handle[req] or query.get_person_handle_from_id(h))
			end
		end
	end
	return handle
end

function Pers:new(req)
	handle = check_handle(req)

	--print("handle = ",req,util.dump(handle))
	local res={}
	local request={}
	local length=0

	if type(handle)=="table" then
		for i,h in ipairs(handle) do
			if personen[h] then
				res[h]=personen[h]
				length=length+1
			else
				table.insert(request,h)
			end
		end
	else
		if personen[handle] then
			return personen[handle]
		else
			request[1]=handle
		end
	end

	if #request>0 then
		r = query.get_person_from_handle(request,true)
		for i, p in ipairs(r) do
			personen[p.handle]=p
			id_handle[p.gramps_id] = p.handle
			res[p.handle]=p
			length=length+1
		end
	end
	--print("res = ", length )


	if length==0 then return nil end
	if length==1 then for k,v in pairs(res) do return v end end
	return res
end

local function check_person(req)
	p=Pers(req)
	--print("check_handle",p.handle)
	return p.handle
end

function Pers:all()

	local r = query.get_person_from_handle(nil,false)
	for i,p in ipairs(r) do
		order[i]=p.handle
		id_handle[p.gramps_id]=p.handle
		--print(i,p.handle,p)
		personen[p.handle] = p
	end
	table.sort(order, function(a,b)
		if personen[a].surname==personen[b].surname then
			return personen[a].given_name<personen[b].given_name
		else
			return personen[a].surname<personen[b].surname
		end
	end)

	--print("getting events")
	evs = query.get_events_from_persons()
	local i=0
	for i,e in ipairs(evs) do
		event[e.handle]=e

		if Pers[e.person_handle].events == nil then Pers[e.person_handle].events={} end
        table.insert(Pers[e.person_handle].events,e.handle)
	end
	print("Getting birth and baptism dates")
	for h,p in pairs(Pers) do
		if p.events then
			Pers.birth(p.handle)
			Pers.baptism(p.handle)
			Pers.death(p.handle)
			Pers.burial(p.handle)
		--print(util.dump(Pers[p.handle].birth))
		end
	end
end

function Pers.events(handle)
	--print("handle in person event ",handle)
	if Pers[handle].events == nil then
		--print("Getting events...")
        Pers[handle].events = event.events(handle)
	end
	return Pers[handle].events
end

----------------NAME----------------------
function Pers.fullname(handle)
	local p=Pers(handle)
	if p then
		return p.given_name..util.is_empty(p.given_name,""," ")..p.surname
	else return "NF" end
end
function Pers.firstname(handle)
	local p=Pers(handle)
	if p then
		return util.is_empty(p.given_name,"",p.given_name)
	else return "NF" end
end
function Pers.familyname(handle)
	local p=Pers(handle)
	if p then
		return util.is_empty(p.surname,"",p.surname)
	else return "NF" end
end
----------------------------------------------

function Pers.dateindication(handle)
	local ret = 0
	local pevs = Pers.events(handle)

	local evs = event.get_event_by_type(pevs,event.TYPE.BIRTH)
	if evs[1] then
		local ev=event[evs[1]]
		if blob and blob[4] ~= nil then
			ret = util.days_from_year_0(ev.blob_data[4][4][3],ev.blob_data[4][4][2],ev.blob_data[4][4][1])
		end
	else
		evs = event.get_event_by_type(pevs,event.TYPE.BAPTISM)
		if evs[1] then
			local ev=event[evs[1]]
			if blob and blob[4] ~= nil then
				ret = util.days_from_year_0(ev.blob_data[4][4][3],ev.blob_data[4][4][2],ev.blob_data[4][4][1])
			end
		end
	end
	return ret
end

function Pers.birth(handle)
	if Pers[handle].birth then return Pers[handle].birth end
	Pers[handle].birth={}
	local pevs = Pers.events(handle)
	local evs = event.get_event_by_type(pevs,event.TYPE.BIRTH)
	if evs[1] then
		local blob=event[evs[1]].blob_data
		--print(handle,evs[1],util.dump(blob))
		if blob and blob[4] ~= nil then
			Pers[handle].birth=blob[4][4]
		end
	end
	return Pers[handle].birth
end
function Pers.baptism(handle)
	if Pers[handle].baptism then return Pers[handle].baptism end
	Pers[handle].baptism={}
	local pevs = Pers.events(handle)
	local evs = event.get_event_by_type(pevs,event.TYPE.BAPTISM)
	if evs[1] then
		local ev=event[evs[1]]
		if blob and blob[4] ~= nil then
			Pers[handle].baptsm=ev.blob_data[4][4]
		end
	end
	return Pers[handle].baptism
end
function Pers.death(handle)
	if Pers[handle].death then return Pers[handle].death end
	Pers[handle].death={}
	local pevs = Pers.events(handle)
	local evs = event.get_event_by_type(pevs,event.TYPE.DEATH)
	if evs[1] then
		local blob=event[evs[1]].blob_data
		--print(handle,evs[1],util.dump(blob))
		if blob and blob[4] ~= nil then
			Pers[handle].death=blob[4][4]
		end
	end
	return Pers[handle].death
end
function Pers.burial(handle)
	if Pers[handle].burial then return Pers[handle].burial end
	Pers[handle].burial={}
	local pevs = Pers.events(handle)
	local evs = event.get_event_by_type(pevs,event.TYPE.BURIAL)
	if evs[1] then
		local ev=event[evs[1]]
		if blob and blob[4] ~= nil then
			Pers[handle].burial=ev.blob_data[4][4]
		end
	end
	return Pers[handle].burial
end

---**********************************
function Pers.make_birth_death()
	print("get all events")
	event.events()

	local r = query.get_person_from_handle(nil,false)
	for i,p in ipairs(r) do
		order[i]=p.handle
		id_handle[p.gramps_id]=p.handle
		p.events = event.events(p.handle)
		--print(i,p.handle,p)
		personen[p.handle] = p
	end
	table.sort(order, function(a,b)
			if personen[a].surname==personen[b].surname then
				return personen[a].given_name<personen[b].given_name
			else
				return personen[a].surname<personen[b].surname
			end
		end)


end
-----------------------------------------------------

function Pers.sort_person_handles(handles)
   local s={}
   for i,h in ipairs(handles) do
      s[i]={i,Pers.dateindication(h)}
   end
   table.sort( s, function(a, b) return a[2] < b[2] end )
   return s
end

function Pers.family(handle)
	local p=Pers(handle)
	--print(handle,util.dump(p))
	local handle = p.handle
	--print("person family: ",handle)

	if Pers[handle].parents == nil then
		Pers[handle].spouses, Pers[handle].parents = family.get_person_family(handle)
	--print(util.dump(Pers[handle]))
	end
	--print(util.dump(Pers[handle]))
	return Pers[handle]
end

function Pers.parents(handle)
	--print("person parent: ",handle)
	local p=Pers.family(handle)
	return p.parents
end

function Pers.has_parents(handle)
	local parents=Pers.parents(handle)
	return (parents ~= nil)
end

function Pers.spouses(handle)
	local p=Pers.family(handle)
	return p.spouses
end

function Pers.has_children(handle)
	for i,fh in ipairs(Pers.spouses(handle)) do
        local children = family.get_children(fh)
        if #children > 0 then return true end
	end
	return false
end
-------------------------------------
-- Set the metatable to the module
-------------------------------------
local function pers_iterator(order, i)
	--print(order,key)
	i = i + 1
    if i <= #order then
		--print(i,order[i])
        return i, personen[order[i]]
    end
end

setmetatable(Pers, {
    __call = function(_,handle)
        return Pers:new(handle)
    end,

	__index = function(_,handle)
		return Pers(handle)
	end,

	__newindex = function(_,handle,p)
		personen[handle]=p
	end,

	__pairs = function(_)
        return pers_iterator, order, 0  -- Return the custom iterator function, table, and initial index
	end
})



if arg ~= nil and arg[0] == string.sub(debug.getinfo(1,'S').source,2) then
    --pass
    print(Pers.fulname('I0692'))
    print(Pers.fulname('I999009'))
 --   local p = Pers('I0692')
--    local p = Pers({'I2604','I0692'})
--    local p = Pers('I2604')
--    print("final result",util.dump(p))
    --print(Pers['I0692'].surname)
--[[	Pers:all()
	i=0
	for k,p in pairs(order) do
		i=i+1
		print(i,k,p)--.given_name,p.surname)
		if i>10 then break end
	end
	i=0
	for k,p in pairs(Pers) do
		i=i+1
		print(i,k,p.handle,p.given_name,p.surname)
		if i>10 then break end
	end
    --    Pers:events(p1)
--    p1 =pers:new(query.get_handle_from_id('I0692'))
--	pers.LifeEvents(p1)
--	pers.Residence(p1)
	--print(Pers.fulbirth('I0692'))
	--print(Pers.fulLifeEvents('I0692'))
	--print(Pers.fulLifeEvents('I0689'))
	f=Pers.parents('I0689')
	print(util.dump(f))
]]--
	print(check_person('I0565'))

else
    return(Pers)
end

--[[
        return {
            "type": "object",
            "title": _("Person"),
            "properties": {
                "_class": {"enum": [cls.__name__]},
                1 "handle": {"type": "string",
                           "maxLength": 50,
                           "title": _("Handle")},
                2 "gramps_id": {"type": "string",
                              "title": _("Gramps ID")},
                3 "gender": {"type": "integer",
                           "minimum": 0,
                           "maximum": 2,
                           "title": _("Gender")},
                4 "primary_name": Name.get_schema(),
                5"alternate_names": {"type": "array",
                                    "items": Name.get_schema(),
                                    "title": _("Alternate names")},
                6 "death_ref_index": {"type": "integer",
                                    "title": _("Death reference index")},
                7 "birth_ref_index": {"type": "integer",
                                    "title": _("Birth reference index")},
                8 "event_ref_list": {"type": "array",
                                   "items": EventRef.get_schema(),
                                   "title": _("Event references")},
                9 "family_list": {"type": "array",
                                "items": {"type": "string",
                                          "maxLength": 50},
                                "title": _("Families")},
                10 "parent_family_list": {"type": "array",
                                       "items": {"type": "string",
                                                 "maxLength": 50},
                                       "title": _("Parent families")},
                11 "media_list": {"type": "array",
                               "items": MediaRef.get_schema(),
                               "title": _("Media")},
                12 "address_list": {"type": "array",
                                 "items": Address.get_schema(),
                                 "title": _("Addresses")},
                13 "attribute_list": {"type": "array",
                                   "items": Attribute.get_schema(),
                                   "title": _("Attributes")},
                14 "urls": {"type": "array",
                         "items": Url.get_schema(),
                         "title": _("Urls")},
                15 "lds_ord_list": {"type": "array",
                                 "items": LdsOrd.get_schema(),
                                 "title": _("LDS ordinances")},
                16 "citation_list": {"type": "array",
                                  "items": {"type": "string",
                                            "maxLength": 50},
                                  "title": _("Citations")},
                17 "note_list": {"type": "array",
                              "items": {"type": "string",
                                        "maxLength": 50},
                              "title": _("Notes")},
                18 "change": {"type": "integer",
                           "title": _("Last changed")},
                19 "tag_list": {"type": "array",
                             "items": {"type": "string",
                                       "maxLength": 50},
                             "title": _("Tags")},
                20 "private": {"type": "boolean",
                            "title": _("Private")},
                21 "person_ref_list": {"type": "array",
                                    "items": PersonRef.get_schema(),
                                    "title": _("Person references")}
]]--
%</person>
%<*pedegree>
local grps = grps or {}


local util=require("gramps.util")
local person=require("gramps.person")
local ev=require("gramps.events")
local family=require("gramps.family")
local util  =require("gramps.util")
local tprt=require("gramps.grpstex")
local query=require("gramps.queries")

local print = require("gramps.output")

grps.do_children = true
grps.do_spouse = true
grps.do_parents = true

function grps.Cfulname(idx)
    return person.fulname(kwartierstaat_index[idx])
end

function grps.Cfirstname(idx)
    return person.firstname(kwartierstaat_index[idx])
end

function grps.setdatabase(db)
    query.init(db)
end

-----------------------------------------------------------------
---    kwartierstaat
-----------------------------------------------------------------
grps.central_id =""
kwartierstaat_index={}
descendence_index={}
generation_size={}
--
-- Setting up ancestor numbering

local function fill_kwartierstaat_index(id,i,maxgen,gen)
    print.i("id="..id.." - "..i)

    local p=person(id)

    --io.write(p.gramps_id.." "..person.fulname(p.handle).."\n")

    kwartierstaat_index[i]=p.handle
    person[p.handle].kwartiernummer = i

    if gen<=maxgen then
        local parents = person.parents(p.handle)
        for j, fid in ipairs(parents) do
            if family[fid].father_handle ~= nil then
                fill_kwartierstaat_index(family[fid].father_handle,i*2,maxgen,gen+1)
            end
            if family[fid].mother_handle ~= nil then
                fill_kwartierstaat_index(family[fid].mother_handle,i*2+1,maxgen,gen+1)
            end
        end
    end
    return p.handle
end


local function fill_descendence_index(id,op,gen)
    if  op.childless or person.has_children(id) then
        if generation_size[gen] then
            generation_size[gen] =  generation_size[gen] +1
        else
            generation_size[gen] =1
        end

        local p=person(id)

        local indexer=""
        if op.pergen then
            indexer = (gen-1)*100 + generation_size[gen]
        else
            for i=1,gen do
                if #indexer==0 then
                    indexer=""..generation_size[i]
                else
                    indexer = indexer.."."..generation_size[i]
                end
            end
        end

        table.insert(descendence_index,{indexer,p.handle,p.gramps_id})
        person[p.handle].ancestornummer = util.Roman(gen)..util.alphanumber(generation_size[gen])

        print.i("id="..id.." - ("..person[p.handle].ancestornummer..") "..indexer)

        if gen < op.maxgen then
            local spouses = person.spouses(p.handle)
            for i, fid in ipairs(spouses) do

                local children = family.get_children(fid)
                    --print(util.dump(children))
                local sorted = person.sort_person_handles(children)

                for j,ic in ipairs(sorted) do
                        fill_descendence_index(children[ic[1]],op,gen+1)
                end
            end
        end
    end
end

function grps.set(id,max_gen)
    kwartierstaat_index={}
    --io.write("init "..id.." "..max_gen)
    local max_gen = max_gen or 3
    grps.central_id=id
    fill_kwartierstaat_index(id,1,max_gen,1)
end

if not string.split then
function string:split(delimiter)
    if not delimiter or delimiter == "" then
        return {self} -- If no delimiter is given, return the whole string
    end
    local result = {}

    for match in (self .. delimiter):gmatch("([^..delimiter..*])" .. delimiter) do
        table.insert(result, match)
    end
    return result
end
end

local function sort_func(a,b)
    local na=string.split(a[1],".")
    local nb=string.split(b[1],".")

    io.write("na ") for i,v in ipairs(na) do io.write(v..", ") end print("")
    io.write("nb ") for i,v in ipairs(nb) do io.write(v..", ") end print("")

    for i,v in ipairs(na) do
        if nb[i] then
            if v < nb[i] then return true end
        else -- a langer dan b
            return false
        end
    end
    return  (#na > #nb)
end

function grps.set_descendence(id,max_gen,pergen,childless)
    descendence_index ={}

    local include_childless = childless or false
    local pergen = (pergen==nil) or pergen --per generation (TRUE) or per branche
    local max_gen =max_gen or 3

    grps.central_id=id

    fill_descendence_index(id,{maxgen=max_gen,childless=include_childless,pergen=pergen},1)

    if pergen then
        table.sort(descendence_index,function(a,b) return a[1]<b[1] end)
    else
        --table.sort(descendence_index,sort_func)
    end
end

-- get gramps-handle from ancestor number

function grps.get(ind)
    local t=0
    local i
    for i,h in pairs(kwartierstaat_index) do
        t=t+1
        if i == ind then return h, (#kwartierstaat_index-t) end 
        if i > ind then return "",(#kwartierstaat_index-t+1) end
    end
    return "", -1
end

function grps.get_descendent(ind)
    if descendence_index[ind] then
        local index = descendence_index[ind]

        if type(index[1])=="string" then
            gens = string.split(index[1],".")
            --print.i(index[1].." "..#gens )
            return({#gens,index[2],index[1],index[3]})
        else
            local gen = 1 + math.floor(descendence_index[ind][1]/100)
            return( {gen, index[2], person[index[2]].ancestornummer,index[3]} )
        end
    else
        return{1000,"","",""}
    end
end

--  Preparing data for Genealytree.sty

function grps.descendent_tree_data(id,maxgen,gen)

    local gen=gen or 1
    local p=person(id)
    local link=""
    local s="child{"

    if p == nil then
        s = s .. "g[]{name=UN}}"
        return s
    end
    io.write("\nHandle"..p.handle.."\n")

    if gen==1 and person.has_parents(p.handle) then
        link=",hasparents" end
    if gen==maxgen and person.has_children(p.handle) then
        link=",haschildren" end

    s=s..tprt.tree_person(p.handle,'g',link)

    --s=s..tp.tree_person(p.handle,'p')
    if gen<maxgen then
        local spouses = person.spouses(p.handle)
        for i, fid in ipairs(spouses) do
            s=s .."union"
            local children = family.get_children(fid)
            if #children > 0 then
                s=s.."{" else s=s.."[childless]{" end

            if family[fid].father_handle==p.handle then
                s=s..tprt.tree_person(family[fid].mother_handle,'p')
            else
                s=s..tprt.tree_person(family[fid].father_handle,'p')
            end

            local children = family.get_children(fid)
            --print(util.dump(children))
            local sorted = person.sort_person_handles(children)

            for j,ic in ipairs(sorted) do
                s=s..grps.descendent_tree_data(children[ic[1]],maxgen,gen+1)
            end
            s=s.."}"
        end
    end
    s=s.."}\n"
    return s
end

function grps.ancestor_tree_data(id,maxgen,gen)
    local gen=gen or 1
    local s="parent{\n"
    local p=person(id)
    --print("kwartierstaat name: ",person.firstname(p.handle))
    s=s..tprt.tree_person(p.handle)

    if gen<maxgen then
        local parents = person.parents(p.handle)
        --print("kwartierstaat parents: ",util.dump(parents))
        for i, fid in ipairs(parents) do
            --print(family[fid].father_handle,family[fid].mother_handle)
            if family[fid].father_handle ~= nil then
                s=s..grps.ancestor_tree_data(family[fid].father_handle,maxgen,gen+1)
            end
            if family[fid].mother_handle ~= nil then
                s=s..grps.ancestor_tree_data(family[fid].mother_handle,maxgen,gen+1)
            end
        end
    end
    s=s.."}\n"
    return s
end


query.close()
if arg ~= nil and arg[0] == string.sub(debug.getinfo(1,'S').source,2) then
    --grps.long_print_person = tp.long_print_person
    --pass:
    --print(print_person('I0689'))
    --print("kwartirstaat I2604:\n",grps.kwartierstaat('I2604',5))
    --grps.set('I2604',3)
    --\Kwartierstaat[gen=4,depth=3]{I0876}

    --print(grps.ancestor_tree_data('I0565',3))
    --print(grps.descendent_tree_data('I2483',3))
    --print(grps.ancestor_tree_data('I1998',3))
    --print(grps.descendent_tree_data('I1998',3))

    grps.set_descendence('I7141',10,false)
    for i=1,#descendence_index do
        v=grps.get_descendent(i)
        print.i(i,v[1],v[2],v[3],v[4])
    end
    local s1="1.1.1.1"
    local s2="1.1"
    print(s1.." - " ..s2) if(sort_func({s1},{s2})) then print("true") else print("false") end
    --d=grps.get_descendent(3)
    --print(d[1],d[2],d[3])
    --grps.set('I0876',2)
    --for i,h in pairs(kwartierstaat_index) do
    --    tp.short_print_person(h,3)
    --end
    --print(grps.ancestor_tree_data('I0689',6))
else
    grps.long_print_person = tprt.long_print_person
    grps.short_print_person = tprt.short_print_person
    return(grps)
end

%</pedegree>
%<*output>
local Print={}
Print.print = print

local function color_text(c,txt)
    local colors={grey = "\x1b[38;20m",yellow = "\x1b[33;20m",red = "\x1b[31;20m",bold_red = "\x1b[31;1m",
        green = "\x1b[32m", blue = "\x1b[34m",purple = "\x1b[35m",cyan = "\x1b[36m",white = "\x1b[97m",
        reset = "\x1b[0m"}
    return(colors[c]..txt..colors.reset)
end
local function color_tex(c,txt)
    local colors={grey = "\x1b[38;20m",yellow = "\x1b[33;20m",red = "\x1b[31;20m",bold_red = "\x1b[31;1m",
        green = "\x1b[32m", blue = "\x1b[34m",purple = "\\e[35m",cyan = "\\string\\e[36m",white = "\x1b[97m",
        reset = "\\string\\e[0m"}
    return(colors[c]..txt..colors.reset)
end

local function place_message()
    local f
    local info = debug.getinfo(4, "nSl")
    --for k,v in pairs(info) do print(k.."="..v.."\\\\") end
    local filename = string.match(info.short_src, "[^\\/]+$")

    if info.name then f=info.what..":"..info.name else f=info.what end
    return(filename..":"..f.."("..info.currentline..")")
    --return("source")
end

local function glue_args(...)
    local args = {...}
    local txt

    if #args==1 then
        txt = args[1]
    else
        txt = ""
        for i, v in ipairs(args) do
            if type(v)~="string" then v=tostring(v) end
            txt = txt .. string.format("%10s",v)
        end
    end
    return txt
end

local function do_print(t,c,...)
    Print(color_text(c,t.." in "..place_message().." "..glue_args(...)))
end

--local function texconsole(txt)  texio.write_nl(color_tex('cyan',txt)) end
--local function texconsole(txt)  print("\\typeout{"..color_tex('cyan',txt).."}") end
local function texconsole(t,...)
    tex.print("\\Package"..t.."{"..place_message(txt).."}{"..glue_args(...).."}{}")
end

setmetatable(Print, {
    __call = function(_,handle)
        return Print.print(handle)
    end,
})


local sprint = io.write
if tex then
    Print.print = tex.print
    Print.s = function(...) tex.sprint(glue_args(...)) end
    Print.ms = function(...) tex.sprint("$"..glue_args(...).."$") end
    Print.i = function(...) texconsole("Info",...) end
    Print.w = function(...) texconsole("Warning",...) end
    Print.e = function(...) texconsole("Error",...) end
    Print.m = function(...) tex.sprint("$"..glue_args(...).."$") end
else
    Print.s = function(...) io.write(glue_args(...)) end
    Print.ms = function(...) io.write(color_text("cyan",glue_args(...))) end
    Print.i = function(...) do_print("Info","green",...) end
    Print.e = function(...) do_print("Error","red",...) end
    Print.w = function(...) do_print("Warning","blue",...) end
    Print.m = function(...) Print(color_text("cyan",glue_args(...))) end
end

if arg ~= nil and arg[0] == string.sub(debug.getinfo(1,'S').source,2) then
    local s="/home/marc/Nexcloud/tes.lua"
    local filename = string.match(s, "[^\\/]+$")
    print(filename)
    Print("Gewoon")
    Print.s("S print\n")
    Print.i("info")
    Print.e("error")
    Print.w("warning")
else
    return(Print)
end
%</output>
%<*metadata>
query=require("gramps.queries")
util=require("gramps.util")

local Meta = {_TYPE='module', _NAME='gramps.metadata' ,_VERSION='0.16.10.2024'}

local metadata = {}

function Meta.new(req)
    if metadata[req] then
		return metadata[req]
	else
		r = query.get_metadata(req)
		if r[1] then
            --print(util.dump(r[1]))
			metadata[r[1].setting] = r[1].blob_data
			return r[1].blob_data
		else
			return(nil)
		end
	end
end

function Meta:all()
	local r = query.get_metadata(nil)
	for i,md in ipairs(r) do
		metadata[md.setting] = md.blob_data
	end
end

function Meta.media_path()
    return Meta.new("media-path")
end

if arg ~= nil and arg[0] == string.sub(debug.getinfo(1,'S').source,2) then
    print(Meta.media_path())
    --for k,v in pairs(metadata) do
        --print("["..k.."]",string.format("%02X",string.byte(v,1)),string.format("%02X",string.byte(v,2)),string.sub(v,2,-2))

        --print("["..k.."]",v)
    --end
else
    return Meta
end
%</metadata>
%<*media>
query=require("gramps.queries")
event=require("gramps.events")
person=require("gramps.person")
util=require("gramps.util")
metadata =require("gramps.metadata")
local mediapath = metadata.media_path()

local Media = {_TYPE='module', _NAME='gramps.media' ,_VERSION='0.15.10.2024'}

local media = {}
local order = {}
local id_handle = {}

local function check_handle(req)
	if type(req)=="string" then
		if #req >6 then
			handle=req
		else
			handle  = id_handle[req] or query.get_media_handle_from_id(req)
		end
	end
	return handle
end


function Media:new(req)
    local handle = check_handle(req)
    if media[handle] then
		return media[handle]
	else
		r = query.get_media_from_handle(handle,false)
		if r[1] then
			media[handle]=r[1]
			id_handle[r[1].gramps_id]=handle
			return r[1]
		else
			return(nil)
		end
	end
end

function Media.all()
	local r = query.get_media_from_handle(nil,false)
	for i,m in ipairs(r) do
		order[i]={m.handle,m.path}
		media[m.handle] = m
	end
    table.sort(order, function(a, b) return a[2] < b[2] end )
end

local function imageplace(ih,ph)
    local obj={}
    p=person(ph)

    obj.handle=ph
    --print(ih,util.dump(p.blob_data[11]))
    for i,im in ipairs(p.blob_data[11]) do
        if im[5]==ih then
            local rec =im[6]
            if rec==nil then rec={0,0,100,100} end
            obj = {handle=ph,x1=rec[1],y1=rec[2],x2=rec[3],y2=rec[4],xm=0.5*(rec[1]+rec[3]),ym=0.5*(rec[2]+rec[4]),order=0}
            --print(ih,ph,util.dump(obj))
        end
    end
    return obj
end

function sort_person_handles(objs)
    local tag_height= 0
    for i,obj in ipairs(objs) do
        tag_height = tag_height + obj.y2 - obj.y1
    end
    tag_height = tag_height/#objs

    for i,obj in ipairs(objs) do
        obj.order = 100*math.floor(0.5+obj.ym/tag_height)+obj.xm
    end
    table.sort( objs, function(a, b) return a.order < b.order end )
    return objs
end

function Media.persons(handle)
	if Media[handle].persons == nil then
        local pers = {}
        local phs = query.get_person_from_media(handle)
        for i,ph in ipairs(phs) do
            local obj=imageplace(handle,ph.obj_handle)
            table.insert(pers,obj)
            --print(util.dump(obj))
        end

        Media[handle].persons = pers
        --person(pers)
	end
	return sort_person_handles(Media[handle].persons)
end

function Media.path(handle)
    m=Media(handle)
    local mediapath = metadata.media_path()
    return mediapath.."/"..m.path
end


-----------------------------------------------------

----------------NAME----------------------
function Media.fulname(handle)
	local m=Media(handle)
	local s=m.title
    return s
end

function Media.name(handle)
	local m=Media(handle)
	if m==nil then return "" end
	return m.desc
end

-------------------------------------
-- Set the metatable to the module
-------------------------------------
local function media_iterator(order, i)
	i = i + 1
    if i <= #order then
        return i, media[order[i][1]]
    end
end

setmetatable(Media, {
    __call = function(_,handle)
        return Media:new(handle)
    end,

	__index = function(_,handle)
		return Media:new(handle)
	end,

	__newindex = function(_,handle,p)
		media[handle]=p
	end,

	__pairs = function(_)
        return media_iterator, order, 0  -- Return the custom iterator function, table, and initial index
	end
})



if arg ~= nil and arg[0] == string.sub(debug.getinfo(1,'S').source,2) then
    --id = "O0710"
    --local m = Media[id]
    --print(m.handle)
    --local ps = Media.persons( m.handle )
    --print(util.dump(m))
    --print(m.handle,#ps,util.dump(ps))
    Media.all()
    --for i,o in ipairs(order) do
    --    print(i,Media[o[1]].path)
    --end
    for i,m in pairs(Media) do
     print (i,m.path)
     end
else
    return Media
end


--[[
..[11] = {
......[1] = {
.........[1] = false,
.........[2] = {},
.........[3] = {},
.........[4] = {},
.........[5] = df476fbdc167dd2ccbd20453761,
.........[6] = {
............[1] = 79,
............[2] = 33,
............[3] = 85,
............[4] = 45,},},
.
return {
            "type": "object",
            "title": _("Media"),
            "properties": {
                "_class": {"enum": [cls.__name__]},
                "handle": {"type": "string",
                           "maxLength": 50,
                           "title": _("Handle")},
                "gramps_id": {"type": "string",
                              "title": _("Gramps ID")},
                "path": {"type": "string",
                         "title": _("Path")},
                "mime": {"type": "string",
                         "title": _("MIME")},
                "desc": {"type": "string",
                         "title": _("Description")},
                "checksum": {"type": "string",
                             "title": _("Checksum")},
                "attribute_list": {"type": "array",
                                   "items": Attribute.get_schema(),
                                   "title": _("Attributes")},
                "citation_list": {"type": "array",
                                  "items": {"type": "string",
                                            "maxLength": 50},
                                  "title": _("Citations")},
                "note_list": {"type": "array",
                              "items": {"type": "string"},
                              "title": _("Notes")},
                "change": {"type": "integer",
                           "title": _("Last changed")},
                "date": {"oneOf": [{"type": "null"}, Date.get_schema()],
                         "title": _("Date")},
                "tag_list": {"type": "array",
                             "items": {"type": "string",
                                       "maxLength": 50},
                             "title": _("Tags")},
                "private": {"type": "boolean",
                            "title": _("Private")}
            }
        }
]]--
%</media>
%<*init>
local grps = {_TYPE='module', _NAME='gramps', _VERSION='0.9.10.2024',
        _DESCRIPTION='gramps routines gebruikt voor LuaLaTeX'}

require("gramps.util")
local person = require("gramps.person")
local tprt   = require("gramps.grpstex")

table.deep_merge(grps,require("gramps.pedegree"))

grps.fullname  = person.fullname
grps.allperson = tprt.allperson

if arg ~= nil and arg[0] == string.sub(debug.getinfo(1,'S').source,2) then
    --pass
    grps.setdatabase("/home/marc/Nextcloud/gramps/grampsdb/63a99d81/sqlite.db")

    print(grps.fullname('I0018'))
    print(grps.descendent_tree_data('I0018',4))

else
    return(grps)
end

%</init>
%<*grpstex>
local grps = {}
local family = require("gramps.family")
local person = require("gramps.person")
local util   = require("gramps.util")
local events = require("gramps.events")
local place  = require("gramps.place")
local media  = require("gramps.media")
local print = require("gramps.output")

--local = require("")
--format = "%(asctime)s - %(name)s - %(levelname)s - %(message)s (%(filename)s:%(lineno)d)"

OPTION = {O_CENTRAL=1,O_SPOUSE=2,O_PARENTS=3,O_CHILDREN=4,O_SPOUSE_HANDLE=5,O_LEVEL=6,
    LONG=0,LIFEEVENTS=1,VOCATIONAL=2,RESIDENCE=3,RELATIONS=4,PARENTS=5,CHILDREN=6,FULNAME=7,SPOUSEPARENTS=8,MEDIA=9}


local function set_options(a1,a2)
    local res = 0
    local op = 0
    if a2==nil then op = a1 else
        op = a2
        res = a1
    end
--print(res,util.dump(op))

    if type(op)=="table" then
        for i,v in ipairs(op) do res=res | 2^v end
    else
        res = res & 2^op
    end

    return res
end

local function remove_options(option,op)
    if type(op)=="table" then
        for i,v in ipairs(op) do option=option ~ 2^v end
    else
        option = option | 2^op
    end

    return options
end

local function bin_set(getal,bin)
--print(getal,2^bin,(getal&(2^bin) ~=0 ))
    return (getal&(2^bin) ~=0 )
end

local option_parents  = set_options({OPTION.FULNAME})
local option_children = set_options({OPTION.LIFEEVENTS,OPTION.VOCATIONAL,OPTION.RESIDENCE,OPTION.RELATIONS,OPTION.CHILDREN,OPTION.SPOUSEPARENTS})
local option_central  = set_options({OPTION.FULNAME,OPTION.LIFEEVENTS,OPTION.VOCATIONAL,OPTION.RESIDENCE,OPTION.RELATIONS,OPTION.CHILDREN,OPTION.
    SPOUSEPARENTS,OPTION.PARENTS,OPTION.MEDIA})
local option_spouse   = set_options({OPTION.FULNAME,OPTION.LIFEEVENTS,OPTION.VOCATIONAL,OPTION.RESIDENCE,OPTION.RELATIONS,OPTION.CHILDREN,OPTION.
    SPOUSEPARENTS,OPTION.PARENTS})


local option_lastchildren = set_options({})

local default_opts = {option_central,option_spouse,option_parents,option_children,0,1}


function unescape(str)
	if not tex then return str end
	if type(str)=="string" then
		res = string.gsub(str,"_","\\_")
		res = string.gsub(res,"~","$\\sim$")
		res = string.gsub(res,";",";\\-")
		res = string.gsub(res,"#","\\#")
		res = string.gsub(res,'"','``')
	else
		res = "TYPE: "..type(str)
	end
	return res
end

function file_exists(filename)
    local file = io.open(filename, "r")
    if file then
        file:close()
        return true
    else
        return false
    end
end

function grps.gettextwidth()
    local points = 469*65536
    if tex and tex.dimen then
        points = tex.dimen.columnwidth or tex.dimen.textwidth
    end
--local columnwidth_points = tex.dimen.columnwidth
--tex.print("Textwidth in points: " .. tostring(columnwidth_points / 65536) .. "pt")
--local textwidth_in_cm = (columnwidth_points / 65536) / 28.3464567
--tex.print(textwidth_in_cm.."cm")
    return points/1857713.386
end

function grps.long_print_person(handle,level,opts)
    local opts = opts or default_opts
    local level = level or 3
    local options = {}

    for i,v in ipairs(opts) do  if type(v)=="number" then opts[i]= v | 1 end end
    --print.i(util.dump(options))
    grps.print_person(handle,level,1,opts,OPTION.O_CENTRAL)
end

function grps.short_print_person(handle,level,opts)
    local opts = opts or default_opts
    local level = level or 3
    local options = {}

    for i,v in ipairs(opts) do if type(v)=="number" then
        opts[i]= v & ~set_options({OPTION.LONG, OPTION.VOCATIONAL, OPTION.RESIDENCE})
    end end
--    for i=1,level do
--        options[i]=table.copy(opts)
--        options[i][OPTION.O_LEVEL]=i
--    end
    --print.i(util.dump(options))
    grps.print_person(handle,level,1,opts,OPTION.O_CENTRAL)
end

function grps.print_person(h,max_level,level,opts,person_type)
    local opt = opts[person_type]
    local calling_spouse = opts[OPTION.O_SPOUSE_HANDLE]
    opts[OPTION.O_SPOUSE_HANDLE] = ""

    local p=person(h)
    local h=p.handle
    local pe = person.events(h)

    print.i("print "..person.fullname(h))

    if person_type ~= OPTION.O_CENTRAL and p.ancestornummer then
        print.s("\\hyperlink{"..p.gramps_id.."}{")
    else
        print.s("\\sethypertarget{"..p.gramps_id.."}{")
    end
    if bin_set(opt,OPTION.FULNAME) then print.s(person.fullname(h)) else print.s(person.firstname(h)) end
    print.s("}")

    print.s("\\index{"..person.familyname(h).."!"..person.firstname(h)..person(h).gramps_id.."@"..person.firstname(h).."}")
    if person_type ~=OPTION.O_PARENTS then print.s(". ") end


--event.LifeEvents={event.TYPE.BIRTH, event.TYPE.BAPTISM, event.TYPE.DEATH,
--			event.TYPE.BURIAL, event.TYPE.CREMATION, event.TYPE.ADOPT}
    --print.i("Type van pe is ",type(pe))
    if pe and bin_set(opt,OPTION.LIFEEVENTS) then
        local s = get_tex_event_by_type(pe,events.TYPE.BIRTH)
        s = util.comma_con(s,get_tex_event_by_type(pe,events.TYPE.BABTISM))
        s = util.comma_con(s,get_tex_event_by_type(pe,events.TYPE.DEATH))
        s = util.comma_con(s,get_tex_event_by_type(pe,events.TYPE.BURIAL))
        if bin_set(opt,OPTION.LONG) then
            s=util.is_empty(s,"",hijzij(p)..s..". ")
        else
            s=util.is_empty(s,"",s..". ")
        end
        if #s>0 then print(s) end
    end

    if pe and bin_set(opt,OPTION.VOCATIONAL) then
        s = get_tex_event_by_type(pe,events.TYPE.OCCUPATION)
        s = util.comma_con(s,get_tex_event_by_type(pe,events.TYPE.RETIREMENT))
        s = util.comma_con(s,get_tex_event_by_type(pe,events.TYPE.ELECTED))
        s = util.comma_con(s,get_tex_event_by_type(pe,events.TYPE.MILITARY_SERV))
        s = util.comma_con(s,get_tex_event_by_type(pe,events.TYPE.ORDINATION))
        s = util.comma_con(s,get_tex_event_by_type(pe,events.TYPE.EDUCATION))
        s = util.comma_con(s,get_tex_event_by_type(pe,events.TYPE.DEGREE))
        s = util.comma_con(s,get_tex_event_by_type(pe,events.TYPE.GRADUATION))
        if bin_set(opt,OPTION.LONG) then
            s=util.is_empty(s,"",hijzij(p)..s..". ")
        else
            s=util.is_empty(s,"",s..". ")
        end
        if #s>0 then print(s) end
        s=util.is_empty(s,"",hijzij(p)..s..". ")
    end

    if pe and bin_set(opt,OPTION.RESIDENCE) then
        s = get_tex_event_by_type(pe,events.TYPE.RESIDENCE)
        if bin_set(opt,OPTION.LONG) then
            s=util.is_empty(s,"",hijzij(p)..s..". ")
        else
            s=util.is_empty(s,"",s..". ")
        end
        if #s>0 then print(s) end
        s=util.is_empty(s,"",hijzij(p)..s..". ")
    end

    if bin_set(opt,OPTION.PARENTS) then
        grps.print_parents(h,max_level,level,opts)
    end

    local picture_printed=false
    if bin_set(opt,OPTION.MEDIA) and p.blob_data and p.blob_data[11][1] then
        ph=p.blob_data[11][1][5]
        grps.picture(ph)
        picture_printed=true
    end
    ------ relaties --------
    local kwartier_family_handle=""
    local family_nr=0
    if bin_set(opt,OPTION.RELATIONS) then
        local fams = person.spouses(p.handle)
        for i,fh in ipairs(fams) do
            --dprint("\nfamily handle: "..fh)

            f=family[fh]
            if f.father_handle == p.handle then
                spouse=f.mother_handle
            else
                spouse=f.father_handle
            end

            if p.kwartiernummer and spouse == nil then
                kwartier_family_handle=fh
                family_nr=i

            elseif p.kwartiernummer and  (p.kwartiernummer+1) == person[spouse].kwartiernummer then
                kwartier_family_handle=fh
                family_nr=i

            elseif p.kwartiernummer and  (p.kwartiernummer-1) == person[spouse].kwartiernummer then
                kwartier_family_handle=fh
                family_nr=i

            else
                if calling_spouse~=spouse then
                    --print("\\\\calsp="..calling_spouse.." \\\\sp="..spouse.." \\\\h="..p.handle)
                    --if not picture_printed then print("\\\\") end
                    if not picture_printed then print("\n\n\n\\noindent") end

                    opts[OPTION.O_SPOUSE_HANDLE] = p.handle
                    if #fams > 1 then print.s("("..i..")") end
                    grps.print_relation(fh,p.gender,i,opt)
                    grps.print_person(spouse,max_level,level,opts,OPTION.O_SPOUSE)

                    --if bin_set(opt,OPTION.PARENTS) then
                    --    grps.print_parents(spouse,max_level,level,opts)
                    --end

                    if bin_set(opt,OPTION.CHILDREN) then
                        grps.print_children(fh,max_level,level,opts)
                    end
                end
            end
        end

        if  #kwartier_family_handle>1 then
            if p.gender==1 and spouse ~= "" then
                if bin_set(opt, OPTION.LONG) then
                    if family_nr > 0 then
                        print("\\item[\\gtrsymMarried$^{"..family_nr.."}$]")
                    else
                        print("\\item[\\gtrsymMarried]")
                    end
                end
                grps.print_relation(kwartier_family_handle,p.gender,family_nr,opt)
            else
                if bin_set(opt, OPTION.CHILDREN) then
                    --print("LF1\\\\")
                    if family_nr > 0 then print.s("("..family_nr..")") end
                    grps.print_children(kwartier_family_handle,max_level,level,opts)
                end
            end
        end
    end
end


function grps.print_relation(fh,man,times,opt)
    local f = family[fh]
    local fe = family.events(f.handle)
    --dprint(util.dump(f))

    local ss,s,main_handle,spouse_handle
    if man==1 then
        main_handle = f.father_handle
        spouse_handle = f.mother_handle
        ss="\\grpsTHij "
    else
        spouse_handle = f.father_handle
        main_handle = f.mother_handle
        ss="\\grpsTZij "
    end

    if fe then
        s = get_tex_event_by_type(fe,events.TYPE.ENGAGEMENT)
        s = util.comma_con(s,get_tex_event_by_type(fe,events.TYPE.MARR_ALT))
        s = util.comma_con(s,get_tex_event_by_type(fe,events.TYPE.MARRIAGE))
        s = util.comma_con(s,get_tex_event_by_type(fe,events.TYPE.DIVORCE))
        s = util.comma_con(s,get_tex_event_by_type(fe,events.TYPE.ANNULMENT))
        s = util.comma_con(s,get_tex_event_by_type(fe,events.TYPE.MARR_SETTL))
        s = util.comma_con(s,get_tex_event_by_type(fe,events.TYPE.MARR_LIC))
        s = util.comma_con(s,get_tex_event_by_type(fe,events.TYPE.MARR_CONTR))
        s = util.comma_con(s,get_tex_event_by_type(fe,events.TYPE.MARR_BANNS))
        s = util.comma_con(s,get_tex_event_by_type(fe,events.TYPE.DIV_FILING))
    else
        s=" \\grpsTkoppelde"
    end
    
    if bin_set(opt,OPTION.LONG) then
        s=util.is_empty(s,ss..s.." \\grpsTmet ",ss..s.." \\grpsTmet ")--..person.fulname(spouse_handle)..". ")
    else
        s=util.is_empty(s,"$\\times$",s)--..person.fulname(spouse_handle)..". ")
    end
    if #s>0 then print(s) end
    
end

function grps.print_children(fh,max_level,level,options)
    --print.i("children"..util.dump(options))
    if max_level>level then
        level = level + 1
        --dprint("fhandle :" .. fh)
        local children = family.get_children(fh)
        --print(util.dump(children))
        local sorted = person.sort_person_handles(children)
        if #children > 0 then
            print("\\begin{grampslist"..util.roman(level).."}")
            for j,ic in ipairs(sorted) do
                print("\\item["..j.."]")--..person.fulname(children[ic[1]]))
                local child = children[ic[1]]
                --
                local ref_nummer = person[child].kwartiernummer  or person[child].ancestornummer
                if  ref_nummer then
                    print.s("\\hyperlink{"..person[child].gramps_id.."}{")
                    print.s(person.fullname(children[ic[1]]).." ("..ref_nummer.."$\\rightarrow$}).")
                else
                    grps.print_person(children[ic[1]],max_level,level,options,OPTION.O_CHILDREN)
                end
            end
            print("\\end{grampslist"..util.roman(level).."}")
        end
    end
end

function grps.print_parents(ph,max_level,level,options)
    s=""
    --print(ph,util.dump(options))
    local p=person[ph]
    --print("("..p.gramps_id..")")
    local fam = person.parents(ph)
    --dprint("in parents"..util.dump(options))
    for i,fh in ipairs(fam) do
        f=family(fh)
    --print(util.dump(f))
        if f.father_handle or f.mother_handle then
            --print(options.relation,OPTION.LONG)
            --dprint("parents 1 ",util.dump(options))
            if bin_set(options[OPTION.O_PARENTS],OPTION.LONG) then
                print(ZoonDochter(p))
            else
                print.s("(")
            end
            if  f.father_handle then grps.print_person(f.father_handle,max_level,level,options,OPTION.O_PARENTS) end
            if  f.father_handle and f.mother_handle then
                if bin_set(options[OPTION.O_PARENTS],OPTION.LONG) then print.s(" \\grpsTen ") else print.s(" $\\times$ ") end
            end
            if f.mother_handle then grps.print_person(f.mother_handle,max_level,level,options,OPTION.O_PARENTS) end

            --dprint("parents 2 ",util.dump(options))
            if bin_set(options[OPTION.O_PARENTS],OPTION.LONG) then
                print(". ")
            else
                print(") ")
            end
        end
    end
end

function get_tex_event_by_type(evs,ev_type)
    local s_ret=""
    local s=""
--print.i("evs = ",util.dump(evs))
	for i,eh in ipairs(evs) do
        local ev   = events[eh]
		local blob = ev.blob_data
        --dprint(i,eh,blob[3][1],ev_type)
		--io.write(util.dump(ev))
        if ev_type == blob[3][1] then
			s="\\grpsEvent{"..ev_type.."}"

			if blob[4] and blob[4][4] then
				s=s.."{"..blob[4][1].."}"
				s=s.."{"..blob[4][2].."}"
				s=s.."{"..blob[4][3].."}"
				s=s.."{"..blob[4][4][3]..
					util.is_zero(blob[4][4][2],"","-"..blob[4][4][2])..
					util.is_zero(blob[4][4][1],"","-"..blob[4][4][1]).."}"
			else
				s=s.."{0}{0}{0}{}"
				--io.write(util.dump(blob))
			end
			s=s.."{"..place.name(ev.place).."}"
			if blob[4] and blob[4][4] and blob[4][4][5] and blob[4][2]>3 then
				s=s.."{"..blob[4][4][7]..
					util.is_zero(blob[4][4][6],"","-"..blob[4][4][6])..
					util.is_zero(blob[4][4][5],"","-"..blob[4][4][5]).."}"
			else
				s=s.."{}"
			end
			s=s.."{}{"..unescape(ev.description).."}"
        else
            s=""
        end
        s_ret = util.comma_con(s_ret,s)
	end
	return s_ret
end

local function get_textree_event_by_type(h,ev_type)
    evs = person.events(h)
    local s=""
    local plus =""
	if evs then for i,eh in ipairs(evs) do
        local ev   = events[eh]
		local blob = ev.blob_data
        if ev_type == blob[3][1] then
            if blob[4] and blob[4][4] then
            --print(util.dump(blob[4][4]))
                s = s.."{"..blob[4][4][3]..
					util.is_zero(blob[4][4][2],"","-"..blob[4][4][2])..
					util.is_zero(blob[4][4][1],"","-"..blob[4][4][1]).."}"
            else
                s=s.."{}"
            end
            local placename = place.name(ev.place)
            if placename=="" then plus="-" else s = s.."{"..placename.."}" end
        end
    end end
    return s,plus
end

function grps.tree_person(id,fun,link)
    local link = link or ""
    local fun = fun or 'g'
    local s=""

    local p=person(id)
    local h=p.handle
    s = fun.."[id="..p.gramps_id..link..']{\n'
    --print(util.dump(p))
    if p.gender==1 then s=s.."male,\n" else s=s.."female,\n" end
    s=s.."name = {\\pref{"..person.firstname(h).."} \\surn{"..person.familyname(h).."}},\n"
    datum,plus = get_textree_event_by_type(p.handle,events.TYPE.BIRTH)
    if datum ~= "" then s=s.."birth"..plus.." = "..datum..",\n" end
    -- baptism
    datum,plus = get_textree_event_by_type(p.handle,events.TYPE.BABTISM)
    if datum ~= "" then s=s.."baptism"..plus.." = "..datum..",\n" end
    -- birth
    datum,plus = get_textree_event_by_type(p.handle,events.TYPE.DEATH)
    if datum ~= "" then s=s.."death"..plus.." = "..datum..",\n" end
    -- birth
    datum,plus = get_textree_event_by_type(p.handle,events.TYPE.BURIAL)
    if datum ~= "" then s=s.."burial"..plus.." = "..datum..",\n" end
    s = s.."}\n"
    return s
end


function grps.picture(id)
    local m = media(id)
    local handle=m.handle
    local label=m.gramps_id
    local titel= unescape(m.desc) or ""
    local x=200
    local y=200
    local persons = media.persons(handle)

    --print(util.dump(persons))
    --print(util.dump(m))

    local filename =media.path(handle)
        if file_exists(filename) then
        local process = io.popen("identify -format '%wx%h' "..filename)
        local result = process:read("*a")
        process:close()
        local longsize = 0.9*(grps.longsize or grps.gettextwidth())
        local x,y

        --eprint("Image dimensions: " .. result.." "..longsize.."cm")  -- Example output: "800x600"

        for lx, ly in string.gmatch(result,'(%d+)x(%d+)') do  x=lx; y=ly   end
        --print.i("Image "..m.path.." "..x.."X"..y)

        if x>y then
            longsize=longsize*0.7
        end
        y=(longsize*y)/x; x=longsize

       --print.i("Image "..m.path.." "..x.."X"..y)

        print('\\begin{Figure}\\vspace{-2ex}\\begin{center}%')
        print('\\begin{tikzpicture}[x=10mm,y=10mm]')
        print('\\node[inner sep=0pt] (PIC) {\\includegraphics[width='..x..'cm,height='..y..'cm]{'..filename..'}};')
    --tannr=ord('A')

        if #persons>0 then
            print('\\begin{scope}[ocg={ref=REC'..label..', status=invisible, name=ok}]')
            for i,t in ipairs(persons) do
                local tx = (t.x1*x)/100.0
                local ty = ((100-t.y1)*y)/100.0
                local tw = (t.x2*x)/100.0
                local th = ((100-t.y2)*y)/100.0
                print('\\draw[tagbox,shift=(PIC.south west)] ('..tx..','..ty..') rectangle ('..tw..','..th..');')
                if #persons>1 then
                    print('\\node[tagnumber] at ([shift=(PIC.south west)] '..(x*t.xm/100)..','..(y*(100-t.ym)/100)..') {'..i..'};')
                end
            end
        print("\\node at (0,0) {\\switchocg{REC"..label.."}{\\raisebox{0pt}["..x.."cm][0cm]{\\makebox["..y.."cm]{}}}};")
--\draw[tagbox,shift=(PIC.south west)] (3.2303155339806,2.1) rectangle (3.5795388349515,1.59);
--\node[color=blue] at ([shift=(PIC.south west)] 1,1)  {11111};

            print('\\end{scope}')
        end
        print('\\end{tikzpicture}')
        print('\\vspace{-3.5ex}\\\\%%')
        --print('\\captionof{figure}{'..titel..'}\\label{fig:'..label..'}%')
        print('\\textbf{'..titel..'\\label{fig:'..label..'}}%')
        --print('\\vspace{-1ex}')
        if #persons>0 then
            --print(' [\\switchocg{REC'..label..'}{TAGS}]\\\\%')
            local s=""
            for i=1,#persons do

--    for i,v in ipairs(persons) do
--        print(i,util.dump(persons[i]),persons[i].handle)
            s=s.."\\hyperlink{"..person[persons[i].handle].gramps_id.."}{("..i..") "..unescape(person.fullname(persons[i].handle)).."}"
                if i < #persons  then
                    if 1 == #persons-1 then s=s.." and " else s=s..", " end
                end
            end
            print('{\\small'..s..'}')
        end
        print('\\end{center}\\end{Figure}%')
    else
        print.e("File "..m.path.." not found!")
    end

end

function hijzij(p)
    if p.gender==1 then return "\\grpsTHij "
    else return "\\grpsTZij " end
end

function ZijnHaar(p)
    if p.gender==1 then return "\\grpsTZijn "
    else return "\\grpsTHaar " end
end

function ZoonDochter(p)
    if p.gender==1 then return "\\grpsTZoon "
    else return "\\grpsTDochter " end
end

function grps.test()
    print.i("Dit is een test naar log")
    print("Dit is een test naar tekst")

    local info = debug.getinfo(2, "nSl")
    print(util.dump(info))
    --print( info.source, info.currentline)
end
function hallo()
grps.test()
end

function grps.allmedia()
    media.all()
    local i=0
    for h,m in pairs(media) do
        print("\\subsection{"..unescape(m.path).." ("..m.gramps_id..")}")
        i=i+1
        if i>20 then break end
        grps.picture(m.handle)
    end
end

function grps.allperson()
    person.all()
    return person
end

--local textwidth_in_points = tex.dimen.textwidth
--  tex.print("Textwidth in points: " .. tostring(textwidth_in_points / 65536) .. "pt")
-- local textwidth_in_cm = (textwidth_in_points / 65536) / 28.3464567
query.close()


if arg ~= nil and arg[0] == string.sub(debug.getinfo(1,'S').source,2) then
    --local fh="c5db97ee058b578e47c10737e0f"
    --fh='F0001'
    --grps.print_relation(fh,1,default_options)
    --grps.print_children(fh,default_options)
    grps.long_print_person('I0692')
    --grps.short_print_person('I0692')
    --grps.test()
    --hallo()
    --grps.picture("O0710")
    --grps.allmedia()
    --grps.print_person('I0692',{person=2^OPTION.LIFEEVENTS+2^OPTION.RELATIONS+2^OPTION.FULNAME,levl=1,relation=0})
    --print(grps.tree_person('I0692'))
    --print(grps.tree_person('I0565'))
    --grps.allperson()
    --I2483
else
    return(grps)
end

%</grpstex>
%<*family>
local query=require("gramps.queries")
local util=require("gramps.util")
local event=require("gramps.events")
local date=require("gramps.date")

local Family = {_TYPE='module', _NAME='gramps.family' ,_VERSION='0.9.10.2024'}

local family_meta = {}

local families = {}
local order = {}
local id_handle = {}

local function check_handle(req)
	if type(req)=="string" then
		if #req >6 then
			handle=req
		else
			handle  = id_handle[req] or query.get_family_handle_from_id(req)
		end
	end
	return handle
end

function Family:new(req)
    --print("Family:new",handle)
    --print("Family:new",print(util.dump(families)))
    local handle = check_handle(req)

    if families[handle] then
		return families[handle]
	else
		r = query.get_family_from_handle(handle)
		if r[1] then
			families[handle]=r[1]
			id_handle[r[1].gramps_id]=handle
			return r[1]
		else
			return(nil)
		end
	end
end

local function check(handle)
	f=Family(handle)
	--print("check_handle",p.handle)
	return f.handle
end

function Family.all()
	local rf, rl = query.get_family_from_handle(nil,false)
	for i,rf in ipairs(r) do
		order[i]=f.handle
		families[p.handle] = f
	end
end

function Family.events(handle)
	if Family[handle].events == nil then
        Family[handle].events = event.events(handle)
		--Family[handle].events = query.get_events_from_handle(handle)
	end
	return Family[handle].events
end

local event_types = {event.TYPE.ENGAGEMENT, event.TYPE.MARRIAGE, event.TYPE.DIVORCE, event.TYPE.ANNULMENT, event.TYPE.MARR_SETTL, event.TYPE.MARR_LIC,
               event.TYPE.MARR_CONTR, event.TYPE.MARR_BANNS, event.TYPE.DIV_FILING, event.TYPE.MARR_ALT}

function get_family_date(handle)
    local ret=0
    local evs=Family.events(handle)
    --print(util.dump(evs))
    if evs then for i, evh in ipairs(evs) do
        local blob=event[evh].blob_data
        --print(util.dump(blob))
        if blob[4] and blob[4][4] then
            ret = date.days_from_year_0(blob[4][4][3],blob[4][4][2],blob[4][4][1])
            if ret>0 then break end
        end
    end end
    return ret
end

function Family.get_person_family(handle)
    local parents = {}
    local child = {}
    local r = query.get_person_family(handle)

    for i,f in ipairs(r) do
        if families[f.handle]==nil then
            families[f.handle]=f
        end
        if handle==f.father_handle or handle==f.mother_handle then
            Family[f.handle].date = get_family_date(f.handle)
            table.insert(child,f.handle)
        else
            table.insert(parents,f.handle)
            --print("parents of",handle==father_handle)
        end
    end
    table.sort(child, function(a, b) return Family[a].date <Family[b].date end )

    return child, parents
end

function Family.has_children(fhandle)
     if #Family.get_children(fhandle) > 0 then
        return true
    else
        return false
    end
end

function Family.get_children(fhandle)
    local f=Family[fhandle]
    if f.children == nil then
        f.children = {}
        local cs = query.get_persons_from_family(f.handle)
        for i,h in ipairs(cs) do
            if h~=f.father_handle and h~=f.mother_handle then
                table.insert(Family[fhandle].children,h)
            end
         end
    end
    return Family[fhandle].children
end

-------------------------------------
-- Set the metatable to the module
-------------------------------------
local function family_iterator(order, i)
	--print(order,key)
	i = i + 1
    if i <= #order then
		--print(i,order[i])
        return i, families[order[i]]
    end
end

setmetatable(Family, {
    __call = function(_,handle)
        return Family:new(handle)
    end,

	__index = function(_,handle)
		return Family(handle)
	end,

	__newindex = function(_,handle,p)
		families[handle]=p
	end,

	__pairs = function(_)
        return family_iterator, order, 0  -- Return the custom iterator function, table, and initial index
	end
})

return Family
--[[
       return {
            "type": "object",
            "title": _("Family"),
            "properties": {
                "_class": {"enum": [cls.__name__]},
                "handle": {"type": "string",
                           "maxLength": 50,
                           "title": _("Handle")},
                "gramps_id": {"type": "string",
                              "title": _("Gramps ID")},
                "father_handle": {"type": ["string", "null"],
                                  "maxLength": 50,
                                  "title": _("Father")},
                "mother_handle": {"type": ["string", "null"],
                                  "maxLength": 50,
                                  "title": _("Mother")},
                "child_ref_list": {"type": "array",
                                   "items": ChildRef.get_schema(),
                                   "title": _("Children")},
                "type": FamilyRelType.get_schema(),
                "event_ref_list": {"type": "array",
                                   "items": EventRef.get_schema(),
                                   "title": _("Events")},
                "media_list": {"type": "array",
                               "items": MediaRef.get_schema(),
                               "title": _("Media")},
                "attribute_list": {"type": "array",
                                   "items": Attribute.get_schema(),
                                   "title": _("Attributes")},
                "lds_ord_list": {"type": "array",
                                 "items": LdsOrd.get_schema(),
                                 "title": _("LDS ordinances")},
                "citation_list": {"type": "array",
                                  "items": {"type": "string",
                                            "maxLength": 50},
                                  "title": _("Citations")},
                "note_list": {"type": "array",
                              "items": {"type": "string",
                                        "maxLength": 50},
                              "title": _("Notes")},
                "change": {"type": "integer",
                           "title": _("Last changed")},
                "tag_list": {"type": "array",
                             "items": {"type": "string",
                                       "maxLength": 50},
                             "title": _("Tags")},
                "private": {"type": "boolean",
                            "title": _("Private")}
]]--
%</family>
%<*events>
local place=require("gramps.place")
local util=require("gramps.util")
local date=require("gramps.date")
local Event = {_TYPE='module', _NAME='gramps.place' ,_VERSION='0.9.10.2024'}

local function translate(s)
	return(s) 
end

local _=translate
--[[
            "type": "object",
            "title": _("Event"),
            "properties": {
                "_class": {"enum": [cls.__name__]},
                "handle": {"type": "string",
                           "maxLength": 50,
                           "title": _("Handle")},
                "gramps_id": {"type": "string",
                              "title": _("Gramps ID")},
                "type": EventType.get_schema(),
                4"date": {"oneOf": [{"type": "null"}, Date.get_schema()],
                         "title": _("Date")},
                5"description": {"type": "string",
                                "title": _("Description")},
                6"place": {"type": ["string", "null"],
                          "maxLength": 50,
                          "title": _("Place")},
                7"citation_list": {"type": "array",
                                  "items": {"type": "string",
                                            "maxLength": 50},
                                  "title": _("Citations")},
                8"note_list": {"type": "array",
                              "items": {"type": "string",
                                        "maxLength": 50},
                               "title": _("Notes")},
                9"media_list": {"type": "array",
                               "items": MediaRef.get_schema(),
                               "title": _("Media")},
                10"attribute_list": {"type": "array",
                                   "items": Attribute.get_schema(),
                                   "title": _("Media")},
                11"change": {"type": "integer",
                           "title": _("Last changed")},
                12"tag_list": {"type": "array",
                             "items": {"type": "string",
                                       "maxLength": 50},
                             "title": _("Tags")},
                13"private": {"type": "boolean",
                            "title": _("Private")},
]]--
Event.TYPE = {
    UNKNOWN = -1,
    CUSTOM = 0,
    MARRIAGE = 1,
    MARR_SETTL = 2,
    MARR_LIC = 3,
    MARR_CONTR = 4,
    MARR_BANNS = 5,
    ENGAGEMENT = 6,
    DIVORCE = 7,
    DIV_FILING = 8,
    ANNULMENT = 9,
    MARR_ALT = 10,
    ADOPT = 11,
    BIRTH = 12,
    DEATH = 13,
    ADULT_CHRISTEN = 14,
    BAPTISM = 15,
    BAR_MITZVAH = 16,
    BAS_MITZVAH = 17,
    BLESS = 18,
    BURIAL = 19,
    CAUSE_DEATH = 20,
    CENSUS = 21,
    CHRISTEN = 22,
    CONFIRMATION = 23,
    CREMATION = 24,
    DEGREE = 25,
    EDUCATION = 26,
    ELECTED = 27,
    EMIGRATION = 28,
    FIRST_COMMUN = 29,
    IMMIGRATION = 30,
    GRADUATION = 31,
    MED_INFO = 32,
    MILITARY_SERV = 33,
    NATURALIZATION = 34,
    NOB_TITLE = 35,
    NUM_MARRIAGES = 36,
    OCCUPATION = 37,
    ORDINATION = 38,
    PROBATE = 39,
    PROPERTY = 40,
    RELIGION = 41,
    RESIDENCE = 42,
    RETIREMENT = 43,
    WILL = 44}
    
Event.MAP = {
        [Event.TYPE.UNKNOWN] = { _("Unknown"), "Unknown"},
        [Event.TYPE.CUSTOM] = {_("Custom"), "Custom"},
        [Event.TYPE.ADOPT] = {_("Adopted"), "Adopted"},
        [Event.TYPE.BIRTH] = {_("Birth"), "Birth"},
        [Event.TYPE.DEATH] = {_("Death"), "Death"},
        [Event.TYPE.ADULT_CHRISTEN] = {_("Adult Christening"), "Adult Christening"},
        [Event.TYPE.BAPTISM] = {_("Baptism"), "Baptism"},
        [Event.TYPE.BAR_MITZVAH] = {_("Bar Mitzvah"), "Bar Mitzvah"},
        [Event.TYPE.BAS_MITZVAH] = {_("Bat Mitzvah"), "Bas Mitzvah"},
        [Event.TYPE.BLESS] = {_("Blessing"), "Blessing"},
        [Event.TYPE.BURIAL] = {_("Burial"), "Burial"},
        [Event.TYPE.CAUSE_DEATH] = {_("Cause Of Death"), "Cause Of Death"},
        [Event.TYPE.CENSUS] = {_("Census"), "Census"},
        [Event.TYPE.CHRISTEN] = {_("Christening"), "Christening"},
        [Event.TYPE.CONFIRMATION] = {_("Confirmation"), "Confirmation"},
        [Event.TYPE.CREMATION] = {_("Cremation"), "Cremation"},
        [Event.TYPE.DEGREE] = {_("Degree"), "Degree"},
        [Event.TYPE.EDUCATION] = {_("Education"), "Education"},
        [Event.TYPE.ELECTED] = {_("Elected"), "Elected"},
        [Event.TYPE.EMIGRATION] = {_("Emigration"), "Emigration"},
        [Event.TYPE.FIRST_COMMUN] = {_("First Communion"), "First Communion"},
        [Event.TYPE.IMMIGRATION] = {_("Immigration"), "Immigration"},
        [Event.TYPE.GRADUATION] = {_("Graduation"), "Graduation"},
        [Event.TYPE.MED_INFO] = {_("Medical Information"), "Medical Information"},
        [Event.TYPE.MILITARY_SERV] = {_("Military Service"), "Military Service"},
        [Event.TYPE.NATURALIZATION] = {_("Naturalization"), "Naturalization"},
        [Event.TYPE.NOB_TITLE] = {_("Nobility Title"), "Nobility Title"},
        [Event.TYPE.NUM_MARRIAGES] = {_("Number of Marriages"), "Number of Marriages"},
        [Event.TYPE.OCCUPATION] = {_("Occupation"), "Occupation"},
        [Event.TYPE.ORDINATION] = {_("Ordination"), "Ordination"},
        [Event.TYPE.PROBATE] = {_("Probate"), "Probate"},
        [Event.TYPE.PROPERTY] = {_("Property"), "Property"},
        [Event.TYPE.RELIGION] = {_("Religion"), "Religion"},
        [Event.TYPE.RESIDENCE] = {_("Residence"), "Residence"},
        [Event.TYPE.RETIREMENT] = {_("Retirement"), "Retirement"},
        [Event.TYPE.WILL] = {_("Will"), "Will"},
        [Event.TYPE.MARRIAGE] = {_("Marriage"), "Marriage"},
        [Event.TYPE.MARR_SETTL] = {_("Marriage Settlement"), "Marriage Settlement"},
        [Event.TYPE.MARR_LIC] = {_("Marriage License"), "Marriage License"},
        [Event.TYPE.MARR_CONTR] = {_("Marriage Contract"), "Marriage Contract"},
        [Event.TYPE.MARR_BANNS] = {_("Marriage Banns"), "Marriage Banns"},
        [Event.TYPE.ENGAGEMENT] = {_("Engagement"), "Engagement"},
        [Event.TYPE.DIVORCE] = {_("Divorce"), "Divorce"},
        [Event.TYPE.DIV_FILING] = {_("Divorce Filing"), "Divorce Filing"},
        [Event.TYPE.ANNULMENT] = {_("Annulment"), "Annulment"},
        [Event.TYPE.MARR_ALT] = {_("Alternate Marriage"), "Alternate Marriage"},
       
        }
        
Event.LifeEvents={Event.TYPE.BIRTH, Event.TYPE.BAPTISM, Event.TYPE.DEATH,
			Event.TYPE.BURIAL, Event.TYPE.CREMATION, Event.TYPE.ADOPT}
--[[             
             [__('Family'),
              [ENGAGEMENT, MARRIAGE, DIVORCE, ANNULMENT, MARR_SETTL, MARR_LIC,
               MARR_CONTR, MARR_BANNS, DIV_FILING, MARR_ALT] ],
             [T_('Religious'),
              [CHRISTEN, ADULT_CHRISTEN, CONFIRMATION, FIRST_COMMUN, BLESS,
               BAR_MITZVAH, BAS_MITZVAH, RELIGION] ],
             [T_('Vocational'),
              [OCCUPATION, RETIREMENT, ELECTED, MILITARY_SERV, ORDINATION] ],
             [T_('Academic'),
              [EDUCATION, DEGREE, GRADUATION] ],
             [_T_('Travel'),
              [EMIGRATION, IMMIGRATION, NATURALIZATION] ],
             [_T_('Legal'),
              [PROBATE, WILL] ],]]--
Event.Residence={Event.TYPE.RESIDENCE, Event.TYPE.CENSUS, Event.TYPE.PROPERTY}
--[[             [_T_('Other'),
              [CAUSE_DEATH, MED_INFO, NOB_TITLE, NUM_MARRIAGES] ] ]
]]--


local Event_meta = {}
local events = {}
local order = {}
local obj_events = {}


function Event:new(handle)
--print("new",handle,events[handle])
    if events[handle] then
		return events[handle]
	else
		r = query.get_event_from_handle(handle)
		if r[1] then
			events[handle]=r[1]
			return r[1]
		else
			return(nil)
		end
	end
end

function Event.events(handle)
    if handle and obj_events[handle] then return obj_events[handle] end

    local evs = query.get_events_from_handle(handle)
    --print("events",util.dump(evs))
    for i,ev in ipairs(evs) do
        events[ev.handle]=ev
        --if ev.obj_handle then
            if obj_events[ev.obj_handle] == nil then obj_events[ev.obj_handle]={} end
            table.insert(obj_events[ev.obj_handle],ev.handle)
        --end
    end
    --print("ecevt handles ",util.dump(ehs))
    if handle then   return obj_events[handle] end
end


function Event.get_event_by_type(evs,t)
--print("get_event_by_type",util.dump(evs),t)
	res={}
	if evs then
        for i,ev in ipairs(evs) do
            if events[ev] and events[ev].blob_data[3][1]==t then
                table.insert(res,ev)
                --print(util.dump(Event[ev].blob_data))
            end
        end
    end
	return res
end



-------------------------------------
-- Set the metatable to the module
-------------------------------------

setmetatable(Event, {
    __call = function(_,handle)
        return Event:new(handle)
    end,

	__index = function(_,handle)
		return Event(handle)
	end,

	__newindex = function(_,handle,e)
		events[handle]=e
	end,
})
----------------------------------------

if arg ~= nil and arg[0] == string.sub(debug.getinfo(1,'S').source,2) then
    -- pass
    --print(event.TYPE.DEGREE)
    --for i,n in ipairs(event.LifeEvents) do print(i,n,type(event.MAP[n][0]),event.MAP[n][1],_(event.MAP[n][1])) end
    --Event.events('c5db97f17c34f298cc32a490f68')

else
    return(Event)
end

%</events>
%<*date>
---@module date
local Date = {_TYPE='module', _NAME='gramps.date', __index = Date ,_VERSION='0.9.10.2024'}
util=require("gramps.util")

--local gettext = require("gettext")
--local _ = gettext.gettext
local function translate(s)
	return(s)
end
local _=translate

---
-- @table Gramps_date
-- @field 1 calendar integer @{Calendar}
-- @field 2 modifier integer @{Modifier}
-- @field 3 quality integer @{Quality}
-- @field 4 data table @{Dates}
-- @field 5 text
 --

---
-- @table Dates
-- @field 1 DAY_1
-- @field 2 MONTH_1
-- @field 3 YEAR_1
-- @field 5 DAY_2
-- @field 6 MONTH_2
-- @field 7 YEAR_2
 --

---
-- @table Calendar
Date.Calendar={
  Gregorian = 0, --0
  Julian = 1, --1
  Hebrew = 2, --2
  FrenchRepublican = 3, --3
  Persian = 4, --4
  Islamic = 5, --5
  Swedish = 6 --6
  }

---
-- @table Modifier
Date.Modifier={
  NONE = 0,-- 0
  BEFORE = 1,-- 1
  AFTER = 2,-- 2
  ABOUT = 3,-- 3
  RANGE = 4,-- 4
  SPAN = 5,-- 5
  TEXTONLY = 6,-- 6
  }

---
-- @table Quality
Date.Quality={
  NONE = 0,      -- 0
  ESTIMATED = 1 ,-- 1
  CALCULATED = 2,  -- 2
  INTERPRETED = 4 -- 4
  }

--print(_("Hello, world!"))  -- This will print the translated version of "Hello, world!"
--os.setlocale("es_ES")  -- Change locale to Spanish (Spain)

local moths={_("January"),_("Februari"),_("March"),_("April"),_("June"),_("Jyly"),_("August"),_("September"),_("October"),_("Noveber"),_("December")}
local modifier={_("before"),_("after"),_("about"),_("range"),_("between"),_(""),_(""),_(""),_("")}
local quality={_("estimate"),_("calculated"),_("calclated estimate")}


local function is_empty(s,a,b)
	if #s>0 then return(b) else return(a) end end
---
-- @param d @{Gramps_date}
-- @return text date
function Date.date(d)
	--print(util.dump(d))
	s=""
	d1=""
	d2=""
	
	--os.setlocale="nl_NL.UTF-8"
	if d[4][1]>0 then d1=tostring(d[4][1]) end
	if d[4][2]>0 then d1=d1..is_empty(d1,""," ")..moths[d[4][2]] end
	if d[4][3]>0 then d1=d1..is_empty(d1,""," ")..d[4][3] end
	
	if d[2]>3 then
		if d[4][5]>0 then d2=tostring(d[4][5]) end
		if d[4][6]>0 then d2=d2..is_empty(d2,""," ")..moths[d[4][6]] end
		if d[4][7]>0 then d2=d2..is_empty(d2,""," ")..d[4][7] end
	end
	
	if d[3]>0 then s=quality[d[3]] end
	if d[2]>0 then s=modifier[d[2]] end
	s=s..is_empty(s,""," ")..d1
	
	if d[2]>3 then
		s = s.." - "..d2
	end
	return s
end

---
-- @param d @{Gramps_date}
-- @return d1-m1-y1/d2-m2-y2
function Date.tex(d)
	local s=""
	local d1=""
	local d2=""


	--os.setlocale="nl_NL.UTF-8"
	if d[4][3]>0 then d1=tostring(d[4][3]) end
	if d[4][2]>0 then d1=d1..is_empty(d1,"","-")..d[4][2] end
	if d[4][1]>0 then d1=d1..is_empty(d1,"","-")..d[4][1] end

	if d[2]>3 then
		if d[4][7]>0 then d2=tostring(d[4][7]) end
		if d[4][6]>0 then d2=d2..is_empty(d2,"","-")..d[4][6] end
		if d[4][5]>0 then d2=d2..is_empty(d2,"","-")..d[4][5] end
	end
	if d[2]>3 then s = d1.."/"..d2
    elseif d[2]==1 then s="/"..d1
    elseif d[2]==2 then s=d1.."/"
    else s=d1 end

    if d[3]>0 then
        s= "(ca)"..s
    end

    --print("date.tex",s,d1,d2)
	return s
end

---
-- Checks is date is not estimated or relative
-- @param d @{Gramps_date}
-- @return boolean (true if real)
function Date.realdate(d)
    if d then
        return (d[2]==MOD_NONE and d[4][1]>0 and d[4][2]>0 and d[4][3]>0)
    else return false end
end

---
-- Checks is date has year and is at least about
-- @param d @{Gramps_date}
-- @return boolean (true if real)
function Date.aboutdate(d)
    --print(util.dump(d))
    return((d[2]==MOD_NONE or d[2]==MOD_ABOUT)  and d[4][3]>0)
end

-- Function to check if a year is a leap year
function is_leap_year(year)
  if year % 4 == 0 then
    if year % 100 == 0 then
      if year % 400 == 0 then
        return true
      else
        return false
      end
    else
      return true
    end
  else
    return false
  end
end

-- Function to calculate the number of days in a year
function days_in_year(year)
  if is_leap_year(year) then
    return 366
  else
    return 365
  end
end

function days_in_years(years)
  local total_days = 511340 --de dagen van de eerste 1400 jaar
  -- Sum the days for all complete years from 0 to (year - 1)
  for y = 1400, years - 1 do
    total_days = total_days + days_in_year(y)
  end
  return total_days
end

---
--  calculate total number of days from year 0 to a given year
function Date.days_from_year_0(year, month, day)

    local total_days = days_in_years(year)

    -- Days in the current year
    local days_in_month = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31}

    -- If it's a leap year, February has 29 days
    if is_leap_year(year) then
        days_in_month[2] = 29
    end

    -- Sum the days for the complete months in the current year
    for m = 1, month - 1 do
        total_days = total_days + days_in_month[m]
    end

    -- Add the days for the current month
    total_days = total_days + day

    return total_days
end

---
-- @param year
-- @return month, day, day_of_year, days_from_year0
function Date.calculateEasterDay(year)
    -- Meeus/Jones/Butcher algorithm to calculate the month and day of Easter
    local a = year % 19
    local b = math.floor(year / 100)
    local c = year % 100
    local d = math.floor(b / 4)
    local e = b % 4
    local f = math.floor((b + 8) / 25)
    local g = math.floor((b - f + 1) / 3)
    local h = (19 * a + b - d - g + 15) % 30
    local i = math.floor(c / 4)
    local k = c % 4
    local l = (32 + 2 * e + 2 * i - h - k) % 7
    local m = math.floor((a + 11 * h + 22 * l) / 451)

    local month = math.floor((h + l - 7 * m + 114) / 31)  -- Month of Easter (3 = March, 4 = April)
    local day = ((h + l - 7 * m + 114) % 31) + 1          -- Day of Easter

    -- Calculate the day of the year for Easter
    local daysInMarch = 59  -- Day number for March 1st (common year)
    if (year % 4 == 0 and year % 100 ~= 0) or (year % 400 == 0) then
        daysInMarch = 60   -- Leap year adjustment
    end
    local dayOfYear = (month == 3 and daysInMarch + day - 1) or (daysInMarch + 31 + day - 1)

    return month, day, dayOfYear, (days_in_years(year) + dayOfYear)
end



if arg ~= nil and arg[0] == string.sub(debug.getinfo(1,'S').source,2) then
    local days=Date.days_from_year_0(2000,0,0)
    print("days/year",days/2000)
else
    return Date
end
%</date>
%<*msdos>
copy src/gametheo.sty
%</msdos>
%<*remove>
#!/bin/bash
SCRIPT_DIR="$(dirname "$(realpath "${BASH_SOURCE[0]}")")"

NAAM=grpslua
OUTDIR="$HOME/texmf/tex/luatex/grps/"
DOCDIR="$HOME/texmf/doc/luatex/grps/"

rm -r $OUTDIR
rm -r $DOCDIR
%</remove>
%<*install>
#!/bin/bash
bash remove.sh
SCRIPT_DIR="$(dirname "$(realpath "${BASH_SOURCE[0]}")")"
echo $SCRIPT_DIR

NAAM=grpslua
OUTDIR="$HOME/texmf/tex/luatex/grps/"
DOCDIR="$HOME/texmf/doc/luatex/grps/"

if [ ! -d "$OUTDIR" ]; then
  mkdir "$OUTDIR"
fi
if [ ! -d "$DOCDIR" ]; then
  mkdir "$DOCDIR"
fi

sqlite3 "$SCRIPT_DIR/sqlite.db" < "$SCRIPT_DIR/database.sql"
mkdir $SCRIPT_DIR/gramps
mv $SCRIPT_DIR/*.lua $SCRIPT_DIR/gramps

lualatex -shell-escape "$SCRIPT_DIR/$NAAM.dtx"
makeindex "$SCRIPT_DIR/$NAAM.idx"
lualatex -shell-escape "$SCRIPT_DIR/$NAAM.dtx"

mv "$SCRIPT_DIR/$NAAM.sty" "$OUTDIR"
mv "$SCRIPT_DIR/gramps" "$OUTDIR"
mv "$SCRIPT_DIR/$NAAM.dtx" "$DOCDIR"
mv "$SCRIPT_DIR/$NAAM.pdf" "$DOCDIR"

mktexlsr

if [ -e "$DOCDIR$NAAM.dtx" ]; then
  rm $SCRIPT_DIR/$NAAM.idx
  rm $SCRIPT_DIR/$NAAM.log
  rm $SCRIPT_DIR/$NAAM.aux
  rm $SCRIPT_DIR/$NAAM.glo
  rm $SCRIPT_DIR/$NAAM.ilg
  rm $SCRIPT_DIR/$NAAM.out
  rm $SCRIPT_DIR/$NAAM.toc
  rm $SCRIPT_DIR/$NAAM.ind
fi
%</install>
% \fi
%
% \Finale
\endinput
